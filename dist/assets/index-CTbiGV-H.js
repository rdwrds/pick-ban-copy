(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))j(nt);new MutationObserver(nt=>{for(const ht of nt)if(ht.type==="childList")for(const St of ht.addedNodes)St.tagName==="LINK"&&St.rel==="modulepreload"&&j(St)}).observe(document,{childList:!0,subtree:!0});function V(nt){const ht={};return nt.integrity&&(ht.integrity=nt.integrity),nt.referrerPolicy&&(ht.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?ht.credentials="include":nt.crossOrigin==="anonymous"?ht.credentials="omit":ht.credentials="same-origin",ht}function j(nt){if(nt.ep)return;nt.ep=!0;const ht=V(nt);fetch(nt.href,ht)}})();function Qg(M){if(M.__esModule)return M;var m=M.default;if(typeof m=="function"){var V=function j(){return this instanceof j?Reflect.construct(m,arguments,this.constructor):m.apply(this,arguments)};V.prototype=m.prototype}else V={};return Object.defineProperty(V,"__esModule",{value:!0}),Object.keys(M).forEach(function(j){var nt=Object.getOwnPropertyDescriptor(M,j);Object.defineProperty(V,j,nt.get?nt:{enumerable:!0,get:function(){return M[j]}})}),V}var go={exports:{}},Fa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function Kg(){if(lh)return Fa;lh=1;var M=Symbol.for("react.transitional.element"),m=Symbol.for("react.fragment");function V(j,nt,ht){var St=null;if(ht!==void 0&&(St=""+ht),nt.key!==void 0&&(St=""+nt.key),"key"in nt){ht={};for(var v in nt)v!=="key"&&(ht[v]=nt[v])}else ht=nt;return nt=ht.ref,{$$typeof:M,type:j,key:St,ref:nt!==void 0?nt:null,props:ht}}return Fa.Fragment=m,Fa.jsx=V,Fa.jsxs=V,Fa}var oh;function Zg(){return oh||(oh=1,go.exports=Kg()),go.exports}var Mt=Zg(),vo={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Jg(){if(uh)return Rt;uh=1;var M=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),ht=Symbol.for("react.consumer"),St=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),a=Symbol.iterator;function r(b){return b===null||typeof b!="object"?null:(b=a&&b[a]||b["@@iterator"],typeof b=="function"?b:null)}var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s=Object.assign,f={};function o(b,E,R){this.props=b,this.context=E,this.refs=f,this.updater=R||n}o.prototype.isReactComponent={},o.prototype.setState=function(b,E){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,E,"setState")},o.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function d(){}d.prototype=o.prototype;function p(b,E,R){this.props=b,this.context=E,this.refs=f,this.updater=R||n}var _=p.prototype=new d;_.constructor=p,s(_,o.prototype),_.isPureReactComponent=!0;var S=Array.isArray,C={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function k(b,E,R,U,D,w){return R=w.ref,{$$typeof:M,type:b,key:E,ref:R!==void 0?R:null,props:w}}function P(b,E){return k(b.type,E,void 0,void 0,void 0,b.props)}function H(b){return typeof b=="object"&&b!==null&&b.$$typeof===M}function K(b){var E={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(R){return E[R]})}var ct=/\/+/g;function mt(b,E){return typeof b=="object"&&b!==null&&b.key!=null?K(""+b.key):E.toString(36)}function pt(){}function vt(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(pt,pt):(b.status="pending",b.then(function(E){b.status==="pending"&&(b.status="fulfilled",b.value=E)},function(E){b.status==="pending"&&(b.status="rejected",b.reason=E)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function gt(b,E,R,U,D){var w=typeof b;(w==="undefined"||w==="boolean")&&(b=null);var B=!1;if(b===null)B=!0;else switch(w){case"bigint":case"string":case"number":B=!0;break;case"object":switch(b.$$typeof){case M:case m:B=!0;break;case h:return B=b._init,gt(B(b._payload),E,R,U,D)}}if(B)return D=D(b),B=U===""?"."+mt(b,0):U,S(D)?(R="",B!=null&&(R=B.replace(ct,"$&/")+"/"),gt(D,E,R,"",function(I){return I})):D!=null&&(H(D)&&(D=P(D,R+(D.key==null||b&&b.key===D.key?"":(""+D.key).replace(ct,"$&/")+"/")+B)),E.push(D)),1;B=0;var F=U===""?".":U+":";if(S(b))for(var Z=0;Z<b.length;Z++)U=b[Z],w=F+mt(U,Z),B+=gt(U,E,R,w,D);else if(Z=r(b),typeof Z=="function")for(b=Z.call(b),Z=0;!(U=b.next()).done;)U=U.value,w=F+mt(U,Z++),B+=gt(U,E,R,w,D);else if(w==="object"){if(typeof b.then=="function")return gt(vt(b),E,R,U,D);throw E=String(b),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return B}function z(b,E,R){if(b==null)return b;var U=[],D=0;return gt(b,U,"","",function(w){return E.call(R,w,D++)}),U}function X(b){if(b._status===-1){var E=b._result;E=E(),E.then(function(R){(b._status===0||b._status===-1)&&(b._status=1,b._result=R)},function(R){(b._status===0||b._status===-1)&&(b._status=2,b._result=R)}),b._status===-1&&(b._status=0,b._result=E)}if(b._status===1)return b._result.default;throw b._result}var G=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)};function x(){}return Rt.Children={map:z,forEach:function(b,E,R){z(b,function(){E.apply(this,arguments)},R)},count:function(b){var E=0;return z(b,function(){E++}),E},toArray:function(b){return z(b,function(E){return E})||[]},only:function(b){if(!H(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Rt.Component=o,Rt.Fragment=V,Rt.Profiler=nt,Rt.PureComponent=p,Rt.StrictMode=j,Rt.Suspense=u,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Rt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Rt.cache=function(b){return function(){return b.apply(null,arguments)}},Rt.cloneElement=function(b,E,R){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var U=s({},b.props),D=b.key,w=void 0;if(E!=null)for(B in E.ref!==void 0&&(w=void 0),E.key!==void 0&&(D=""+E.key),E)!O.call(E,B)||B==="key"||B==="__self"||B==="__source"||B==="ref"&&E.ref===void 0||(U[B]=E[B]);var B=arguments.length-2;if(B===1)U.children=R;else if(1<B){for(var F=Array(B),Z=0;Z<B;Z++)F[Z]=arguments[Z+2];U.children=F}return k(b.type,D,void 0,void 0,w,U)},Rt.createContext=function(b){return b={$$typeof:St,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:ht,_context:b},b},Rt.createElement=function(b,E,R){var U,D={},w=null;if(E!=null)for(U in E.key!==void 0&&(w=""+E.key),E)O.call(E,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(D[U]=E[U]);var B=arguments.length-2;if(B===1)D.children=R;else if(1<B){for(var F=Array(B),Z=0;Z<B;Z++)F[Z]=arguments[Z+2];D.children=F}if(b&&b.defaultProps)for(U in B=b.defaultProps,B)D[U]===void 0&&(D[U]=B[U]);return k(b,w,void 0,void 0,null,D)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(b){return{$$typeof:v,render:b}},Rt.isValidElement=H,Rt.lazy=function(b){return{$$typeof:h,_payload:{_status:-1,_result:b},_init:X}},Rt.memo=function(b,E){return{$$typeof:c,type:b,compare:E===void 0?null:E}},Rt.startTransition=function(b){var E=C.T,R={};C.T=R;try{var U=b(),D=C.S;D!==null&&D(R,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(x,G)}catch(w){G(w)}finally{C.T=E}},Rt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Rt.use=function(b){return C.H.use(b)},Rt.useActionState=function(b,E,R){return C.H.useActionState(b,E,R)},Rt.useCallback=function(b,E){return C.H.useCallback(b,E)},Rt.useContext=function(b){return C.H.useContext(b)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(b,E){return C.H.useDeferredValue(b,E)},Rt.useEffect=function(b,E){return C.H.useEffect(b,E)},Rt.useId=function(){return C.H.useId()},Rt.useImperativeHandle=function(b,E,R){return C.H.useImperativeHandle(b,E,R)},Rt.useInsertionEffect=function(b,E){return C.H.useInsertionEffect(b,E)},Rt.useLayoutEffect=function(b,E){return C.H.useLayoutEffect(b,E)},Rt.useMemo=function(b,E){return C.H.useMemo(b,E)},Rt.useOptimistic=function(b,E){return C.H.useOptimistic(b,E)},Rt.useReducer=function(b,E,R){return C.H.useReducer(b,E,R)},Rt.useRef=function(b){return C.H.useRef(b)},Rt.useState=function(b){return C.H.useState(b)},Rt.useSyncExternalStore=function(b,E,R){return C.H.useSyncExternalStore(b,E,R)},Rt.useTransition=function(){return C.H.useTransition()},Rt.version="19.0.0",Rt}var ch;function wo(){return ch||(ch=1,vo.exports=Jg()),vo.exports}var Te=wo(),mo={exports:{}},Ga={},po={exports:{}},yo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function $g(){return fh||(fh=1,function(M){function m(z,X){var G=z.length;z.push(X);t:for(;0<G;){var x=G-1>>>1,b=z[x];if(0<nt(b,X))z[x]=X,z[G]=b,G=x;else break t}}function V(z){return z.length===0?null:z[0]}function j(z){if(z.length===0)return null;var X=z[0],G=z.pop();if(G!==X){z[0]=G;t:for(var x=0,b=z.length,E=b>>>1;x<E;){var R=2*(x+1)-1,U=z[R],D=R+1,w=z[D];if(0>nt(U,G))D<b&&0>nt(w,U)?(z[x]=w,z[D]=G,x=D):(z[x]=U,z[R]=G,x=R);else if(D<b&&0>nt(w,G))z[x]=w,z[D]=G,x=D;else break t}}return X}function nt(z,X){var G=z.sortIndex-X.sortIndex;return G!==0?G:z.id-X.id}if(M.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ht=performance;M.unstable_now=function(){return ht.now()}}else{var St=Date,v=St.now();M.unstable_now=function(){return St.now()-v}}var u=[],c=[],h=1,a=null,r=3,n=!1,s=!1,f=!1,o=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function _(z){for(var X=V(c);X!==null;){if(X.callback===null)j(c);else if(X.startTime<=z)j(c),X.sortIndex=X.expirationTime,m(u,X);else break;X=V(c)}}function S(z){if(f=!1,_(z),!s)if(V(u)!==null)s=!0,vt();else{var X=V(c);X!==null&&gt(S,X.startTime-z)}}var C=!1,O=-1,k=5,P=-1;function H(){return!(M.unstable_now()-P<k)}function K(){if(C){var z=M.unstable_now();P=z;var X=!0;try{t:{s=!1,f&&(f=!1,d(O),O=-1),n=!0;var G=r;try{e:{for(_(z),a=V(u);a!==null&&!(a.expirationTime>z&&H());){var x=a.callback;if(typeof x=="function"){a.callback=null,r=a.priorityLevel;var b=x(a.expirationTime<=z);if(z=M.unstable_now(),typeof b=="function"){a.callback=b,_(z),X=!0;break e}a===V(u)&&j(u),_(z)}else j(u);a=V(u)}if(a!==null)X=!0;else{var E=V(c);E!==null&&gt(S,E.startTime-z),X=!1}}break t}finally{a=null,r=G,n=!1}X=void 0}}finally{X?ct():C=!1}}}var ct;if(typeof p=="function")ct=function(){p(K)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,pt=mt.port2;mt.port1.onmessage=K,ct=function(){pt.postMessage(null)}}else ct=function(){o(K,0)};function vt(){C||(C=!0,ct())}function gt(z,X){O=o(function(){z(M.unstable_now())},X)}M.unstable_IdlePriority=5,M.unstable_ImmediatePriority=1,M.unstable_LowPriority=4,M.unstable_NormalPriority=3,M.unstable_Profiling=null,M.unstable_UserBlockingPriority=2,M.unstable_cancelCallback=function(z){z.callback=null},M.unstable_continueExecution=function(){s||n||(s=!0,vt())},M.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},M.unstable_getCurrentPriorityLevel=function(){return r},M.unstable_getFirstCallbackNode=function(){return V(u)},M.unstable_next=function(z){switch(r){case 1:case 2:case 3:var X=3;break;default:X=r}var G=r;r=X;try{return z()}finally{r=G}},M.unstable_pauseExecution=function(){},M.unstable_requestPaint=function(){},M.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=r;r=z;try{return X()}finally{r=G}},M.unstable_scheduleCallback=function(z,X,G){var x=M.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?x+G:x):G=x,z){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=G+b,z={id:h++,callback:X,priorityLevel:z,startTime:G,expirationTime:b,sortIndex:-1},G>x?(z.sortIndex=G,m(c,z),V(u)===null&&z===V(c)&&(f?(d(O),O=-1):f=!0,gt(S,G-x))):(z.sortIndex=b,m(u,z),s||n||(s=!0,vt())),z},M.unstable_shouldYield=H,M.unstable_wrapCallback=function(z){var X=r;return function(){var G=r;r=X;try{return z.apply(this,arguments)}finally{r=G}}}}(yo)),yo}var hh;function tv(){return hh||(hh=1,po.exports=$g()),po.exports}var _o={exports:{}},pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function ev(){if(dh)return pe;dh=1;var M=wo();function m(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function V(){}var j={d:{f:V,r:function(){throw Error(m(522))},D:V,C:V,L:V,m:V,X:V,S:V,M:V},p:0,findDOMNode:null},nt=Symbol.for("react.portal");function ht(u,c,h){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nt,key:a==null?null:""+a,children:u,containerInfo:c,implementation:h}}var St=M.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,pe.createPortal=function(u,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(m(299));return ht(u,c,null,h)},pe.flushSync=function(u){var c=St.T,h=j.p;try{if(St.T=null,j.p=2,u)return u()}finally{St.T=c,j.p=h,j.d.f()}},pe.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,j.d.C(u,c))},pe.prefetchDNS=function(u){typeof u=="string"&&j.d.D(u)},pe.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var h=c.as,a=v(h,c.crossOrigin),r=typeof c.integrity=="string"?c.integrity:void 0,n=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?j.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:n}):h==="script"&&j.d.X(u,{crossOrigin:a,integrity:r,fetchPriority:n,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},pe.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=v(c.as,c.crossOrigin);j.d.M(u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&j.d.M(u)},pe.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,a=v(h,c.crossOrigin);j.d.L(u,h,{crossOrigin:a,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},pe.preloadModule=function(u,c){if(typeof u=="string")if(c){var h=v(c.as,c.crossOrigin);j.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else j.d.m(u)},pe.requestFormReset=function(u){j.d.r(u)},pe.unstable_batchedUpdates=function(u,c){return u(c)},pe.useFormState=function(u,c,h){return St.H.useFormState(u,c,h)},pe.useFormStatus=function(){return St.H.useHostTransitionStatus()},pe.version="19.0.0",pe}var gh;function iv(){if(gh)return _o.exports;gh=1;function M(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M)}catch(m){console.error(m)}}return M(),_o.exports=ev(),_o.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh;function nv(){if(vh)return Ga;vh=1;var M=tv(),m=wo(),V=iv();function j(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function nt(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var ht=Symbol.for("react.element"),St=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),r=Symbol.for("react.consumer"),n=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),S=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function P(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case u:return"Fragment";case v:return"Portal";case h:return"Profiler";case c:return"StrictMode";case f:return"Suspense";case o:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n:return(t.displayName||"Context")+".Provider";case r:return(t._context.displayName||"Context")+".Consumer";case s:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d:return e=t.displayName||null,e!==null?e:P(t.type)||"Memo";case p:e=t._payload,t=t._init;try{return P(t(e))}catch{}}return null}var H=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=Object.assign,ct,mt;function pt(t){if(ct===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);ct=e&&e[1]||"",mt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ct+t+mt}var vt=!1;function gt(t,e){if(!t||vt)return"";vt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(e){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(it){var J=it}Reflect.construct(t,[],dt)}else{try{dt.call()}catch(it){J=it}t.call(dt.prototype)}}else{try{throw Error()}catch(it){J=it}(dt=t())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(it){if(it&&J&&typeof it.stack=="string")return[it.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var L=T.split(`
`),N=A.split(`
`);for(g=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;g<N.length&&!N[g].includes("DetermineComponentFrameRoot");)g++;if(l===L.length||g===N.length)for(l=L.length-1,g=N.length-1;1<=l&&0<=g&&L[l]!==N[g];)g--;for(;1<=l&&0<=g;l--,g--)if(L[l]!==N[g]){if(l!==1||g!==1)do if(l--,g--,0>g||L[l]!==N[g]){var at=`
`+L[l].replace(" at new "," at ");return t.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",t.displayName)),at}while(1<=l&&0<=g);break}}}finally{vt=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?pt(i):""}function z(t){switch(t.tag){case 26:case 27:case 5:return pt(t.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return t=gt(t.type,!1),t;case 11:return t=gt(t.type.render,!1),t;case 1:return t=gt(t.type,!0),t;default:return""}}function X(t){try{var e="";do e+=z(t),t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function G(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function x(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b(t){if(G(t)!==t)throw Error(j(188))}function E(t){var e=t.alternate;if(!e){if(e=G(t),e===null)throw Error(j(188));return e!==t?null:t}for(var i=t,l=e;;){var g=i.return;if(g===null)break;var y=g.alternate;if(y===null){if(l=g.return,l!==null){i=l;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===i)return b(g),t;if(y===l)return b(g),e;y=y.sibling}throw Error(j(188))}if(i.return!==l.return)i=g,l=y;else{for(var T=!1,A=g.child;A;){if(A===i){T=!0,i=g,l=y;break}if(A===l){T=!0,l=g,i=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===i){T=!0,i=y,l=g;break}if(A===l){T=!0,l=y,i=g;break}A=A.sibling}if(!T)throw Error(j(189))}}if(i.alternate!==l)throw Error(j(190))}if(i.tag!==3)throw Error(j(188));return i.stateNode.current===i?t:e}function R(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=R(t),e!==null)return e;t=t.sibling}return null}var U=Array.isArray,D=V.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w={pending:!1,data:null,method:null,action:null},B=[],F=-1;function Z(t){return{current:t}}function I(t){0>F||(t.current=B[F],B[F]=null,F--)}function et(t,e){F++,B[F]=t.current,t.current=e}var ft=Z(null),yt=Z(null),$=Z(null),W=Z(null);function rt(t,e){switch(et($,e),et(yt,t),et(ft,null),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)&&(e=e.namespaceURI)?zf(e):0;break;default:if(t=t===8?e.parentNode:e,e=t.tagName,t=t.namespaceURI)t=zf(t),e=Pf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ft),et(ft,e)}function st(){I(ft),I(yt),I($)}function tt(t){t.memoizedState!==null&&et(W,t);var e=ft.current,i=Pf(e,t.type);e!==i&&(et(yt,t),et(ft,i))}function ot(t){yt.current===t&&(I(ft),I(yt)),W.current===t&&(I(W),Ua._currentValue=w)}var _t=Object.prototype.hasOwnProperty,At=M.unstable_scheduleCallback,Ct=M.unstable_cancelCallback,lt=M.unstable_shouldYield,xt=M.unstable_requestPaint,wt=M.unstable_now,Bt=M.unstable_getCurrentPriorityLevel,Ft=M.unstable_ImmediatePriority,Ut=M.unstable_UserBlockingPriority,ee=M.unstable_NormalPriority,Kt=M.unstable_LowPriority,Qe=M.unstable_IdlePriority,Ni=M.log,Me=M.unstable_setDisableYieldValue,Fi=null,ge=null;function ls(t){if(ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Fi,t,void 0,(t.current.flags&128)===128)}catch{}}function Ke(t){if(typeof Ni=="function"&&Me(t),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Fi,t)}catch{}}var xe=Math.clz32?Math.clz32:zh,Lh=Math.log,Bh=Math.LN2;function zh(t){return t>>>=0,t===0?32:31-(Lh(t)/Bh|0)|0}var Ka=128,Za=4194304;function Gi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ja(t,e){var i=t.pendingLanes;if(i===0)return 0;var l=0,g=t.suspendedLanes,y=t.pingedLanes,T=t.warmLanes;t=t.finishedLanes!==0;var A=i&134217727;return A!==0?(i=A&~g,i!==0?l=Gi(i):(y&=A,y!==0?l=Gi(y):t||(T=A&~T,T!==0&&(l=Gi(T))))):(A=i&~g,A!==0?l=Gi(A):y!==0?l=Gi(y):t||(T=i&~T,T!==0&&(l=Gi(T)))),l===0?0:e!==0&&e!==l&&(e&g)===0&&(g=l&-l,T=e&-e,g>=T||g===32&&(T&4194176)!==0)?e:l}function In(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Ph(t,e){switch(t){case 1:case 2:case 4:case 8:return e+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eo(){var t=Ka;return Ka<<=1,(Ka&4194176)===0&&(Ka=128),t}function Ao(){var t=Za;return Za<<=1,(Za&62914560)===0&&(Za=4194304),t}function os(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Qn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uh(t,e,i,l,g,y){var T=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var A=t.entanglements,L=t.expirationTimes,N=t.hiddenUpdates;for(i=T&~i;0<i;){var at=31-xe(i),dt=1<<at;A[at]=0,L[at]=-1;var J=N[at];if(J!==null)for(N[at]=null,at=0;at<J.length;at++){var it=J[at];it!==null&&(it.lane&=-536870913)}i&=~dt}l!==0&&Do(t,l,0),y!==0&&g===0&&t.tag!==0&&(t.suspendedLanes|=y&~(T&~e))}function Do(t,e,i){t.pendingLanes|=e,t.suspendedLanes&=~e;var l=31-xe(e);t.entangledLanes|=e,t.entanglements[l]=t.entanglements[l]|1073741824|i&4194218}function Mo(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var l=31-xe(i),g=1<<l;g&e|t[l]&e&&(t[l]|=e),i&=~g}}function Ro(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function jo(){var t=D.p;return t!==0?t:(t=window.event,t===void 0?32:eh(t.type))}function Hh(t,e){var i=D.p;try{return D.p=t,e()}finally{D.p=i}}var Si=Math.random().toString(36).slice(2),ve="__reactFiber$"+Si,Se="__reactProps$"+Si,dn="__reactContainer$"+Si,us="__reactEvents$"+Si,Yh="__reactListeners$"+Si,Xh="__reactHandles$"+Si,ko="__reactResources$"+Si,Kn="__reactMarker$"+Si;function cs(t){delete t[ve],delete t[Se],delete t[us],delete t[Yh],delete t[Xh]}function Vi(t){var e=t[ve];if(e)return e;for(var i=t.parentNode;i;){if(e=i[dn]||i[ve]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=Yf(t);t!==null;){if(i=t[ve])return i;t=Yf(t)}return e}t=i,i=t.parentNode}return null}function gn(t){if(t=t[ve]||t[dn]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Zn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(j(33))}function vn(t){var e=t[ko];return e||(e=t[ko]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function le(t){t[Kn]=!0}var Lo=new Set,Bo={};function qi(t,e){mn(t,e),mn(t+"Capture",e)}function mn(t,e){for(Bo[t]=e,t=0;t<e.length;t++)Lo.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Po={};function Fh(t){return _t.call(Po,t)?!0:_t.call(zo,t)?!1:Nh.test(t)?Po[t]=!0:(zo[t]=!0,!1)}function $a(t,e,i){if(Fh(e))if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var l=e.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+i)}}function tr(t,e,i){if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+i)}}function ai(t,e,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(e,i,""+l)}}function Re(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gh(t){var e=Uo(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),l=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var g=i.get,y=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return g.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function er(t){t._valueTracker||(t._valueTracker=Gh(t))}function Ho(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==i?(e.setValue(t),!0):!1}function ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vh=/[\n"\\]/g;function je(t){return t.replace(Vh,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function fs(t,e,i,l,g,y,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),e!=null?T==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Re(e)):t.value!==""+Re(e)&&(t.value=""+Re(e)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),e!=null?hs(t,T,Re(e)):i!=null?hs(t,T,Re(i)):l!=null&&t.removeAttribute("value"),g==null&&y!=null&&(t.defaultChecked=!!y),g!=null&&(t.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Re(A):t.removeAttribute("name")}function Yo(t,e,i,l,g,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),e!=null||i!=null){if(!(y!=="submit"&&y!=="reset"||e!=null))return;i=i!=null?""+Re(i):"",e=e!=null?""+Re(e):i,A||e===t.value||(t.value=e),t.defaultValue=e}l=l??g,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function hs(t,e,i){e==="number"&&ir(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function pn(t,e,i,l){if(t=t.options,e){e={};for(var g=0;g<i.length;g++)e["$"+i[g]]=!0;for(i=0;i<t.length;i++)g=e.hasOwnProperty("$"+t[i].value),t[i].selected!==g&&(t[i].selected=g),g&&l&&(t[i].defaultSelected=!0)}else{for(i=""+Re(i),e=null,g=0;g<t.length;g++){if(t[g].value===i){t[g].selected=!0,l&&(t[g].defaultSelected=!0);return}e!==null||t[g].disabled||(e=t[g])}e!==null&&(e.selected=!0)}}function Xo(t,e,i){if(e!=null&&(e=""+Re(e),e!==t.value&&(t.value=e),i==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=i!=null?""+Re(i):""}function No(t,e,i,l){if(e==null){if(l!=null){if(i!=null)throw Error(j(92));if(U(l)){if(1<l.length)throw Error(j(93));l=l[0]}i=l}i==null&&(i=""),e=i}i=Re(e),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l)}function yn(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var qh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(t,e,i){var l=e.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":l?t.setProperty(e,i):typeof i!="number"||i===0||qh.has(e)?e==="float"?t.cssFloat=i:t[e]=(""+i).trim():t[e]=i+"px"}function Go(t,e,i){if(e!=null&&typeof e!="object")throw Error(j(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||e!=null&&e.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var g in e)l=e[g],e.hasOwnProperty(g)&&i[g]!==l&&Fo(t,g,l)}else for(var y in e)e.hasOwnProperty(y)&&Fo(t,y,e[y])}function ds(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nr(t){return Ih.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var gs=null;function vs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _n=null,Sn=null;function Vo(t){var e=gn(t);if(e&&(t=e.stateNode)){var i=t[Se]||null;t:switch(t=e.stateNode,e.type){case"input":if(fs(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+je(""+e)+'"][type="radio"]'),e=0;e<i.length;e++){var l=i[e];if(l!==t&&l.form===t.form){var g=l[Se]||null;if(!g)throw Error(j(90));fs(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(e=0;e<i.length;e++)l=i[e],l.form===t.form&&Ho(l)}break t;case"textarea":Xo(t,i.value,i.defaultValue);break t;case"select":e=i.value,e!=null&&pn(t,!!i.multiple,e,!1)}}}var ms=!1;function qo(t,e,i){if(ms)return t(e,i);ms=!0;try{var l=t(e);return l}finally{if(ms=!1,(_n!==null||Sn!==null)&&(Yr(),_n&&(e=_n,t=Sn,Sn=_n=null,Vo(e),t)))for(e=0;e<t.length;e++)Vo(t[e])}}function Jn(t,e){var i=t.stateNode;if(i===null)return null;var l=i[Se]||null;if(l===null)return null;i=l[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(j(231,e,typeof i));return i}var ps=!1;if(ni)try{var $n={};Object.defineProperty($n,"passive",{get:function(){ps=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{ps=!1}var bi=null,ys=null,ar=null;function Wo(){if(ar)return ar;var t,e=ys,i=e.length,l,g="value"in bi?bi.value:bi.textContent,y=g.length;for(t=0;t<i&&e[t]===g[t];t++);var T=i-t;for(l=1;l<=T&&e[i-l]===g[y-l];l++);return ar=g.slice(t,1<l?1-l:void 0)}function rr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function Io(){return!1}function be(t){function e(i,l,g,y,T){this._reactName=i,this._targetInst=g,this.type=l,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(i=t[A],this[A]=i?i(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?sr:Io,this.isPropagationStopped=Io,this}return K(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=be(Wi),ta=K({},Wi,{view:0,detail:0}),Qh=be(ta),_s,Ss,ea,or=K({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(_s=t.screenX-ea.screenX,Ss=t.screenY-ea.screenY):Ss=_s=0,ea=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:Ss}}),Qo=be(or),Kh=K({},or,{dataTransfer:0}),Zh=be(Kh),Jh=K({},ta,{relatedTarget:0}),bs=be(Jh),$h=K({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),td=be($h),ed=K({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),id=be(ed),nd=K({},Wi,{data:0}),Ko=be(nd),ad={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ld(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sd[t])?!!e[t]:!1}function Cs(){return ld}var od=K({},ta,{key:function(t){if(t.key){var e=ad[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(t){return t.type==="keypress"?rr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ud=be(od),cd=K({},or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=be(cd),fd=K({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),hd=be(fd),dd=K({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gd=be(dd),vd=K({},or,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),md=be(vd),pd=K({},Wi,{newState:0,oldState:0}),yd=be(pd),_d=[9,13,27,32],Ts=ni&&"CompositionEvent"in window,ia=null;ni&&"documentMode"in document&&(ia=document.documentMode);var Sd=ni&&"TextEvent"in window&&!ia,Jo=ni&&(!Ts||ia&&8<ia&&11>=ia),$o=" ",tu=!1;function eu(t,e){switch(t){case"keyup":return _d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bn=!1;function bd(t,e){switch(t){case"compositionend":return iu(e);case"keypress":return e.which!==32?null:(tu=!0,$o);case"textInput":return t=e.data,t===$o&&tu?null:t;default:return null}}function Cd(t,e){if(bn)return t==="compositionend"||!Ts&&eu(t,e)?(t=Wo(),ar=ys=bi=null,bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jo&&e.locale!=="ko"?null:e.data;default:return null}}var Td={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Td[t.type]:e==="textarea"}function au(t,e,i,l){_n?Sn?Sn.push(l):Sn=[l]:_n=l,e=Vr(e,"onChange"),0<e.length&&(i=new lr("onChange","change",null,i,l),t.push({event:i,listeners:e}))}var na=null,aa=null;function xd(t){Rf(t,0)}function ur(t){var e=Zn(t);if(Ho(e))return t}function ru(t,e){if(t==="change")return e}var su=!1;if(ni){var xs;if(ni){var Os="oninput"in document;if(!Os){var lu=document.createElement("div");lu.setAttribute("oninput","return;"),Os=typeof lu.oninput=="function"}xs=Os}else xs=!1;su=xs&&(!document.documentMode||9<document.documentMode)}function ou(){na&&(na.detachEvent("onpropertychange",uu),aa=na=null)}function uu(t){if(t.propertyName==="value"&&ur(aa)){var e=[];au(e,aa,t,vs(t)),qo(xd,e)}}function Od(t,e,i){t==="focusin"?(ou(),na=e,aa=i,na.attachEvent("onpropertychange",uu)):t==="focusout"&&ou()}function wd(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ur(aa)}function Ed(t,e){if(t==="click")return ur(e)}function Ad(t,e){if(t==="input"||t==="change")return ur(e)}function Dd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Oe=typeof Object.is=="function"?Object.is:Dd;function ra(t,e){if(Oe(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),l=Object.keys(e);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var g=i[l];if(!_t.call(e,g)||!Oe(t[g],e[g]))return!1}return!0}function cu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fu(t,e){var i=cu(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=e&&l>=e)return{node:i,offset:e-t};t=l}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=cu(i)}}function hu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function du(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ir(t.document);e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=ir(t.document)}return e}function ws(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Md(t,e){var i=du(e);e=t.focusedElem;var l=t.selectionRange;if(i!==e&&e&&e.ownerDocument&&hu(e.ownerDocument.documentElement,e)){if(l!==null&&ws(e)){if(t=l.start,i=l.end,i===void 0&&(i=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(i,e.value.length);else if(i=(t=e.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var g=e.textContent.length,y=Math.min(l.start,g);l=l.end===void 0?y:Math.min(l.end,g),!i.extend&&y>l&&(g=l,l=y,y=g),g=fu(e,y);var T=fu(e,l);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(t=t.createRange(),t.setStart(g.node,g.offset),i.removeAllRanges(),y>l?(i.addRange(t),i.extend(T.node,T.offset)):(t.setEnd(T.node,T.offset),i.addRange(t)))}}for(t=[],i=e;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)i=t[e],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Rd=ni&&"documentMode"in document&&11>=document.documentMode,Cn=null,Es=null,sa=null,As=!1;function gu(t,e,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;As||Cn==null||Cn!==ir(l)||(l=Cn,"selectionStart"in l&&ws(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sa&&ra(sa,l)||(sa=l,l=Vr(Es,"onSelect"),0<l.length&&(e=new lr("onSelect","select",null,e,i),t.push({event:e,listeners:l}),e.target=Cn)))}function Ii(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Tn={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},Ds={},vu={};ni&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);function Qi(t){if(Ds[t])return Ds[t];if(!Tn[t])return t;var e=Tn[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in vu)return Ds[t]=e[i];return t}var mu=Qi("animationend"),pu=Qi("animationiteration"),yu=Qi("animationstart"),jd=Qi("transitionrun"),kd=Qi("transitionstart"),Ld=Qi("transitioncancel"),_u=Qi("transitionend"),Su=new Map,bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ge(t,e){Su.set(t,e),qi(e,[t])}var ke=[],xn=0,Ms=0;function cr(){for(var t=xn,e=Ms=xn=0;e<t;){var i=ke[e];ke[e++]=null;var l=ke[e];ke[e++]=null;var g=ke[e];ke[e++]=null;var y=ke[e];if(ke[e++]=null,l!==null&&g!==null){var T=l.pending;T===null?g.next=g:(g.next=T.next,T.next=g),l.pending=g}y!==0&&Cu(i,g,y)}}function fr(t,e,i,l){ke[xn++]=t,ke[xn++]=e,ke[xn++]=i,ke[xn++]=l,Ms|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rs(t,e,i,l){return fr(t,e,i,l),hr(t)}function Ci(t,e){return fr(t,null,null,e),hr(t)}function Cu(t,e,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var g=!1,y=t.return;y!==null;)y.childLanes|=i,l=y.alternate,l!==null&&(l.childLanes|=i),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(g=!0)),t=y,y=y.return;g&&e!==null&&t.tag===3&&(y=t.stateNode,g=31-xe(i),y=y.hiddenUpdates,t=y[g],t===null?y[g]=[e]:t.push(e),e.lane=i|536870912)}function hr(t){if(50<Ra)throw Ra=0,Pl=null,Error(j(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var On={},Tu=new WeakMap;function Le(t,e){if(typeof t=="object"&&t!==null){var i=Tu.get(t);return i!==void 0?i:(e={value:t,source:e,stack:X(e)},Tu.set(t,e),e)}return{value:t,source:e,stack:X(e)}}var wn=[],En=0,dr=null,gr=0,Be=[],ze=0,Ki=null,ri=1,si="";function Zi(t,e){wn[En++]=gr,wn[En++]=dr,dr=t,gr=e}function xu(t,e,i){Be[ze++]=ri,Be[ze++]=si,Be[ze++]=Ki,Ki=t;var l=ri;t=si;var g=32-xe(l)-1;l&=~(1<<g),i+=1;var y=32-xe(e)+g;if(30<y){var T=g-g%5;y=(l&(1<<T)-1).toString(32),l>>=T,g-=T,ri=1<<32-xe(e)+g|i<<g|l,si=y+t}else ri=1<<y|i<<g|l,si=t}function js(t){t.return!==null&&(Zi(t,1),xu(t,1,0))}function ks(t){for(;t===dr;)dr=wn[--En],wn[En]=null,gr=wn[--En],wn[En]=null;for(;t===Ki;)Ki=Be[--ze],Be[ze]=null,si=Be[--ze],Be[ze]=null,ri=Be[--ze],Be[ze]=null}var ye=null,fe=null,Ht=!1,Ve=null,Ze=!1,Ls=Error(j(519));function Ji(t){var e=Error(j(418,""));throw ua(Le(e,t)),Ls}function Ou(t){var e=t.stateNode,i=t.type,l=t.memoizedProps;switch(e[ve]=t,e[Se]=l,i){case"dialog":zt("cancel",e),zt("close",e);break;case"iframe":case"object":case"embed":zt("load",e);break;case"video":case"audio":for(i=0;i<ka.length;i++)zt(ka[i],e);break;case"source":zt("error",e);break;case"img":case"image":case"link":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"input":zt("invalid",e),Yo(e,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),er(e);break;case"select":zt("invalid",e);break;case"textarea":zt("invalid",e),No(e,l.value,l.defaultValue,l.children),er(e)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||e.textContent===""+i||l.suppressHydrationWarning===!0||Bf(e.textContent,i)?(l.popover!=null&&(zt("beforetoggle",e),zt("toggle",e)),l.onScroll!=null&&zt("scroll",e),l.onScrollEnd!=null&&zt("scrollend",e),l.onClick!=null&&(e.onclick=qr),e=!0):e=!1,e||Ji(t)}function wu(t){for(ye=t.return;ye;)switch(ye.tag){case 3:case 27:Ze=!0;return;case 5:case 13:Ze=!1;return;default:ye=ye.return}}function la(t){if(t!==ye)return!1;if(!Ht)return wu(t),Ht=!0,!1;var e=!1,i;if((i=t.tag!==3&&t.tag!==27)&&((i=t.tag===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||to(t.type,t.memoizedProps)),i=!i),i&&(e=!0),e&&fe&&Ji(t),wu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(e===0){fe=We(t.nextSibling);break t}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++;t=t.nextSibling}fe=null}}else fe=ye?We(t.stateNode.nextSibling):null;return!0}function oa(){fe=ye=null,Ht=!1}function ua(t){Ve===null?Ve=[t]:Ve.push(t)}var ca=Error(j(460)),Eu=Error(j(474)),Bs={then:function(){}};function Au(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vr(){}function Du(t,e,i){switch(i=t[i],i===void 0?t.push(e):i!==e&&(e.then(vr,vr),e=i),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===ca?Error(j(483)):t;default:if(typeof e.status=="string")e.then(vr,vr);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(j(482));t=e,t.status="pending",t.then(function(l){if(e.status==="pending"){var g=e;g.status="fulfilled",g.value=l}},function(l){if(e.status==="pending"){var g=e;g.status="rejected",g.reason=l}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===ca?Error(j(483)):t}throw fa=e,ca}}var fa=null;function Mu(){if(fa===null)throw Error(j(459));var t=fa;return fa=null,t}var An=null,ha=0;function mr(t){var e=ha;return ha+=1,An===null&&(An=[]),Du(An,t,e)}function da(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function pr(t,e){throw e.$$typeof===ht?Error(j(525)):(t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Ru(t){var e=t._init;return e(t._payload)}function ju(t){function e(q,Y){if(t){var Q=q.deletions;Q===null?(q.deletions=[Y],q.flags|=16):Q.push(Y)}}function i(q,Y){if(!t)return null;for(;Y!==null;)e(q,Y),Y=Y.sibling;return null}function l(q){for(var Y=new Map;q!==null;)q.key!==null?Y.set(q.key,q):Y.set(q.index,q),q=q.sibling;return Y}function g(q,Y){return q=Li(q,Y),q.index=0,q.sibling=null,q}function y(q,Y,Q){return q.index=Q,t?(Q=q.alternate,Q!==null?(Q=Q.index,Q<Y?(q.flags|=33554434,Y):Q):(q.flags|=33554434,Y)):(q.flags|=1048576,Y)}function T(q){return t&&q.alternate===null&&(q.flags|=33554434),q}function A(q,Y,Q,ut){return Y===null||Y.tag!==6?(Y=Dl(Q,q.mode,ut),Y.return=q,Y):(Y=g(Y,Q),Y.return=q,Y)}function L(q,Y,Q,ut){var bt=Q.type;return bt===u?at(q,Y,Q.props.children,ut,Q.key):Y!==null&&(Y.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===p&&Ru(bt)===Y.type)?(Y=g(Y,Q.props),da(Y,Q),Y.return=q,Y):(Y=Br(Q.type,Q.key,Q.props,null,q.mode,ut),da(Y,Q),Y.return=q,Y)}function N(q,Y,Q,ut){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Q.containerInfo||Y.stateNode.implementation!==Q.implementation?(Y=Ml(Q,q.mode,ut),Y.return=q,Y):(Y=g(Y,Q.children||[]),Y.return=q,Y)}function at(q,Y,Q,ut,bt){return Y===null||Y.tag!==7?(Y=un(Q,q.mode,ut,bt),Y.return=q,Y):(Y=g(Y,Q),Y.return=q,Y)}function dt(q,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Dl(""+Y,q.mode,Q),Y.return=q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case St:return Q=Br(Y.type,Y.key,Y.props,null,q.mode,Q),da(Q,Y),Q.return=q,Q;case v:return Y=Ml(Y,q.mode,Q),Y.return=q,Y;case p:var ut=Y._init;return Y=ut(Y._payload),dt(q,Y,Q)}if(U(Y)||O(Y))return Y=un(Y,q.mode,Q,null),Y.return=q,Y;if(typeof Y.then=="function")return dt(q,mr(Y),Q);if(Y.$$typeof===n)return dt(q,jr(q,Y),Q);pr(q,Y)}return null}function J(q,Y,Q,ut){var bt=Y!==null?Y.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return bt!==null?null:A(q,Y,""+Q,ut);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case St:return Q.key===bt?L(q,Y,Q,ut):null;case v:return Q.key===bt?N(q,Y,Q,ut):null;case p:return bt=Q._init,Q=bt(Q._payload),J(q,Y,Q,ut)}if(U(Q)||O(Q))return bt!==null?null:at(q,Y,Q,ut,null);if(typeof Q.then=="function")return J(q,Y,mr(Q),ut);if(Q.$$typeof===n)return J(q,Y,jr(q,Q),ut);pr(q,Q)}return null}function it(q,Y,Q,ut,bt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return q=q.get(Q)||null,A(Y,q,""+ut,bt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case St:return q=q.get(ut.key===null?Q:ut.key)||null,L(Y,q,ut,bt);case v:return q=q.get(ut.key===null?Q:ut.key)||null,N(Y,q,ut,bt);case p:var kt=ut._init;return ut=kt(ut._payload),it(q,Y,Q,ut,bt)}if(U(ut)||O(ut))return q=q.get(Q)||null,at(Y,q,ut,bt,null);if(typeof ut.then=="function")return it(q,Y,Q,mr(ut),bt);if(ut.$$typeof===n)return it(q,Y,Q,jr(Y,ut),bt);pr(Y,ut)}return null}function Tt(q,Y,Q,ut){for(var bt=null,kt=null,Ot=Y,Et=Y=0,ce=null;Ot!==null&&Et<Q.length;Et++){Ot.index>Et?(ce=Ot,Ot=null):ce=Ot.sibling;var Yt=J(q,Ot,Q[Et],ut);if(Yt===null){Ot===null&&(Ot=ce);break}t&&Ot&&Yt.alternate===null&&e(q,Ot),Y=y(Yt,Y,Et),kt===null?bt=Yt:kt.sibling=Yt,kt=Yt,Ot=ce}if(Et===Q.length)return i(q,Ot),Ht&&Zi(q,Et),bt;if(Ot===null){for(;Et<Q.length;Et++)Ot=dt(q,Q[Et],ut),Ot!==null&&(Y=y(Ot,Y,Et),kt===null?bt=Ot:kt.sibling=Ot,kt=Ot);return Ht&&Zi(q,Et),bt}for(Ot=l(Ot);Et<Q.length;Et++)ce=it(Ot,q,Et,Q[Et],ut),ce!==null&&(t&&ce.alternate!==null&&Ot.delete(ce.key===null?Et:ce.key),Y=y(ce,Y,Et),kt===null?bt=ce:kt.sibling=ce,kt=ce);return t&&Ot.forEach(function(Xi){return e(q,Xi)}),Ht&&Zi(q,Et),bt}function Dt(q,Y,Q,ut){if(Q==null)throw Error(j(151));for(var bt=null,kt=null,Ot=Y,Et=Y=0,ce=null,Yt=Q.next();Ot!==null&&!Yt.done;Et++,Yt=Q.next()){Ot.index>Et?(ce=Ot,Ot=null):ce=Ot.sibling;var Xi=J(q,Ot,Yt.value,ut);if(Xi===null){Ot===null&&(Ot=ce);break}t&&Ot&&Xi.alternate===null&&e(q,Ot),Y=y(Xi,Y,Et),kt===null?bt=Xi:kt.sibling=Xi,kt=Xi,Ot=ce}if(Yt.done)return i(q,Ot),Ht&&Zi(q,Et),bt;if(Ot===null){for(;!Yt.done;Et++,Yt=Q.next())Yt=dt(q,Yt.value,ut),Yt!==null&&(Y=y(Yt,Y,Et),kt===null?bt=Yt:kt.sibling=Yt,kt=Yt);return Ht&&Zi(q,Et),bt}for(Ot=l(Ot);!Yt.done;Et++,Yt=Q.next())Yt=it(Ot,q,Et,Yt.value,ut),Yt!==null&&(t&&Yt.alternate!==null&&Ot.delete(Yt.key===null?Et:Yt.key),Y=y(Yt,Y,Et),kt===null?bt=Yt:kt.sibling=Yt,kt=Yt);return t&&Ot.forEach(function(Ig){return e(q,Ig)}),Ht&&Zi(q,Et),bt}function $t(q,Y,Q,ut){if(typeof Q=="object"&&Q!==null&&Q.type===u&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case St:t:{for(var bt=Q.key;Y!==null;){if(Y.key===bt){if(bt=Q.type,bt===u){if(Y.tag===7){i(q,Y.sibling),ut=g(Y,Q.props.children),ut.return=q,q=ut;break t}}else if(Y.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===p&&Ru(bt)===Y.type){i(q,Y.sibling),ut=g(Y,Q.props),da(ut,Q),ut.return=q,q=ut;break t}i(q,Y);break}else e(q,Y);Y=Y.sibling}Q.type===u?(ut=un(Q.props.children,q.mode,ut,Q.key),ut.return=q,q=ut):(ut=Br(Q.type,Q.key,Q.props,null,q.mode,ut),da(ut,Q),ut.return=q,q=ut)}return T(q);case v:t:{for(bt=Q.key;Y!==null;){if(Y.key===bt)if(Y.tag===4&&Y.stateNode.containerInfo===Q.containerInfo&&Y.stateNode.implementation===Q.implementation){i(q,Y.sibling),ut=g(Y,Q.children||[]),ut.return=q,q=ut;break t}else{i(q,Y);break}else e(q,Y);Y=Y.sibling}ut=Ml(Q,q.mode,ut),ut.return=q,q=ut}return T(q);case p:return bt=Q._init,Q=bt(Q._payload),$t(q,Y,Q,ut)}if(U(Q))return Tt(q,Y,Q,ut);if(O(Q)){if(bt=O(Q),typeof bt!="function")throw Error(j(150));return Q=bt.call(Q),Dt(q,Y,Q,ut)}if(typeof Q.then=="function")return $t(q,Y,mr(Q),ut);if(Q.$$typeof===n)return $t(q,Y,jr(q,Q),ut);pr(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,Y!==null&&Y.tag===6?(i(q,Y.sibling),ut=g(Y,Q),ut.return=q,q=ut):(i(q,Y),ut=Dl(Q,q.mode,ut),ut.return=q,q=ut),T(q)):i(q,Y)}return function(q,Y,Q,ut){try{ha=0;var bt=$t(q,Y,Q,ut);return An=null,bt}catch(Ot){if(Ot===ca)throw Ot;var kt=Ye(29,Ot,null,q.mode);return kt.lanes=ut,kt.return=q,kt}finally{}}}var $i=ju(!0),ku=ju(!1),Dn=Z(null),yr=Z(0);function Lu(t,e){t=pi,et(yr,t),et(Dn,e),pi=t|e.baseLanes}function zs(){et(yr,pi),et(Dn,Dn.current)}function Ps(){pi=yr.current,I(Dn),I(yr)}var Pe=Z(null),Je=null;function Ti(t){var e=t.alternate;et(re,re.current&1),et(Pe,t),Je===null&&(e===null||Dn.current!==null||e.memoizedState!==null)&&(Je=t)}function Bu(t){if(t.tag===22){if(et(re,re.current),et(Pe,t),Je===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Je=t)}}else xi()}function xi(){et(re,re.current),et(Pe,Pe.current)}function li(t){I(Pe),Je===t&&(Je=null),I(re)}var re=Z(0);function _r(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){e.aborted=!0,t.forEach(function(i){return i()})}},zd=M.unstable_scheduleCallback,Pd=M.unstable_NormalPriority,se={$$typeof:n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Us(){return{controller:new Bd,data:new Map,refCount:0}}function ga(t){t.refCount--,t.refCount===0&&zd(Pd,function(){t.controller.abort()})}var va=null,Hs=0,Mn=0,Rn=null;function Ud(t,e){if(va===null){var i=va=[];Hs=0,Mn=Vl(),Rn={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Hs++,e.then(zu,zu),e}function zu(){if(--Hs===0&&va!==null){Rn!==null&&(Rn.status="fulfilled");var t=va;va=null,Mn=0,Rn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Hd(t,e){var i=[],l={status:"pending",value:null,reason:null,then:function(g){i.push(g)}};return t.then(function(){l.status="fulfilled",l.value=e;for(var g=0;g<i.length;g++)(0,i[g])(e)},function(g){for(l.status="rejected",l.reason=g,g=0;g<i.length;g++)(0,i[g])(void 0)}),l}var Pu=H.S;H.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Ud(t,e),Pu!==null&&Pu(t,e)};var tn=Z(null);function Ys(){var t=tn.current;return t!==null?t:Vt.pooledCache}function Sr(t,e){e===null?et(tn,tn.current):et(tn,e.pool)}function Uu(){var t=Ys();return t===null?null:{parent:se._currentValue,pool:t}}var Oi=0,jt=null,Xt=null,ie=null,br=!1,jn=!1,en=!1,Cr=0,ma=0,kn=null,Yd=0;function te(){throw Error(j(321))}function Xs(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Oe(t[i],e[i]))return!1;return!0}function Ns(t,e,i,l,g,y){return Oi=y,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,H.H=t===null||t.memoizedState===null?nn:wi,en=!1,y=i(l,g),en=!1,jn&&(y=Yu(e,i,l,g)),Hu(t),y}function Hu(t){H.H=$e;var e=Xt!==null&&Xt.next!==null;if(Oi=0,ie=Xt=jt=null,br=!1,ma=0,kn=null,e)throw Error(j(300));t===null||oe||(t=t.dependencies,t!==null&&Rr(t)&&(oe=!0))}function Yu(t,e,i,l){jt=t;var g=0;do{if(jn&&(kn=null),ma=0,jn=!1,25<=g)throw Error(j(301));if(g+=1,ie=Xt=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=an,y=e(i,l)}while(jn);return y}function Xd(){var t=H.H,e=t.useState()[0];return e=typeof e.then=="function"?pa(e):e,t=t.useState()[0],(Xt!==null?Xt.memoizedState:null)!==t&&(jt.flags|=1024),e}function Fs(){var t=Cr!==0;return Cr=0,t}function Gs(t,e,i){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i}function Vs(t){if(br){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}br=!1}Oi=0,ie=Xt=jt=null,jn=!1,ma=Cr=0,kn=null}function Ce(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?jt.memoizedState=ie=t:ie=ie.next=t,ie}function ne(){if(Xt===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=ie===null?jt.memoizedState:ie.next;if(e!==null)ie=e,Xt=t;else{if(t===null)throw jt.alternate===null?Error(j(467)):Error(j(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ie===null?jt.memoizedState=ie=t:ie=ie.next=t}return ie}var Tr;Tr=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function pa(t){var e=ma;return ma+=1,kn===null&&(kn=[]),t=Du(kn,t,e),e=jt,(ie===null?e.memoizedState:ie.next)===null&&(e=e.alternate,H.H=e===null||e.memoizedState===null?nn:wi),t}function xr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pa(t);if(t.$$typeof===n)return me(t)}throw Error(j(438,String(t)))}function qs(t){var e=null,i=jt.updateQueue;if(i!==null&&(e=i.memoCache),e==null){var l=jt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(e={data:l.data.map(function(g){return g.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),i===null&&(i=Tr(),jt.updateQueue=i),i.memoCache=e,i=e.data[e.index],i===void 0)for(i=e.data[e.index]=Array(t),l=0;l<t;l++)i[l]=S;return e.index++,i}function oi(t,e){return typeof e=="function"?e(t):e}function Or(t){var e=ne();return Ws(e,Xt,t)}function Ws(t,e,i){var l=t.queue;if(l===null)throw Error(j(311));l.lastRenderedReducer=i;var g=t.baseQueue,y=l.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}e.baseQueue=g=y,l.pending=null}if(y=t.baseState,g===null)t.memoizedState=y;else{e=g.next;var A=T=null,L=null,N=e,at=!1;do{var dt=N.lane&-536870913;if(dt!==N.lane?(Pt&dt)===dt:(Oi&dt)===dt){var J=N.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),dt===Mn&&(at=!0);else if((Oi&J)===J){N=N.next,J===Mn&&(at=!0);continue}else dt={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},L===null?(A=L=dt,T=y):L=L.next=dt,jt.lanes|=J,Bi|=J;dt=N.action,en&&i(y,dt),y=N.hasEagerState?N.eagerState:i(y,dt)}else J={lane:dt,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},L===null?(A=L=J,T=y):L=L.next=J,jt.lanes|=dt,Bi|=dt;N=N.next}while(N!==null&&N!==e);if(L===null?T=y:L.next=A,!Oe(y,t.memoizedState)&&(oe=!0,at&&(i=Rn,i!==null)))throw i;t.memoizedState=y,t.baseState=T,t.baseQueue=L,l.lastRenderedState=y}return g===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Is(t){var e=ne(),i=e.queue;if(i===null)throw Error(j(311));i.lastRenderedReducer=t;var l=i.dispatch,g=i.pending,y=e.memoizedState;if(g!==null){i.pending=null;var T=g=g.next;do y=t(y,T.action),T=T.next;while(T!==g);Oe(y,e.memoizedState)||(oe=!0),e.memoizedState=y,e.baseQueue===null&&(e.baseState=y),i.lastRenderedState=y}return[y,l]}function Xu(t,e,i){var l=jt,g=ne(),y=Ht;if(y){if(i===void 0)throw Error(j(407));i=i()}else i=e();var T=!Oe((Xt||g).memoizedState,i);if(T&&(g.memoizedState=i,oe=!0),g=g.queue,Zs(Gu.bind(null,l,g,t),[t]),g.getSnapshot!==e||T||ie!==null&&ie.memoizedState.tag&1){if(l.flags|=2048,Ln(9,Fu.bind(null,l,g,i,e),{destroy:void 0},null),Vt===null)throw Error(j(349));y||(Oi&60)!==0||Nu(l,e,i)}return i}function Nu(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=jt.updateQueue,e===null?(e=Tr(),jt.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function Fu(t,e,i,l){e.value=i,e.getSnapshot=l,Vu(e)&&qu(t)}function Gu(t,e,i){return i(function(){Vu(e)&&qu(t)})}function Vu(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Oe(t,i)}catch{return!0}}function qu(t){var e=Ci(t,2);e!==null&&_e(e,t,2)}function Qs(t){var e=Ce();if(typeof t=="function"){var i=t;if(t=i(),en){Ke(!0);try{i()}finally{Ke(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:t},e}function Wu(t,e,i,l){return t.baseState=i,Ws(t,Xt,typeof l=="function"?l:oi)}function Nd(t,e,i,l,g){if(Ar(t))throw Error(j(485));if(t=e.action,t!==null){var y={payload:g,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};H.T!==null?i(!0):y.isTransition=!1,l(y),i=e.pending,i===null?(y.next=e.pending=y,Iu(e,y)):(y.next=i.next,e.pending=i.next=y)}}function Iu(t,e){var i=e.action,l=e.payload,g=t.state;if(e.isTransition){var y=H.T,T={};H.T=T;try{var A=i(g,l),L=H.S;L!==null&&L(T,A),Qu(t,e,A)}catch(N){Ks(t,e,N)}finally{H.T=y}}else try{y=i(g,l),Qu(t,e,y)}catch(N){Ks(t,e,N)}}function Qu(t,e,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Ku(t,e,l)},function(l){return Ks(t,e,l)}):Ku(t,e,i)}function Ku(t,e,i){e.status="fulfilled",e.value=i,Zu(e),t.state=i,e=t.pending,e!==null&&(i=e.next,i===e?t.pending=null:(i=i.next,e.next=i,Iu(t,i)))}function Ks(t,e,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do e.status="rejected",e.reason=i,Zu(e),e=e.next;while(e!==l)}t.action=null}function Zu(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Ju(t,e){return e}function $u(t,e){if(Ht){var i=Vt.formState;if(i!==null){t:{var l=jt;if(Ht){if(fe){e:{for(var g=fe,y=Ze;g.nodeType!==8;){if(!y){g=null;break e}if(g=We(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){fe=We(g.nextSibling),l=g.data==="F!";break t}}Ji(l)}l=!1}l&&(e=i[0])}}return i=Ce(),i.memoizedState=i.baseState=e,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:e},i.queue=l,i=pc.bind(null,jt,l),l.dispatch=i,l=Qs(!1),y=il.bind(null,jt,!1,l.queue),l=Ce(),g={state:e,dispatch:null,action:t,pending:null},l.queue=g,i=Nd.bind(null,jt,g,y,i),g.dispatch=i,l.memoizedState=t,[e,i,!1]}function tc(t){var e=ne();return ec(e,Xt,t)}function ec(t,e,i){e=Ws(t,e,Ju)[0],t=Or(oi)[0],e=typeof e=="object"&&e!==null&&typeof e.then=="function"?pa(e):e;var l=ne(),g=l.queue,y=g.dispatch;return i!==l.memoizedState&&(jt.flags|=2048,Ln(9,Fd.bind(null,g,i),{destroy:void 0},null)),[e,y,t]}function Fd(t,e){t.action=e}function ic(t){var e=ne(),i=Xt;if(i!==null)return ec(e,i,t);ne(),e=e.memoizedState,i=ne();var l=i.queue.dispatch;return i.memoizedState=t,[e,l,!1]}function Ln(t,e,i,l){return t={tag:t,create:e,inst:i,deps:l,next:null},e=jt.updateQueue,e===null&&(e=Tr(),jt.updateQueue=e),i=e.lastEffect,i===null?e.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,e.lastEffect=t),t}function nc(){return ne().memoizedState}function wr(t,e,i,l){var g=Ce();jt.flags|=t,g.memoizedState=Ln(1|e,i,{destroy:void 0},l===void 0?null:l)}function Er(t,e,i,l){var g=ne();l=l===void 0?null:l;var y=g.memoizedState.inst;Xt!==null&&l!==null&&Xs(l,Xt.memoizedState.deps)?g.memoizedState=Ln(e,i,y,l):(jt.flags|=t,g.memoizedState=Ln(1|e,i,y,l))}function ac(t,e){wr(8390656,8,t,e)}function Zs(t,e){Er(2048,8,t,e)}function rc(t,e){return Er(4,2,t,e)}function sc(t,e){return Er(4,4,t,e)}function lc(t,e){if(typeof e=="function"){t=t();var i=e(t);return function(){typeof i=="function"?i():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oc(t,e,i){i=i!=null?i.concat([t]):null,Er(4,4,lc.bind(null,e,t),i)}function Js(){}function uc(t,e){var i=ne();e=e===void 0?null:e;var l=i.memoizedState;return e!==null&&Xs(e,l[1])?l[0]:(i.memoizedState=[t,e],t)}function cc(t,e){var i=ne();e=e===void 0?null:e;var l=i.memoizedState;if(e!==null&&Xs(e,l[1]))return l[0];if(l=t(),en){Ke(!0);try{t()}finally{Ke(!1)}}return i.memoizedState=[l,e],l}function $s(t,e,i){return i===void 0||(Oi&1073741824)!==0?t.memoizedState=e:(t.memoizedState=i,t=df(),jt.lanes|=t,Bi|=t,i)}function fc(t,e,i,l){return Oe(i,e)?i:Dn.current!==null?(t=$s(t,i,l),Oe(t,e)||(oe=!0),t):(Oi&42)===0?(oe=!0,t.memoizedState=i):(t=df(),jt.lanes|=t,Bi|=t,e)}function hc(t,e,i,l,g){var y=D.p;D.p=y!==0&&8>y?y:8;var T=H.T,A={};H.T=A,il(t,!1,e,i);try{var L=g(),N=H.S;if(N!==null&&N(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var at=Hd(L,l);ya(t,e,at,De(t))}else ya(t,e,l,De(t))}catch(dt){ya(t,e,{then:function(){},status:"rejected",reason:dt},De())}finally{D.p=y,H.T=T}}function Gd(){}function tl(t,e,i,l){if(t.tag!==5)throw Error(j(476));var g=dc(t).queue;hc(t,g,e,w,i===null?Gd:function(){return gc(t),i(l)})}function dc(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:w},next:null};var i={};return e.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:i},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function gc(t){var e=dc(t).next.queue;ya(t,e,{},De())}function el(){return me(Ua)}function vc(){return ne().memoizedState}function mc(){return ne().memoizedState}function Vd(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var i=De();t=Di(i);var l=Mi(e,t,i);l!==null&&(_e(l,e,i),ba(l,e,i)),e={cache:Us()},t.payload=e;return}e=e.return}}function qd(t,e,i){var l=De();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Ar(t)?yc(e,i):(i=Rs(t,e,i,l),i!==null&&(_e(i,t,l),_c(i,e,l)))}function pc(t,e,i){var l=De();ya(t,e,i,l)}function ya(t,e,i,l){var g={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ar(t))yc(e,g);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=e.lastRenderedReducer,y!==null))try{var T=e.lastRenderedState,A=y(T,i);if(g.hasEagerState=!0,g.eagerState=A,Oe(A,T))return fr(t,e,g,0),Vt===null&&cr(),!1}catch{}finally{}if(i=Rs(t,e,g,l),i!==null)return _e(i,t,l),_c(i,e,l),!0}return!1}function il(t,e,i,l){if(l={lane:2,revertLane:Vl(),action:l,hasEagerState:!1,eagerState:null,next:null},Ar(t)){if(e)throw Error(j(479))}else e=Rs(t,i,l,2),e!==null&&_e(e,t,2)}function Ar(t){var e=t.alternate;return t===jt||e!==null&&e===jt}function yc(t,e){jn=br=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function _c(t,e,i){if((i&4194176)!==0){var l=e.lanes;l&=t.pendingLanes,i|=l,e.lanes=i,Mo(t,i)}}var $e={readContext:me,use:xr,useCallback:te,useContext:te,useEffect:te,useImperativeHandle:te,useLayoutEffect:te,useInsertionEffect:te,useMemo:te,useReducer:te,useRef:te,useState:te,useDebugValue:te,useDeferredValue:te,useTransition:te,useSyncExternalStore:te,useId:te};$e.useCacheRefresh=te,$e.useMemoCache=te,$e.useHostTransitionStatus=te,$e.useFormState=te,$e.useActionState=te,$e.useOptimistic=te;var nn={readContext:me,use:xr,useCallback:function(t,e){return Ce().memoizedState=[t,e===void 0?null:e],t},useContext:me,useEffect:ac,useImperativeHandle:function(t,e,i){i=i!=null?i.concat([t]):null,wr(4194308,4,lc.bind(null,e,t),i)},useLayoutEffect:function(t,e){return wr(4194308,4,t,e)},useInsertionEffect:function(t,e){wr(4,2,t,e)},useMemo:function(t,e){var i=Ce();e=e===void 0?null:e;var l=t();if(en){Ke(!0);try{t()}finally{Ke(!1)}}return i.memoizedState=[l,e],l},useReducer:function(t,e,i){var l=Ce();if(i!==void 0){var g=i(e);if(en){Ke(!0);try{i(e)}finally{Ke(!1)}}}else g=e;return l.memoizedState=l.baseState=g,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:g},l.queue=t,t=t.dispatch=qd.bind(null,jt,t),[l.memoizedState,t]},useRef:function(t){var e=Ce();return t={current:t},e.memoizedState=t},useState:function(t){t=Qs(t);var e=t.queue,i=pc.bind(null,jt,e);return e.dispatch=i,[t.memoizedState,i]},useDebugValue:Js,useDeferredValue:function(t,e){var i=Ce();return $s(i,t,e)},useTransition:function(){var t=Qs(!1);return t=hc.bind(null,jt,t.queue,!0,!1),Ce().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,i){var l=jt,g=Ce();if(Ht){if(i===void 0)throw Error(j(407));i=i()}else{if(i=e(),Vt===null)throw Error(j(349));(Pt&60)!==0||Nu(l,e,i)}g.memoizedState=i;var y={value:i,getSnapshot:e};return g.queue=y,ac(Gu.bind(null,l,y,t),[t]),l.flags|=2048,Ln(9,Fu.bind(null,l,y,i,e),{destroy:void 0},null),i},useId:function(){var t=Ce(),e=Vt.identifierPrefix;if(Ht){var i=si,l=ri;i=(l&~(1<<32-xe(l)-1)).toString(32)+i,e=":"+e+"R"+i,i=Cr++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=Yd++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},useCacheRefresh:function(){return Ce().memoizedState=Vd.bind(null,jt)}};nn.useMemoCache=qs,nn.useHostTransitionStatus=el,nn.useFormState=$u,nn.useActionState=$u,nn.useOptimistic=function(t){var e=Ce();e.memoizedState=e.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=i,e=il.bind(null,jt,!0,i),i.dispatch=e,[t,e]};var wi={readContext:me,use:xr,useCallback:uc,useContext:me,useEffect:Zs,useImperativeHandle:oc,useInsertionEffect:rc,useLayoutEffect:sc,useMemo:cc,useReducer:Or,useRef:nc,useState:function(){return Or(oi)},useDebugValue:Js,useDeferredValue:function(t,e){var i=ne();return fc(i,Xt.memoizedState,t,e)},useTransition:function(){var t=Or(oi)[0],e=ne().memoizedState;return[typeof t=="boolean"?t:pa(t),e]},useSyncExternalStore:Xu,useId:vc};wi.useCacheRefresh=mc,wi.useMemoCache=qs,wi.useHostTransitionStatus=el,wi.useFormState=tc,wi.useActionState=tc,wi.useOptimistic=function(t,e){var i=ne();return Wu(i,Xt,t,e)};var an={readContext:me,use:xr,useCallback:uc,useContext:me,useEffect:Zs,useImperativeHandle:oc,useInsertionEffect:rc,useLayoutEffect:sc,useMemo:cc,useReducer:Is,useRef:nc,useState:function(){return Is(oi)},useDebugValue:Js,useDeferredValue:function(t,e){var i=ne();return Xt===null?$s(i,t,e):fc(i,Xt.memoizedState,t,e)},useTransition:function(){var t=Is(oi)[0],e=ne().memoizedState;return[typeof t=="boolean"?t:pa(t),e]},useSyncExternalStore:Xu,useId:vc};an.useCacheRefresh=mc,an.useMemoCache=qs,an.useHostTransitionStatus=el,an.useFormState=ic,an.useActionState=ic,an.useOptimistic=function(t,e){var i=ne();return Xt!==null?Wu(i,Xt,t,e):(i.baseState=t,[t,i.queue.dispatch])};function nl(t,e,i,l){e=t.memoizedState,i=i(l,e),i=i==null?e:K({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var al={isMounted:function(t){return(t=t._reactInternals)?G(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var l=De(),g=Di(l);g.payload=e,i!=null&&(g.callback=i),e=Mi(t,g,l),e!==null&&(_e(e,t,l),ba(e,t,l))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var l=De(),g=Di(l);g.tag=1,g.payload=e,i!=null&&(g.callback=i),e=Mi(t,g,l),e!==null&&(_e(e,t,l),ba(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=De(),l=Di(i);l.tag=2,e!=null&&(l.callback=e),e=Mi(t,l,i),e!==null&&(_e(e,t,i),ba(e,t,i))}};function Sc(t,e,i,l,g,y,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,y,T):e.prototype&&e.prototype.isPureReactComponent?!ra(i,l)||!ra(g,y):!0}function bc(t,e,i,l){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,l),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,l),e.state!==t&&al.enqueueReplaceState(e,e.state,null)}function rn(t,e){var i=e;if("ref"in e){i={};for(var l in e)l!=="ref"&&(i[l]=e[l])}if(t=t.defaultProps){i===e&&(i=K({},i));for(var g in t)i[g]===void 0&&(i[g]=t[g])}return i}var Dr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cc(t){Dr(t)}function Tc(t){console.error(t)}function xc(t){Dr(t)}function Mr(t,e){try{var i=t.onUncaughtError;i(e.value,{componentStack:e.stack})}catch(l){setTimeout(function(){throw l})}}function Oc(t,e,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function rl(t,e,i){return i=Di(i),i.tag=3,i.payload={element:null},i.callback=function(){Mr(t,e)},i}function wc(t){return t=Di(t),t.tag=3,t}function Ec(t,e,i,l){var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var y=l.value;t.payload=function(){return g(y)},t.callback=function(){Oc(e,i,l)}}var T=i.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Oc(e,i,l),typeof g!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function Wd(t,e,i,l,g){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(e=i.alternate,e!==null&&Sa(e,i,g,!0),i=Pe.current,i!==null){switch(i.tag){case 13:return Je===null?Yl():i.alternate===null&&Jt===0&&(Jt=3),i.flags&=-257,i.flags|=65536,i.lanes=g,l===Bs?i.flags|=16384:(e=i.updateQueue,e===null?i.updateQueue=new Set([l]):e.add(l),Nl(t,l,g)),!1;case 22:return i.flags|=65536,l===Bs?i.flags|=16384:(e=i.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=e):(i=e.retryQueue,i===null?e.retryQueue=new Set([l]):i.add(l)),Nl(t,l,g)),!1}throw Error(j(435,i.tag))}return Nl(t,l,g),Yl(),!1}if(Ht)return e=Pe.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=g,l!==Ls&&(t=Error(j(422),{cause:l}),ua(Le(t,i)))):(l!==Ls&&(e=Error(j(423),{cause:l}),ua(Le(e,i))),t=t.current.alternate,t.flags|=65536,g&=-g,t.lanes|=g,l=Le(l,i),g=rl(t.stateNode,l,g),Sl(t,g),Jt!==4&&(Jt=2)),!1;var y=Error(j(520),{cause:l});if(y=Le(y,i),Da===null?Da=[y]:Da.push(y),Jt!==4&&(Jt=2),e===null)return!0;l=Le(l,i),i=e;do{switch(i.tag){case 3:return i.flags|=65536,t=g&-g,i.lanes|=t,t=rl(i.stateNode,l,t),Sl(i,t),!1;case 1:if(e=i.type,y=i.stateNode,(i.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zi===null||!zi.has(y))))return i.flags|=65536,g&=-g,i.lanes|=g,g=wc(g),Ec(g,t,i,l),Sl(i,g),!1}i=i.return}while(i!==null);return!1}var Ac=Error(j(461)),oe=!1;function he(t,e,i,l){e.child=t===null?ku(e,null,i,l):$i(e,t.child,i,l)}function Dc(t,e,i,l,g){i=i.render;var y=e.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return ln(e),l=Ns(t,e,i,T,y,g),A=Fs(),t!==null&&!oe?(Gs(t,e,g),ui(t,e,g)):(Ht&&A&&js(e),e.flags|=1,he(t,e,l,g),e.child)}function Mc(t,e,i,l,g){if(t===null){var y=i.type;return typeof y=="function"&&!Al(y)&&y.defaultProps===void 0&&i.compare===null?(e.tag=15,e.type=y,Rc(t,e,y,l,g)):(t=Br(i.type,null,l,e,e.mode,g),t.ref=e.ref,t.return=e,e.child=t)}if(y=t.child,!gl(t,g)){var T=y.memoizedProps;if(i=i.compare,i=i!==null?i:ra,i(T,l)&&t.ref===e.ref)return ui(t,e,g)}return e.flags|=1,t=Li(y,l),t.ref=e.ref,t.return=e,e.child=t}function Rc(t,e,i,l,g){if(t!==null){var y=t.memoizedProps;if(ra(y,l)&&t.ref===e.ref)if(oe=!1,e.pendingProps=l=y,gl(t,g))(t.flags&131072)!==0&&(oe=!0);else return e.lanes=t.lanes,ui(t,e,g)}return sl(t,e,i,l,g)}function jc(t,e,i){var l=e.pendingProps,g=l.children,y=(e.stateNode._pendingVisibility&2)!==0,T=t!==null?t.memoizedState:null;if(_a(t,e),l.mode==="hidden"||y){if((e.flags&128)!==0){if(l=T!==null?T.baseLanes|i:i,t!==null){for(g=e.child=t.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;e.childLanes=y&~l}else e.childLanes=0,e.child=null;return kc(t,e,l,i)}if((i&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Sr(e,T!==null?T.cachePool:null),T!==null?Lu(e,T):zs(),Bu(e);else return e.lanes=e.childLanes=536870912,kc(t,e,T!==null?T.baseLanes|i:i,i)}else T!==null?(Sr(e,T.cachePool),Lu(e,T),xi(),e.memoizedState=null):(t!==null&&Sr(e,null),zs(),xi());return he(t,e,g,i),e.child}function kc(t,e,i,l){var g=Ys();return g=g===null?null:{parent:se._currentValue,pool:g},e.memoizedState={baseLanes:i,cachePool:g},t!==null&&Sr(e,null),zs(),Bu(e),t!==null&&Sa(t,e,l,!0),null}function _a(t,e){var i=e.ref;if(i===null)t!==null&&t.ref!==null&&(e.flags|=2097664);else{if(typeof i!="function"&&typeof i!="object")throw Error(j(284));(t===null||t.ref!==i)&&(e.flags|=2097664)}}function sl(t,e,i,l,g){return ln(e),i=Ns(t,e,i,l,void 0,g),l=Fs(),t!==null&&!oe?(Gs(t,e,g),ui(t,e,g)):(Ht&&l&&js(e),e.flags|=1,he(t,e,i,g),e.child)}function Lc(t,e,i,l,g,y){return ln(e),e.updateQueue=null,i=Yu(e,l,i,g),Hu(t),l=Fs(),t!==null&&!oe?(Gs(t,e,y),ui(t,e,y)):(Ht&&l&&js(e),e.flags|=1,he(t,e,i,y),e.child)}function Bc(t,e,i,l,g){if(ln(e),e.stateNode===null){var y=On,T=i.contextType;typeof T=="object"&&T!==null&&(y=me(T)),y=new i(l,y),e.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=al,e.stateNode=y,y._reactInternals=e,y=e.stateNode,y.props=l,y.state=e.memoizedState,y.refs={},yl(e),T=i.contextType,y.context=typeof T=="object"&&T!==null?me(T):On,y.state=e.memoizedState,T=i.getDerivedStateFromProps,typeof T=="function"&&(nl(e,i,T,l),y.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&al.enqueueReplaceState(y,y.state,null),Ta(e,l,y,g),Ca(),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308),l=!0}else if(t===null){y=e.stateNode;var A=e.memoizedProps,L=rn(i,A);y.props=L;var N=y.context,at=i.contextType;T=On,typeof at=="object"&&at!==null&&(T=me(at));var dt=i.getDerivedStateFromProps;at=typeof dt=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=e.pendingProps!==A,at||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||N!==T)&&bc(e,y,l,T),Ai=!1;var J=e.memoizedState;y.state=J,Ta(e,l,y,g),Ca(),N=e.memoizedState,A||J!==N||Ai?(typeof dt=="function"&&(nl(e,i,dt,l),N=e.memoizedState),(L=Ai||Sc(e,i,L,l,J,N,T))?(at||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(e.flags|=4194308)):(typeof y.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=l,e.memoizedState=N),y.props=l,y.state=N,y.context=T,l=L):(typeof y.componentDidMount=="function"&&(e.flags|=4194308),l=!1)}else{y=e.stateNode,_l(t,e),T=e.memoizedProps,at=rn(i,T),y.props=at,dt=e.pendingProps,J=y.context,N=i.contextType,L=On,typeof N=="object"&&N!==null&&(L=me(N)),A=i.getDerivedStateFromProps,(N=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==dt||J!==L)&&bc(e,y,l,L),Ai=!1,J=e.memoizedState,y.state=J,Ta(e,l,y,g),Ca();var it=e.memoizedState;T!==dt||J!==it||Ai||t!==null&&t.dependencies!==null&&Rr(t.dependencies)?(typeof A=="function"&&(nl(e,i,A,l),it=e.memoizedState),(at=Ai||Sc(e,i,at,l,J,it,L)||t!==null&&t.dependencies!==null&&Rr(t.dependencies))?(N||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,it,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,it,L)),typeof y.componentDidUpdate=="function"&&(e.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(e.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(e.flags|=1024),e.memoizedProps=l,e.memoizedState=it),y.props=l,y.state=it,y.context=L,l=at):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(e.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(e.flags|=1024),l=!1)}return y=l,_a(t,e),l=(e.flags&128)!==0,y||l?(y=e.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:y.render(),e.flags|=1,t!==null&&l?(e.child=$i(e,t.child,null,g),e.child=$i(e,null,i,g)):he(t,e,i,g),e.memoizedState=y.state,t=e.child):t=ui(t,e,g),t}function zc(t,e,i,l){return oa(),e.flags|=256,he(t,e,i,l),e.child}var ll={dehydrated:null,treeContext:null,retryLane:0};function ol(t){return{baseLanes:t,cachePool:Uu()}}function ul(t,e,i){return t=t!==null?t.childLanes&~i:0,e&&(t|=Xe),t}function Pc(t,e,i){var l=e.pendingProps,g=!1,y=(e.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(re.current&2)!==0),T&&(g=!0,e.flags&=-129),T=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ht){if(g?Ti(e):xi(),Ht){var A=fe,L;if(L=A){t:{for(L=A,A=Ze;L.nodeType!==8;){if(!A){A=null;break t}if(L=We(L.nextSibling),L===null){A=null;break t}}A=L}A!==null?(e.memoizedState={dehydrated:A,treeContext:Ki!==null?{id:ri,overflow:si}:null,retryLane:536870912},L=Ye(18,null,null,0),L.stateNode=A,L.return=e,e.child=L,ye=e,fe=null,L=!0):L=!1}L||Ji(e)}if(A=e.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?e.lanes=16:e.lanes=536870912,null;li(e)}return A=l.children,l=l.fallback,g?(xi(),g=e.mode,A=fl({mode:"hidden",children:A},g),l=un(l,g,i,null),A.return=e,l.return=e,A.sibling=l,e.child=A,g=e.child,g.memoizedState=ol(i),g.childLanes=ul(t,T,i),e.memoizedState=ll,l):(Ti(e),cl(e,A))}if(L=t.memoizedState,L!==null&&(A=L.dehydrated,A!==null)){if(y)e.flags&256?(Ti(e),e.flags&=-257,e=hl(t,e,i)):e.memoizedState!==null?(xi(),e.child=t.child,e.flags|=128,e=null):(xi(),g=l.fallback,A=e.mode,l=fl({mode:"visible",children:l.children},A),g=un(g,A,i,null),g.flags|=2,l.return=e,g.return=e,l.sibling=g,e.child=l,$i(e,t.child,null,i),l=e.child,l.memoizedState=ol(i),l.childLanes=ul(t,T,i),e.memoizedState=ll,e=g);else if(Ti(e),A.data==="$!"){if(T=A.nextSibling&&A.nextSibling.dataset,T)var N=T.dgst;T=N,l=Error(j(419)),l.stack="",l.digest=T,ua({value:l,source:null,stack:null}),e=hl(t,e,i)}else if(oe||Sa(t,e,i,!1),T=(i&t.childLanes)!==0,oe||T){if(T=Vt,T!==null){if(l=i&-i,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(T.suspendedLanes|i))!==0?0:l,l!==0&&l!==L.retryLane)throw L.retryLane=l,Ci(t,l),_e(T,t,l),Ac}A.data==="$?"||Yl(),e=hl(t,e,i)}else A.data==="$?"?(e.flags|=128,e.child=t.child,e=og.bind(null,t),A._reactRetry=e,e=null):(t=L.treeContext,fe=We(A.nextSibling),ye=e,Ht=!0,Ve=null,Ze=!1,t!==null&&(Be[ze++]=ri,Be[ze++]=si,Be[ze++]=Ki,ri=t.id,si=t.overflow,Ki=e),e=cl(e,l.children),e.flags|=4096);return e}return g?(xi(),g=l.fallback,A=e.mode,L=t.child,N=L.sibling,l=Li(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&31457280,N!==null?g=Li(N,g):(g=un(g,A,i,null),g.flags|=2),g.return=e,l.return=e,l.sibling=g,e.child=l,l=g,g=e.child,A=t.child.memoizedState,A===null?A=ol(i):(L=A.cachePool,L!==null?(N=se._currentValue,L=L.parent!==N?{parent:N,pool:N}:L):L=Uu(),A={baseLanes:A.baseLanes|i,cachePool:L}),g.memoizedState=A,g.childLanes=ul(t,T,i),e.memoizedState=ll,l):(Ti(e),i=t.child,t=i.sibling,i=Li(i,{mode:"visible",children:l.children}),i.return=e,i.sibling=null,t!==null&&(T=e.deletions,T===null?(e.deletions=[t],e.flags|=16):T.push(t)),e.child=i,e.memoizedState=null,i)}function cl(t,e){return e=fl({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function fl(t,e){return cf(t,e,0,null)}function hl(t,e,i){return $i(e,t.child,null,i),t=cl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Uc(t,e,i){t.lanes|=e;var l=t.alternate;l!==null&&(l.lanes|=e),ml(t.return,e,i)}function dl(t,e,i,l,g){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:g}:(y.isBackwards=e,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=i,y.tailMode=g)}function Hc(t,e,i){var l=e.pendingProps,g=l.revealOrder,y=l.tail;if(he(t,e,l.children,i),l=re.current,(l&2)!==0)l=l&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uc(t,i,e);else if(t.tag===19)Uc(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(et(re,l),g){case"forwards":for(i=e.child,g=null;i!==null;)t=i.alternate,t!==null&&_r(t)===null&&(g=i),i=i.sibling;i=g,i===null?(g=e.child,e.child=null):(g=i.sibling,i.sibling=null),dl(e,!1,g,i,y);break;case"backwards":for(i=null,g=e.child,e.child=null;g!==null;){if(t=g.alternate,t!==null&&_r(t)===null){e.child=g;break}t=g.sibling,g.sibling=i,i=g,g=t}dl(e,!0,i,null,y);break;case"together":dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ui(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Bi|=e.lanes,(i&e.childLanes)===0)if(t!==null){if(Sa(t,e,i,!1),(i&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,i=Li(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Li(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function gl(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Rr(t)))}function Id(t,e,i){switch(e.tag){case 3:rt(e,e.stateNode.containerInfo),Ei(e,se,t.memoizedState.cache),oa();break;case 27:case 5:tt(e);break;case 4:rt(e,e.stateNode.containerInfo);break;case 10:Ei(e,e.type,e.memoizedProps.value);break;case 13:var l=e.memoizedState;if(l!==null)return l.dehydrated!==null?(Ti(e),e.flags|=128,null):(i&e.child.childLanes)!==0?Pc(t,e,i):(Ti(e),t=ui(t,e,i),t!==null?t.sibling:null);Ti(e);break;case 19:var g=(t.flags&128)!==0;if(l=(i&e.childLanes)!==0,l||(Sa(t,e,i,!1),l=(i&e.childLanes)!==0),g){if(l)return Hc(t,e,i);e.flags|=128}if(g=e.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),et(re,re.current),l)break;return null;case 22:case 23:return e.lanes=0,jc(t,e,i);case 24:Ei(e,se,t.memoizedState.cache)}return ui(t,e,i)}function Yc(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps)oe=!0;else{if(!gl(t,i)&&(e.flags&128)===0)return oe=!1,Id(t,e,i);oe=(t.flags&131072)!==0}else oe=!1,Ht&&(e.flags&1048576)!==0&&xu(e,gr,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var l=e.elementType,g=l._init;if(l=g(l._payload),e.type=l,typeof l=="function")Al(l)?(t=rn(l,t),e.tag=1,e=Bc(null,e,l,t,i)):(e.tag=0,e=sl(null,e,l,t,i));else{if(l!=null){if(g=l.$$typeof,g===s){e.tag=11,e=Dc(null,e,l,t,i);break t}else if(g===d){e.tag=14,e=Mc(null,e,l,t,i);break t}}throw e=P(l)||l,Error(j(306,e,""))}}return e;case 0:return sl(t,e,e.type,e.pendingProps,i);case 1:return l=e.type,g=rn(l,e.pendingProps),Bc(t,e,l,g,i);case 3:t:{if(rt(e,e.stateNode.containerInfo),t===null)throw Error(j(387));var y=e.pendingProps;g=e.memoizedState,l=g.element,_l(t,e),Ta(e,y,null,i);var T=e.memoizedState;if(y=T.cache,Ei(e,se,y),y!==g.cache&&pl(e,[se],i,!0),Ca(),y=T.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:T.cache},e.updateQueue.baseState=g,e.memoizedState=g,e.flags&256){e=zc(t,e,y,i);break t}else if(y!==l){l=Le(Error(j(424)),e),ua(l),e=zc(t,e,y,i);break t}else for(fe=We(e.stateNode.containerInfo.firstChild),ye=e,Ht=!0,Ve=null,Ze=!0,i=ku(e,null,y,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(oa(),y===l){e=ui(t,e,i);break t}he(t,e,y,i)}e=e.child}return e;case 26:return _a(t,e),t===null?(i=Gf(e.type,null,e.pendingProps,null))?e.memoizedState=i:Ht||(i=e.type,t=e.pendingProps,l=Wr($.current).createElement(i),l[ve]=e,l[Se]=t,de(l,i,t),le(l),e.stateNode=l):e.memoizedState=Gf(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return tt(e),t===null&&Ht&&(l=e.stateNode=Xf(e.type,e.pendingProps,$.current),ye=e,Ze=!0,fe=We(l.firstChild)),l=e.pendingProps.children,t!==null||Ht?he(t,e,l,i):e.child=$i(e,null,l,i),_a(t,e),e.child;case 5:return t===null&&Ht&&((g=l=fe)&&(l=xg(l,e.type,e.pendingProps,Ze),l!==null?(e.stateNode=l,ye=e,fe=We(l.firstChild),Ze=!1,g=!0):g=!1),g||Ji(e)),tt(e),g=e.type,y=e.pendingProps,T=t!==null?t.memoizedProps:null,l=y.children,to(g,y)?l=null:T!==null&&to(g,T)&&(e.flags|=32),e.memoizedState!==null&&(g=Ns(t,e,Xd,null,null,i),Ua._currentValue=g),_a(t,e),he(t,e,l,i),e.child;case 6:return t===null&&Ht&&((t=i=fe)&&(i=Og(i,e.pendingProps,Ze),i!==null?(e.stateNode=i,ye=e,fe=null,t=!0):t=!1),t||Ji(e)),null;case 13:return Pc(t,e,i);case 4:return rt(e,e.stateNode.containerInfo),l=e.pendingProps,t===null?e.child=$i(e,null,l,i):he(t,e,l,i),e.child;case 11:return Dc(t,e,e.type,e.pendingProps,i);case 7:return he(t,e,e.pendingProps,i),e.child;case 8:return he(t,e,e.pendingProps.children,i),e.child;case 12:return he(t,e,e.pendingProps.children,i),e.child;case 10:return l=e.pendingProps,Ei(e,e.type,l.value),he(t,e,l.children,i),e.child;case 9:return g=e.type._context,l=e.pendingProps.children,ln(e),g=me(g),l=l(g),e.flags|=1,he(t,e,l,i),e.child;case 14:return Mc(t,e,e.type,e.pendingProps,i);case 15:return Rc(t,e,e.type,e.pendingProps,i);case 19:return Hc(t,e,i);case 22:return jc(t,e,i);case 24:return ln(e),l=me(se),t===null?(g=Ys(),g===null&&(g=Vt,y=Us(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=i),g=y),e.memoizedState={parent:l,cache:g},yl(e),Ei(e,se,g)):((t.lanes&i)!==0&&(_l(t,e),Ta(e,null,null,i),Ca()),g=t.memoizedState,y=e.memoizedState,g.parent!==l?(g={parent:l,cache:l},e.memoizedState=g,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=g),Ei(e,se,l)):(l=y.cache,Ei(e,se,l),l!==g.cache&&pl(e,[se],i,!0))),he(t,e,e.pendingProps.children,i),e.child;case 29:throw e.pendingProps}throw Error(j(156,e.tag))}var vl=Z(null),sn=null,ci=null;function Ei(t,e,i){et(vl,e._currentValue),e._currentValue=i}function fi(t){t._currentValue=vl.current,I(vl)}function ml(t,e,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,l!==null&&(l.childLanes|=e)):l!==null&&(l.childLanes&e)!==e&&(l.childLanes|=e),t===i)break;t=t.return}}function pl(t,e,i,l){var g=t.child;for(g!==null&&(g.return=t);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;t:for(;y!==null;){var A=y;y=g;for(var L=0;L<e.length;L++)if(A.context===e[L]){y.lanes|=i,A=y.alternate,A!==null&&(A.lanes|=i),ml(y.return,i,t),l||(T=null);break t}y=A.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(j(341));T.lanes|=i,y=T.alternate,y!==null&&(y.lanes|=i),ml(T,i,t),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===t){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Sa(t,e,i,l){t=null;for(var g=e,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(j(387));if(T=T.memoizedProps,T!==null){var A=g.type;Oe(g.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(g===W.current){if(T=g.alternate,T===null)throw Error(j(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(t!==null?t.push(Ua):t=[Ua])}g=g.return}t!==null&&pl(e,t,i,l),e.flags|=262144}function Rr(t){for(t=t.firstContext;t!==null;){if(!Oe(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ln(t){sn=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function me(t){return Xc(sn,t)}function jr(t,e){return sn===null&&ln(t),Xc(t,e)}function Xc(t,e){var i=e._currentValue;if(e={context:e,memoizedValue:i,next:null},ci===null){if(t===null)throw Error(j(308));ci=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ci=ci.next=e;return i}var Ai=!1;function yl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _l(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Di(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qt&2)!==0){var g=l.pending;return g===null?e.next=e:(e.next=g.next,g.next=e),l.pending=e,e=hr(t),Cu(t,null,i),e}return fr(t,l,e,i),hr(t)}function ba(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194176)!==0)){var l=e.lanes;l&=t.pendingLanes,i|=l,e.lanes=i,Mo(t,i)}}function Sl(t,e){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var g=null,y=null;if(i=i.firstBaseUpdate,i!==null){do{var T={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,i=i.next}while(i!==null);y===null?g=y=e:y=y.next=e}else g=y=e;i={baseState:l.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}var bl=!1;function Ca(){if(bl){var t=Rn;if(t!==null)throw t}}function Ta(t,e,i,l){bl=!1;var g=t.updateQueue;Ai=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var L=A,N=L.next;L.next=null,T===null?y=N:T.next=N,T=L;var at=t.alternate;at!==null&&(at=at.updateQueue,A=at.lastBaseUpdate,A!==T&&(A===null?at.firstBaseUpdate=N:A.next=N,at.lastBaseUpdate=L))}if(y!==null){var dt=g.baseState;T=0,at=N=L=null,A=y;do{var J=A.lane&-536870913,it=J!==A.lane;if(it?(Pt&J)===J:(l&J)===J){J!==0&&J===Mn&&(bl=!0),at!==null&&(at=at.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Tt=t,Dt=A;J=e;var $t=i;switch(Dt.tag){case 1:if(Tt=Dt.payload,typeof Tt=="function"){dt=Tt.call($t,dt,J);break t}dt=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Dt.payload,J=typeof Tt=="function"?Tt.call($t,dt,J):Tt,J==null)break t;dt=K({},dt,J);break t;case 2:Ai=!0}}J=A.callback,J!==null&&(t.flags|=64,it&&(t.flags|=8192),it=g.callbacks,it===null?g.callbacks=[J]:it.push(J))}else it={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},at===null?(N=at=it,L=dt):at=at.next=it,T|=J;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;it=A,A=it.next,it.next=null,g.lastBaseUpdate=it,g.shared.pending=null}}while(!0);at===null&&(L=dt),g.baseState=L,g.firstBaseUpdate=N,g.lastBaseUpdate=at,y===null&&(g.shared.lanes=0),Bi|=T,t.lanes=T,t.memoizedState=dt}}function Nc(t,e){if(typeof t!="function")throw Error(j(191,t));t.call(e)}function Fc(t,e){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Nc(i[t],e)}function xa(t,e){try{var i=e.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var g=l.next;i=g;do{if((i.tag&t)===t){l=void 0;var y=i.create,T=i.inst;l=y(),T.destroy=l}i=i.next}while(i!==g)}}catch(A){Gt(e,e.return,A)}}function Ri(t,e,i){try{var l=e.updateQueue,g=l!==null?l.lastEffect:null;if(g!==null){var y=g.next;l=y;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,g=e;var L=i;try{A()}catch(N){Gt(g,L,N)}}}l=l.next}while(l!==y)}}catch(N){Gt(e,e.return,N)}}function Gc(t){var e=t.updateQueue;if(e!==null){var i=t.stateNode;try{Fc(e,i)}catch(l){Gt(t,t.return,l)}}}function Vc(t,e,i){i.props=rn(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){Gt(t,e,l)}}function on(t,e){try{var i=t.ref;if(i!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var g=l;break;default:g=l}typeof i=="function"?t.refCleanup=i(g):i.current=g}}catch(y){Gt(t,e,y)}}function we(t,e){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(g){Gt(t,e,g)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(g){Gt(t,e,g)}else i.current=null}function qc(t){var e=t.type,i=t.memoizedProps,l=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break t;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(g){Gt(t,t.return,g)}}function Wc(t,e,i){try{var l=t.stateNode;_g(l,t.type,i,e),l[Se]=e}catch(g){Gt(t,t.return,g)}}function Ic(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function Cl(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Ic(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tl(t,e,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=qr));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Tl(t,e,i),t=t.sibling;t!==null;)Tl(t,e,i),t=t.sibling}function kr(t,e,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(kr(t,e,i),t=t.sibling;t!==null;)kr(t,e,i),t=t.sibling}var hi=!1,Zt=!1,xl=!1,Qc=typeof WeakSet=="function"?WeakSet:Set,ue=null,Kc=!1;function Qd(t,e){if(t=t.containerInfo,Jl=$r,t=du(t),ws(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var g=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{i.nodeType,y.nodeType}catch{i=null;break t}var T=0,A=-1,L=-1,N=0,at=0,dt=t,J=null;e:for(;;){for(var it;dt!==i||g!==0&&dt.nodeType!==3||(A=T+g),dt!==y||l!==0&&dt.nodeType!==3||(L=T+l),dt.nodeType===3&&(T+=dt.nodeValue.length),(it=dt.firstChild)!==null;)J=dt,dt=it;for(;;){if(dt===t)break e;if(J===i&&++N===g&&(A=T),J===y&&++at===l&&(L=T),(it=dt.nextSibling)!==null)break;dt=J,J=dt.parentNode}dt=it}i=A===-1||L===-1?null:{start:A,end:L}}else i=null}i=i||{start:0,end:0}}else i=null;for($l={focusedElem:t,selectionRange:i},$r=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){switch(e=ue,y=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,i=e,g=y.memoizedProps,y=y.memoizedState,l=i.stateNode;try{var Tt=rn(i.type,g,i.elementType===i.type);t=l.getSnapshotBeforeUpdate(Tt,y),l.__reactInternalSnapshotBeforeUpdate=t}catch(Dt){Gt(i,i.return,Dt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,i=t.nodeType,i===9)no(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":no(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(j(163))}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return Tt=Kc,Kc=!1,Tt}function Zc(t,e,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:gi(t,i),l&4&&xa(5,i);break;case 1:if(gi(t,i),l&4)if(t=i.stateNode,e===null)try{t.componentDidMount()}catch(A){Gt(i,i.return,A)}else{var g=rn(i.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(g,e,t.__reactInternalSnapshotBeforeUpdate)}catch(A){Gt(i,i.return,A)}}l&64&&Gc(i),l&512&&on(i,i.return);break;case 3:if(gi(t,i),l&64&&(l=i.updateQueue,l!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Fc(l,t)}catch(A){Gt(i,i.return,A)}}break;case 26:gi(t,i),l&512&&on(i,i.return);break;case 27:case 5:gi(t,i),e===null&&l&4&&qc(i),l&512&&on(i,i.return);break;case 12:gi(t,i);break;case 13:gi(t,i),l&4&&tf(t,i);break;case 22:if(g=i.memoizedState!==null||hi,!g){e=e!==null&&e.memoizedState!==null||Zt;var y=hi,T=Zt;hi=g,(Zt=e)&&!T?ji(t,i,(i.subtreeFlags&8772)!==0):gi(t,i),hi=y,Zt=T}l&512&&(i.memoizedProps.mode==="manual"?on(i,i.return):we(i,i.return));break;default:gi(t,i)}}function Jc(t){var e=t.alternate;e!==null&&(t.alternate=null,Jc(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&cs(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ae=null,Ee=!1;function di(t,e,i){for(i=i.child;i!==null;)$c(t,e,i),i=i.sibling}function $c(t,e,i){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Fi,i)}catch{}switch(i.tag){case 26:Zt||we(i,e),di(t,e,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Zt||we(i,e);var l=ae,g=Ee;for(ae=i.stateNode,di(t,e,i),i=i.stateNode,e=i.attributes;e.length;)i.removeAttributeNode(e[0]);cs(i),ae=l,Ee=g;break;case 5:Zt||we(i,e);case 6:g=ae;var y=Ee;if(ae=null,di(t,e,i),ae=g,Ee=y,ae!==null)if(Ee)try{t=ae,l=i.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(T){Gt(i,e,T)}else try{ae.removeChild(i.stateNode)}catch(T){Gt(i,e,T)}break;case 18:ae!==null&&(Ee?(e=ae,i=i.stateNode,e.nodeType===8?io(e.parentNode,i):e.nodeType===1&&io(e,i),Na(e)):io(ae,i.stateNode));break;case 4:l=ae,g=Ee,ae=i.stateNode.containerInfo,Ee=!0,di(t,e,i),ae=l,Ee=g;break;case 0:case 11:case 14:case 15:Zt||Ri(2,i,e),Zt||Ri(4,i,e),di(t,e,i);break;case 1:Zt||(we(i,e),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Vc(i,e,l)),di(t,e,i);break;case 21:di(t,e,i);break;case 22:Zt||we(i,e),Zt=(l=Zt)||i.memoizedState!==null,di(t,e,i),Zt=l;break;default:di(t,e,i)}}function tf(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Na(t)}catch(i){Gt(e,e.return,i)}}function Kd(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Qc),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Qc),e;default:throw Error(j(435,t.tag))}}function Ol(t,e){var i=Kd(t);e.forEach(function(l){var g=ug.bind(null,t,l);i.has(l)||(i.add(l),l.then(g,g))})}function Ue(t,e){var i=e.deletions;if(i!==null)for(var l=0;l<i.length;l++){var g=i[l],y=t,T=e,A=T;t:for(;A!==null;){switch(A.tag){case 27:case 5:ae=A.stateNode,Ee=!1;break t;case 3:ae=A.stateNode.containerInfo,Ee=!0;break t;case 4:ae=A.stateNode.containerInfo,Ee=!0;break t}A=A.return}if(ae===null)throw Error(j(160));$c(y,T,g),ae=null,Ee=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)ef(e,t),e=e.sibling}var qe=null;function ef(t,e){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ue(e,t),He(t),l&4&&(Ri(3,t,t.return),xa(3,t),Ri(5,t,t.return));break;case 1:Ue(e,t),He(t),l&512&&(Zt||i===null||we(i,i.return)),l&64&&hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var g=qe;if(Ue(e,t),He(t),l&512&&(Zt||i===null||we(i,i.return)),l&4){var y=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){t:{l=t.type,i=t.memoizedProps,g=g.ownerDocument||g;e:switch(l){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Kn]||y[ve]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(l),g.head.insertBefore(y,g.querySelector("head > title"))),de(y,l,i),y[ve]=t,le(y),l=y;break t;case"link":var T=Wf("link","href",g).get(l+(i.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(i.href==null?null:i.href)&&y.getAttribute("rel")===(i.rel==null?null:i.rel)&&y.getAttribute("title")===(i.title==null?null:i.title)&&y.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){T.splice(A,1);break e}}y=g.createElement(l),de(y,l,i),g.head.appendChild(y);break;case"meta":if(T=Wf("meta","content",g).get(l+(i.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(i.content==null?null:""+i.content)&&y.getAttribute("name")===(i.name==null?null:i.name)&&y.getAttribute("property")===(i.property==null?null:i.property)&&y.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&y.getAttribute("charset")===(i.charSet==null?null:i.charSet)){T.splice(A,1);break e}}y=g.createElement(l),de(y,l,i),g.head.appendChild(y);break;default:throw Error(j(468,l))}y[ve]=t,le(y),l=y}t.stateNode=l}else If(g,t.type,t.stateNode);else t.stateNode=qf(g,l,t.memoizedProps);else y!==l?(y===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):y.count--,l===null?If(g,t.type,t.stateNode):qf(g,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Wc(t,t.memoizedProps,i.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){g=t.stateNode,y=t.memoizedProps;try{for(var L=g.firstChild;L;){var N=L.nextSibling,at=L.nodeName;L[Kn]||at==="HEAD"||at==="BODY"||at==="SCRIPT"||at==="STYLE"||at==="LINK"&&L.rel.toLowerCase()==="stylesheet"||g.removeChild(L),L=N}for(var dt=t.type,J=g.attributes;J.length;)g.removeAttributeNode(J[0]);de(g,dt,y),g[ve]=t,g[Se]=y}catch(Tt){Gt(t,t.return,Tt)}}case 5:if(Ue(e,t),He(t),l&512&&(Zt||i===null||we(i,i.return)),t.flags&32){g=t.stateNode;try{yn(g,"")}catch(Tt){Gt(t,t.return,Tt)}}l&4&&t.stateNode!=null&&(g=t.memoizedProps,Wc(t,g,i!==null?i.memoizedProps:g)),l&1024&&(xl=!0);break;case 6:if(Ue(e,t),He(t),l&4){if(t.stateNode===null)throw Error(j(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(Tt){Gt(t,t.return,Tt)}}break;case 3:if(Kr=null,g=qe,qe=Ir(e.containerInfo),Ue(e,t),qe=g,He(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Na(e.containerInfo)}catch(Tt){Gt(t,t.return,Tt)}xl&&(xl=!1,nf(t));break;case 4:l=qe,qe=Ir(t.stateNode.containerInfo),Ue(e,t),He(t),qe=l;break;case 12:Ue(e,t),He(t);break;case 13:Ue(e,t),He(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ll=wt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ol(t,l)));break;case 22:if(l&512&&(Zt||i===null||we(i,i.return)),L=t.memoizedState!==null,N=i!==null&&i.memoizedState!==null,at=hi,dt=Zt,hi=at||L,Zt=dt||N,Ue(e,t),Zt=dt,hi=at,He(t),e=t.stateNode,e._current=t,e._visibility&=-3,e._visibility|=e._pendingVisibility&2,l&8192&&(e._visibility=L?e._visibility&-2:e._visibility|1,L&&(e=hi||Zt,i===null||N||e||Bn(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))t:for(i=null,e=t;;){if(e.tag===5||e.tag===26||e.tag===27){if(i===null){N=i=e;try{if(g=N.stateNode,L)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=N.stateNode,A=N.memoizedProps.style;var it=A!=null&&A.hasOwnProperty("display")?A.display:null;T.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(Tt){Gt(N,N.return,Tt)}}}else if(e.tag===6){if(i===null){N=e;try{N.stateNode.nodeValue=L?"":N.memoizedProps}catch(Tt){Gt(N,N.return,Tt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;i===e&&(i=null),e=e.return}i===e&&(i=null),e.sibling.return=e.return,e=e.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Ol(t,i))));break;case 19:Ue(e,t),He(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ol(t,l)));break;case 21:break;default:Ue(e,t),He(t)}}function He(t){var e=t.flags;if(e&2){try{if(t.tag!==27){t:{for(var i=t.return;i!==null;){if(Ic(i)){var l=i;break t}i=i.return}throw Error(j(160))}switch(l.tag){case 27:var g=l.stateNode,y=Cl(t);kr(t,y,g);break;case 5:var T=l.stateNode;l.flags&32&&(yn(T,""),l.flags&=-33);var A=Cl(t);kr(t,A,T);break;case 3:case 4:var L=l.stateNode.containerInfo,N=Cl(t);Tl(t,N,L);break;default:throw Error(j(161))}}}catch(at){Gt(t,t.return,at)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;nf(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function gi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Zc(t,e.alternate,e),e=e.sibling}function Bn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ri(4,e,e.return),Bn(e);break;case 1:we(e,e.return);var i=e.stateNode;typeof i.componentWillUnmount=="function"&&Vc(e,e.return,i),Bn(e);break;case 26:case 27:case 5:we(e,e.return),Bn(e);break;case 22:we(e,e.return),e.memoizedState===null&&Bn(e);break;default:Bn(e)}t=t.sibling}}function ji(t,e,i){for(i=i&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var l=e.alternate,g=t,y=e,T=y.flags;switch(y.tag){case 0:case 11:case 15:ji(g,y,i),xa(4,y);break;case 1:if(ji(g,y,i),l=y,g=l.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(N){Gt(l,l.return,N)}if(l=y,g=l.updateQueue,g!==null){var A=l.stateNode;try{var L=g.shared.hiddenCallbacks;if(L!==null)for(g.shared.hiddenCallbacks=null,g=0;g<L.length;g++)Nc(L[g],A)}catch(N){Gt(l,l.return,N)}}i&&T&64&&Gc(y),on(y,y.return);break;case 26:case 27:case 5:ji(g,y,i),i&&l===null&&T&4&&qc(y),on(y,y.return);break;case 12:ji(g,y,i);break;case 13:ji(g,y,i),i&&T&4&&tf(g,y);break;case 22:y.memoizedState===null&&ji(g,y,i),on(y,y.return);break;default:ji(g,y,i)}e=e.sibling}}function wl(t,e){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&ga(i))}function El(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ga(t))}function ki(t,e,i,l){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)af(t,e,i,l),e=e.sibling}function af(t,e,i,l){var g=e.flags;switch(e.tag){case 0:case 11:case 15:ki(t,e,i,l),g&2048&&xa(9,e);break;case 3:ki(t,e,i,l),g&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ga(t)));break;case 12:if(g&2048){ki(t,e,i,l),t=e.stateNode;try{var y=e.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Gt(e,e.return,L)}}else ki(t,e,i,l);break;case 23:break;case 22:y=e.stateNode,e.memoizedState!==null?y._visibility&4?ki(t,e,i,l):Oa(t,e):y._visibility&4?ki(t,e,i,l):(y._visibility|=4,zn(t,e,i,l,(e.subtreeFlags&10256)!==0)),g&2048&&wl(e.alternate,e);break;case 24:ki(t,e,i,l),g&2048&&El(e.alternate,e);break;default:ki(t,e,i,l)}}function zn(t,e,i,l,g){for(g=g&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var y=t,T=e,A=i,L=l,N=T.flags;switch(T.tag){case 0:case 11:case 15:zn(y,T,A,L,g),xa(8,T);break;case 23:break;case 22:var at=T.stateNode;T.memoizedState!==null?at._visibility&4?zn(y,T,A,L,g):Oa(y,T):(at._visibility|=4,zn(y,T,A,L,g)),g&&N&2048&&wl(T.alternate,T);break;case 24:zn(y,T,A,L,g),g&&N&2048&&El(T.alternate,T);break;default:zn(y,T,A,L,g)}e=e.sibling}}function Oa(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var i=t,l=e,g=l.flags;switch(l.tag){case 22:Oa(i,l),g&2048&&wl(l.alternate,l);break;case 24:Oa(i,l),g&2048&&El(l.alternate,l);break;default:Oa(i,l)}e=e.sibling}}var wa=8192;function Pn(t){if(t.subtreeFlags&wa)for(t=t.child;t!==null;)rf(t),t=t.sibling}function rf(t){switch(t.tag){case 26:Pn(t),t.flags&wa&&t.memoizedState!==null&&Ug(qe,t.memoizedState,t.memoizedProps);break;case 5:Pn(t);break;case 3:case 4:var e=qe;qe=Ir(t.stateNode.containerInfo),Pn(t),qe=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=wa,wa=16777216,Pn(t),wa=e):Pn(t));break;default:Pn(t)}}function sf(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ea(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var l=e[i];ue=l,of(l,t)}sf(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lf(t),t=t.sibling}function lf(t){switch(t.tag){case 0:case 11:case 15:Ea(t),t.flags&2048&&Ri(9,t,t.return);break;case 3:Ea(t);break;case 12:Ea(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&4&&(t.return===null||t.return.tag!==13)?(e._visibility&=-5,Lr(t)):Ea(t);break;default:Ea(t)}}function Lr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var l=e[i];ue=l,of(l,t)}sf(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ri(8,e,e.return),Lr(e);break;case 22:i=e.stateNode,i._visibility&4&&(i._visibility&=-5,Lr(e));break;default:Lr(e)}t=t.sibling}}function of(t,e){for(;ue!==null;){var i=ue;switch(i.tag){case 0:case 11:case 15:Ri(8,i,e);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ga(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,ue=l;else t:for(i=t;ue!==null;){l=ue;var g=l.sibling,y=l.return;if(Jc(l),l===i){ue=null;break t}if(g!==null){g.return=y,ue=g;break t}ue=y}}}function Zd(t,e,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(t,e,i,l){return new Zd(t,e,i,l)}function Al(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Li(t,e){var i=t.alternate;return i===null?(i=Ye(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&31457280,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function uf(t,e){t.flags&=31457282;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Br(t,e,i,l,g,y){var T=0;if(l=t,typeof t=="function")Al(t)&&(T=1);else if(typeof t=="string")T=zg(t,i,ft.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case u:return un(i.children,g,y,e);case c:T=8,g|=24;break;case h:return t=Ye(12,i,e,g|2),t.elementType=h,t.lanes=y,t;case f:return t=Ye(13,i,e,g),t.elementType=f,t.lanes=y,t;case o:return t=Ye(19,i,e,g),t.elementType=o,t.lanes=y,t;case _:return cf(i,g,y,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a:case n:T=10;break t;case r:T=9;break t;case s:T=11;break t;case d:T=14;break t;case p:T=16,l=null;break t}T=29,i=Error(j(130,t===null?"null":typeof t,"")),l=null}return e=Ye(T,i,e,g),e.elementType=t,e.type=l,e.lanes=y,e}function un(t,e,i,l){return t=Ye(7,t,l,e),t.lanes=i,t}function cf(t,e,i,l){t=Ye(22,t,l,e),t.elementType=_,t.lanes=i;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(j(456));if((g._pendingVisibility&2)===0){var T=Ci(y,2);T!==null&&(g._pendingVisibility|=2,_e(T,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(j(456));if((g._pendingVisibility&2)!==0){var T=Ci(y,2);T!==null&&(g._pendingVisibility&=-3,_e(T,y,2))}}};return t.stateNode=g,t}function Dl(t,e,i){return t=Ye(6,t,null,e),t.lanes=i,t}function Ml(t,e,i){return e=Ye(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vi(t){t.flags|=4}function ff(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qf(e)){if(e=Pe.current,e!==null&&((Pt&4194176)===Pt?Je!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||e!==Je))throw fa=Bs,Eu;t.flags|=8192}}function zr(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ao():536870912,t.lanes|=e,Hn|=e)}function Aa(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(e)for(var g=t.child;g!==null;)i|=g.lanes|g.childLanes,l|=g.subtreeFlags&31457280,l|=g.flags&31457280,g.return=t,g=g.sibling;else for(g=t.child;g!==null;)i|=g.lanes|g.childLanes,l|=g.subtreeFlags,l|=g.flags,g.return=t,g=g.sibling;return t.subtreeFlags|=l,t.childLanes=i,e}function Jd(t,e,i){var l=e.pendingProps;switch(ks(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return It(e),null;case 3:return i=e.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),e.memoizedState.cache!==l&&(e.flags|=2048),fi(se),st(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(la(e)?vi(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Ve!==null&&(Ul(Ve),Ve=null))),It(e),null;case 26:return i=e.memoizedState,t===null?(vi(e),i!==null?(It(e),ff(e,i)):(It(e),e.flags&=-16777217)):i?i!==t.memoizedState?(vi(e),It(e),ff(e,i)):(It(e),e.flags&=-16777217):(t.memoizedProps!==l&&vi(e),It(e),e.flags&=-16777217),null;case 27:ot(e),i=$.current;var g=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==l&&vi(e);else{if(!l){if(e.stateNode===null)throw Error(j(166));return It(e),null}t=ft.current,la(e)?Ou(e):(t=Xf(g,l,i),e.stateNode=t,vi(e))}return It(e),null;case 5:if(ot(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==l&&vi(e);else{if(!l){if(e.stateNode===null)throw Error(j(166));return It(e),null}if(t=ft.current,la(e))Ou(e);else{switch(g=Wr($.current),t){case 1:t=g.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=g.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=g.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=g.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?g.createElement(i,{is:l.is}):g.createElement(i)}}t[ve]=e,t[Se]=l;t:for(g=e.child;g!==null;){if(g.tag===5||g.tag===6)t.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break t;for(;g.sibling===null;){if(g.return===null||g.return===e)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}e.stateNode=t;t:switch(de(t,i,l),i){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&vi(e)}}return It(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==l&&vi(e);else{if(typeof l!="string"&&e.stateNode===null)throw Error(j(166));if(t=$.current,la(e)){if(t=e.stateNode,i=e.memoizedProps,l=null,g=ye,g!==null)switch(g.tag){case 27:case 5:l=g.memoizedProps}t[ve]=e,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Bf(t.nodeValue,i)),t||Ji(e)}else t=Wr(t).createTextNode(l),t[ve]=e,e.stateNode=t}return It(e),null;case 13:if(l=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(g=la(e),l!==null&&l.dehydrated!==null){if(t===null){if(!g)throw Error(j(318));if(g=e.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(j(317));g[ve]=e}else oa(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;It(e),g=!1}else Ve!==null&&(Ul(Ve),Ve=null),g=!0;if(!g)return e.flags&256?(li(e),e):(li(e),null)}if(li(e),(e.flags&128)!==0)return e.lanes=i,e;if(i=l!==null,t=t!==null&&t.memoizedState!==null,i){l=e.child,g=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(g=l.alternate.memoizedState.cachePool.pool);var y=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==g&&(l.flags|=2048)}return i!==t&&i&&(e.child.flags|=8192),zr(e,e.updateQueue),It(e),null;case 4:return st(),t===null&&Ql(e.stateNode.containerInfo),It(e),null;case 10:return fi(e.type),It(e),null;case 19:if(I(re),g=e.memoizedState,g===null)return It(e),null;if(l=(e.flags&128)!==0,y=g.rendering,y===null)if(l)Aa(g,!1);else{if(Jt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(y=_r(t),y!==null){for(e.flags|=128,Aa(g,!1),t=y.updateQueue,e.updateQueue=t,zr(e,t),e.subtreeFlags=0,t=i,i=e.child;i!==null;)uf(i,t),i=i.sibling;return et(re,re.current&1|2),e.child}t=t.sibling}g.tail!==null&&wt()>Pr&&(e.flags|=128,l=!0,Aa(g,!1),e.lanes=4194304)}else{if(!l)if(t=_r(y),t!==null){if(e.flags|=128,l=!0,t=t.updateQueue,e.updateQueue=t,zr(e,t),Aa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Ht)return It(e),null}else 2*wt()-g.renderingStartTime>Pr&&i!==536870912&&(e.flags|=128,l=!0,Aa(g,!1),e.lanes=4194304);g.isBackwards?(y.sibling=e.child,e.child=y):(t=g.last,t!==null?t.sibling=y:e.child=y,g.last=y)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=wt(),e.sibling=null,t=re.current,et(re,l?t&1|2:t&1),e):(It(e),null);case 22:case 23:return li(e),Ps(),l=e.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(e.flags|=8192):l&&(e.flags|=8192),l?(i&536870912)!==0&&(e.flags&128)===0&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),i=e.updateQueue,i!==null&&zr(e,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),l!==i&&(e.flags|=2048),t!==null&&I(tn),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),fi(se),It(e),null;case 25:return null}throw Error(j(156,e.tag))}function $d(t,e){switch(ks(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fi(se),st(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ot(e),null;case 13:if(li(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return I(re),null;case 4:return st(),null;case 10:return fi(e.type),null;case 22:case 23:return li(e),Ps(),t!==null&&I(tn),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return fi(se),null;case 25:return null;default:return null}}function hf(t,e){switch(ks(e),e.tag){case 3:fi(se),st();break;case 26:case 27:case 5:ot(e);break;case 4:st();break;case 13:li(e);break;case 19:I(re);break;case 10:fi(e.type);break;case 22:case 23:li(e),Ps(),t!==null&&I(tn);break;case 24:fi(se)}}var tg={getCacheForType:function(t){var e=me(se),i=e.data.get(t);return i===void 0&&(i=t(),e.data.set(t,i)),i}},eg=typeof WeakMap=="function"?WeakMap:Map,Qt=0,Vt=null,Lt=null,Pt=0,qt=0,Ae=null,mi=!1,Un=!1,Rl=!1,pi=0,Jt=0,Bi=0,cn=0,jl=0,Xe=0,Hn=0,Da=null,ti=null,kl=!1,Ll=0,Pr=1/0,Ur=null,zi=null,Hr=!1,fn=null,Ma=0,Bl=0,zl=null,Ra=0,Pl=null;function De(){if((Qt&2)!==0&&Pt!==0)return Pt&-Pt;if(H.T!==null){var t=Mn;return t!==0?t:Vl()}return jo()}function df(){Xe===0&&(Xe=(Pt&536870912)===0||Ht?Eo():536870912);var t=Pe.current;return t!==null&&(t.flags|=32),Xe}function _e(t,e,i){(t===Vt&&qt===2||t.cancelPendingCommit!==null)&&(Yn(t,0),yi(t,Pt,Xe,!1)),Qn(t,i),((Qt&2)===0||t!==Vt)&&(t===Vt&&((Qt&2)===0&&(cn|=i),Jt===4&&yi(t,Pt,Xe,!1)),ei(t))}function gf(t,e,i){if((Qt&6)!==0)throw Error(j(327));var l=!i&&(e&60)===0&&(e&t.expiredLanes)===0||In(t,e),g=l?ag(t,e):Xl(t,e,!0),y=l;do{if(g===0){Un&&!l&&yi(t,e,0,!1);break}else if(g===6)yi(t,e,0,!mi);else{if(i=t.current.alternate,y&&!ig(i)){g=Xl(t,e,!1),y=!1;continue}if(g===2){if(y=e,t.errorRecoveryDisabledLanes&y)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){e=T;t:{var A=t;g=Da;var L=A.current.memoizedState.isDehydrated;if(L&&(Yn(A,T).flags|=256),T=Xl(A,T,!1),T!==2){if(Rl&&!L){A.errorRecoveryDisabledLanes|=y,cn|=y,g=4;break t}y=ti,ti=g,y!==null&&Ul(y)}g=T}if(y=!1,g!==2)continue}}if(g===1){Yn(t,0),yi(t,e,0,!0);break}t:{switch(l=t,g){case 0:case 1:throw Error(j(345));case 4:if((e&4194176)===e){yi(l,e,Xe,!mi);break t}break;case 2:ti=null;break;case 3:case 5:break;default:throw Error(j(329))}if(l.finishedWork=i,l.finishedLanes=e,(e&62914560)===e&&(y=Ll+300-wt(),10<y)){if(yi(l,e,Xe,!mi),Ja(l,0)!==0)break t;l.timeoutHandle=Uf(vf.bind(null,l,i,ti,Ur,kl,e,Xe,cn,Hn,mi,2,-0,0),y);break t}vf(l,i,ti,Ur,kl,e,Xe,cn,Hn,mi,0,-0,0)}}break}while(!0);ei(t)}function Ul(t){ti===null?ti=t:ti.push.apply(ti,t)}function vf(t,e,i,l,g,y,T,A,L,N,at,dt,J){var it=e.subtreeFlags;if((it&8192||(it&16785408)===16785408)&&(Pa={stylesheets:null,count:0,unsuspend:Pg},rf(e),e=Hg(),e!==null)){t.cancelPendingCommit=e(Cf.bind(null,t,i,l,g,T,A,L,1,dt,J)),yi(t,y,T,!N);return}Cf(t,i,l,g,T,A,L,at,dt,J)}function ig(t){for(var e=t;;){var i=e.tag;if((i===0||i===11||i===15)&&e.flags&16384&&(i=e.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var g=i[l],y=g.getSnapshot;g=g.value;try{if(!Oe(y(),g))return!1}catch{return!1}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yi(t,e,i,l){e&=~jl,e&=~cn,t.suspendedLanes|=e,t.pingedLanes&=~e,l&&(t.warmLanes|=e),l=t.expirationTimes;for(var g=e;0<g;){var y=31-xe(g),T=1<<y;l[y]=-1,g&=~T}i!==0&&Do(t,i,e)}function Yr(){return(Qt&6)===0?(ja(0),!1):!0}function Hl(){if(Lt!==null){if(qt===0)var t=Lt.return;else t=Lt,ci=sn=null,Vs(t),An=null,ha=0,t=Lt;for(;t!==null;)hf(t.alternate,t),t=t.return;Lt=null}}function Yn(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,bg(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Hl(),Vt=t,Lt=i=Li(t.current,null),Pt=e,qt=0,Ae=null,mi=!1,Un=In(t,e),Rl=!1,Hn=Xe=jl=cn=Bi=Jt=0,ti=Da=null,kl=!1,(e&8)!==0&&(e|=e&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=e;0<l;){var g=31-xe(l),y=1<<g;e|=t[g],l&=~y}return pi=e,cr(),i}function mf(t,e){jt=null,H.H=$e,e===ca?(e=Mu(),qt=3):e===Eu?(e=Mu(),qt=4):qt=e===Ac?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ae=e,Lt===null&&(Jt=1,Mr(t,Le(e,t.current)))}function pf(){var t=H.H;return H.H=$e,t===null?$e:t}function yf(){var t=H.A;return H.A=tg,t}function Yl(){Jt=4,mi||(Pt&4194176)!==Pt&&Pe.current!==null||(Un=!0),(Bi&134217727)===0&&(cn&134217727)===0||Vt===null||yi(Vt,Pt,Xe,!1)}function Xl(t,e,i){var l=Qt;Qt|=2;var g=pf(),y=yf();(Vt!==t||Pt!==e)&&(Ur=null,Yn(t,e)),e=!1;var T=Jt;t:do try{if(qt!==0&&Lt!==null){var A=Lt,L=Ae;switch(qt){case 8:Hl(),T=6;break t;case 3:case 2:case 6:Pe.current===null&&(e=!0);var N=qt;if(qt=0,Ae=null,Xn(t,A,L,N),i&&Un){T=0;break t}break;default:N=qt,qt=0,Ae=null,Xn(t,A,L,N)}}ng(),T=Jt;break}catch(at){mf(t,at)}while(!0);return e&&t.shellSuspendCounter++,ci=sn=null,Qt=l,H.H=g,H.A=y,Lt===null&&(Vt=null,Pt=0,cr()),T}function ng(){for(;Lt!==null;)_f(Lt)}function ag(t,e){var i=Qt;Qt|=2;var l=pf(),g=yf();Vt!==t||Pt!==e?(Ur=null,Pr=wt()+500,Yn(t,e)):Un=In(t,e);t:do try{if(qt!==0&&Lt!==null){e=Lt;var y=Ae;e:switch(qt){case 1:qt=0,Ae=null,Xn(t,e,y,1);break;case 2:if(Au(y)){qt=0,Ae=null,Sf(e);break}e=function(){qt===2&&Vt===t&&(qt=7),ei(t)},y.then(e,e);break t;case 3:qt=7;break t;case 4:qt=5;break t;case 7:Au(y)?(qt=0,Ae=null,Sf(e)):(qt=0,Ae=null,Xn(t,e,y,7));break;case 5:var T=null;switch(Lt.tag){case 26:T=Lt.memoizedState;case 5:case 27:var A=Lt;if(!T||Qf(T)){qt=0,Ae=null;var L=A.sibling;if(L!==null)Lt=L;else{var N=A.return;N!==null?(Lt=N,Xr(N)):Lt=null}break e}}qt=0,Ae=null,Xn(t,e,y,5);break;case 6:qt=0,Ae=null,Xn(t,e,y,6);break;case 8:Hl(),Jt=6;break t;default:throw Error(j(462))}}rg();break}catch(at){mf(t,at)}while(!0);return ci=sn=null,H.H=l,H.A=g,Qt=i,Lt!==null?0:(Vt=null,Pt=0,cr(),Jt)}function rg(){for(;Lt!==null&&!lt();)_f(Lt)}function _f(t){var e=Yc(t.alternate,t,pi);t.memoizedProps=t.pendingProps,e===null?Xr(t):Lt=e}function Sf(t){var e=t,i=e.alternate;switch(e.tag){case 15:case 0:e=Lc(i,e,e.pendingProps,e.type,void 0,Pt);break;case 11:e=Lc(i,e,e.pendingProps,e.type.render,e.ref,Pt);break;case 5:Vs(e);default:hf(i,e),e=Lt=uf(e,pi),e=Yc(i,e,pi)}t.memoizedProps=t.pendingProps,e===null?Xr(t):Lt=e}function Xn(t,e,i,l){ci=sn=null,Vs(e),An=null,ha=0;var g=e.return;try{if(Wd(t,g,e,i,Pt)){Jt=1,Mr(t,Le(i,t.current)),Lt=null;return}}catch(y){if(g!==null)throw Lt=g,y;Jt=1,Mr(t,Le(i,t.current)),Lt=null;return}e.flags&32768?(Ht||l===1?t=!0:Un||(Pt&536870912)!==0?t=!1:(mi=t=!0,(l===2||l===3||l===6)&&(l=Pe.current,l!==null&&l.tag===13&&(l.flags|=16384))),bf(e,t)):Xr(e)}function Xr(t){var e=t;do{if((e.flags&32768)!==0){bf(e,mi);return}t=e.return;var i=Jd(e.alternate,e,pi);if(i!==null){Lt=i;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Jt===0&&(Jt=5)}function bf(t,e){do{var i=$d(t.alternate,t);if(i!==null){i.flags&=32767,Lt=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!e&&(t=t.sibling,t!==null)){Lt=t;return}Lt=t=i}while(t!==null);Jt=6,Lt=null}function Cf(t,e,i,l,g,y,T,A,L,N){var at=H.T,dt=D.p;try{D.p=2,H.T=null,sg(t,e,i,l,dt,g,y,T,A,L,N)}finally{H.T=at,D.p=dt}}function sg(t,e,i,l,g,y,T,A){do Nn();while(fn!==null);if((Qt&6)!==0)throw Error(j(327));var L=t.finishedWork;if(l=t.finishedLanes,L===null)return null;if(t.finishedWork=null,t.finishedLanes=0,L===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var N=L.lanes|L.childLanes;if(N|=Ms,Uh(t,l,N,y,T,A),t===Vt&&(Lt=Vt=null,Pt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||Hr||(Hr=!0,Bl=N,zl=i,cg(ee,function(){return Nn(),null})),i=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||i?(i=H.T,H.T=null,y=D.p,D.p=2,T=Qt,Qt|=4,Qd(t,L),ef(L,t),Md($l,t.containerInfo),$r=!!Jl,$l=Jl=null,t.current=L,Zc(t,L.alternate,L),xt(),Qt=T,D.p=y,H.T=i):t.current=L,Hr?(Hr=!1,fn=t,Ma=l):Tf(t,N),N=t.pendingLanes,N===0&&(zi=null),ls(L.stateNode),ei(t),e!==null)for(g=t.onRecoverableError,L=0;L<e.length;L++)N=e[L],g(N.value,{componentStack:N.stack});return(Ma&3)!==0&&Nn(),N=t.pendingLanes,(l&4194218)!==0&&(N&42)!==0?t===Pl?Ra++:(Ra=0,Pl=t):Ra=0,ja(0),null}function Tf(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ga(e)))}function Nn(){if(fn!==null){var t=fn,e=Bl;Bl=0;var i=Ro(Ma),l=H.T,g=D.p;try{if(D.p=32>i?32:i,H.T=null,fn===null)var y=!1;else{i=zl,zl=null;var T=fn,A=Ma;if(fn=null,Ma=0,(Qt&6)!==0)throw Error(j(331));var L=Qt;if(Qt|=4,lf(T.current),af(T,T.current,A,i),Qt=L,ja(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Fi,T)}catch{}y=!0}return y}finally{D.p=g,H.T=l,Tf(t,e)}}return!1}function xf(t,e,i){e=Le(i,e),e=rl(t.stateNode,e,2),t=Mi(t,e,2),t!==null&&(Qn(t,2),ei(t))}function Gt(t,e,i){if(t.tag===3)xf(t,t,i);else for(;e!==null;){if(e.tag===3){xf(e,t,i);break}else if(e.tag===1){var l=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))){t=Le(i,t),i=wc(2),l=Mi(e,i,2),l!==null&&(Ec(i,l,e,t),Qn(l,2),ei(l));break}}e=e.return}}function Nl(t,e,i){var l=t.pingCache;if(l===null){l=t.pingCache=new eg;var g=new Set;l.set(e,g)}else g=l.get(e),g===void 0&&(g=new Set,l.set(e,g));g.has(i)||(Rl=!0,g.add(i),t=lg.bind(null,t,e,i),e.then(t,t))}function lg(t,e,i){var l=t.pingCache;l!==null&&l.delete(e),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Vt===t&&(Pt&i)===i&&(Jt===4||Jt===3&&(Pt&62914560)===Pt&&300>wt()-Ll?(Qt&2)===0&&Yn(t,0):jl|=i,Hn===Pt&&(Hn=0)),ei(t)}function Of(t,e){e===0&&(e=Ao()),t=Ci(t,e),t!==null&&(Qn(t,e),ei(t))}function og(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),Of(t,i)}function ug(t,e){var i=0;switch(t.tag){case 13:var l=t.stateNode,g=t.memoizedState;g!==null&&(i=g.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(j(314))}l!==null&&l.delete(e),Of(t,i)}function cg(t,e){return At(t,e)}var Nr=null,Fn=null,Fl=!1,Fr=!1,Gl=!1,hn=0;function ei(t){t!==Fn&&t.next===null&&(Fn===null?Nr=Fn=t:Fn=Fn.next=t),Fr=!0,Fl||(Fl=!0,hg(fg))}function ja(t,e){if(!Gl&&Fr){Gl=!0;do for(var i=!1,l=Nr;l!==null;){if(t!==0){var g=l.pendingLanes;if(g===0)var y=0;else{var T=l.suspendedLanes,A=l.pingedLanes;y=(1<<31-xe(42|t)+1)-1,y&=g&~(T&~A),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(i=!0,Af(l,y))}else y=Pt,y=Ja(l,l===Vt?y:0),(y&3)===0||In(l,y)||(i=!0,Af(l,y));l=l.next}while(i);Gl=!1}}function fg(){Fr=Fl=!1;var t=0;hn!==0&&(Sg()&&(t=hn),hn=0);for(var e=wt(),i=null,l=Nr;l!==null;){var g=l.next,y=wf(l,e);y===0?(l.next=null,i===null?Nr=g:i.next=g,g===null&&(Fn=i)):(i=l,(t!==0||(y&3)!==0)&&(Fr=!0)),l=g}ja(t)}function wf(t,e){for(var i=t.suspendedLanes,l=t.pingedLanes,g=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var T=31-xe(y),A=1<<T,L=g[T];L===-1?((A&i)===0||(A&l)!==0)&&(g[T]=Ph(A,e)):L<=e&&(t.expiredLanes|=A),y&=~A}if(e=Vt,i=Pt,i=Ja(t,t===e?i:0),l=t.callbackNode,i===0||t===e&&qt===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ct(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||In(t,i)){if(e=i&-i,e===t.callbackPriority)return e;switch(l!==null&&Ct(l),Ro(i)){case 2:case 8:i=Ut;break;case 32:i=ee;break;case 268435456:i=Qe;break;default:i=ee}return l=Ef.bind(null,t),i=At(i,l),t.callbackPriority=e,t.callbackNode=i,e}return l!==null&&l!==null&&Ct(l),t.callbackPriority=2,t.callbackNode=null,2}function Ef(t,e){var i=t.callbackNode;if(Nn()&&t.callbackNode!==i)return null;var l=Pt;return l=Ja(t,t===Vt?l:0),l===0?null:(gf(t,l,e),wf(t,wt()),t.callbackNode!=null&&t.callbackNode===i?Ef.bind(null,t):null)}function Af(t,e){if(Nn())return null;gf(t,e,!0)}function hg(t){Cg(function(){(Qt&6)!==0?At(Ft,t):t()})}function Vl(){return hn===0&&(hn=Eo()),hn}function Df(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:nr(""+t)}function Mf(t,e){var i=e.ownerDocument.createElement("input");return i.name=e.name,i.value=e.value,t.id&&i.setAttribute("form",t.id),e.parentNode.insertBefore(i,e),t=new FormData(t),i.parentNode.removeChild(i),t}function dg(t,e,i,l,g){if(e==="submit"&&i&&i.stateNode===g){var y=Df((g[Se]||null).action),T=l.submitter;T&&(e=(e=T[Se]||null)?Df(e.formAction):T.getAttribute("formAction"),e!==null&&(y=e,T=null));var A=new lr("action","action",null,l,g);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hn!==0){var L=T?Mf(g,T):new FormData(g);tl(i,{pending:!0,data:L,method:g.method,action:y},null,L)}}else typeof y=="function"&&(A.preventDefault(),L=T?Mf(g,T):new FormData(g),tl(i,{pending:!0,data:L,method:g.method,action:y},y,L))},currentTarget:g}]})}}for(var ql=0;ql<bu.length;ql++){var Wl=bu[ql],gg=Wl.toLowerCase(),vg=Wl[0].toUpperCase()+Wl.slice(1);Ge(gg,"on"+vg)}Ge(mu,"onAnimationEnd"),Ge(pu,"onAnimationIteration"),Ge(yu,"onAnimationStart"),Ge("dblclick","onDoubleClick"),Ge("focusin","onFocus"),Ge("focusout","onBlur"),Ge(jd,"onTransitionRun"),Ge(kd,"onTransitionStart"),Ge(Ld,"onTransitionCancel"),Ge(_u,"onTransitionEnd"),mn("onMouseEnter",["mouseout","mouseover"]),mn("onMouseLeave",["mouseout","mouseover"]),mn("onPointerEnter",["pointerout","pointerover"]),mn("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ka));function Rf(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],g=l.event;l=l.listeners;t:{var y=void 0;if(e)for(var T=l.length-1;0<=T;T--){var A=l[T],L=A.instance,N=A.currentTarget;if(A=A.listener,L!==y&&g.isPropagationStopped())break t;y=A,g.currentTarget=N;try{y(g)}catch(at){Dr(at)}g.currentTarget=null,y=L}else for(T=0;T<l.length;T++){if(A=l[T],L=A.instance,N=A.currentTarget,A=A.listener,L!==y&&g.isPropagationStopped())break t;y=A,g.currentTarget=N;try{y(g)}catch(at){Dr(at)}g.currentTarget=null,y=L}}}}function zt(t,e){var i=e[us];i===void 0&&(i=e[us]=new Set);var l=t+"__bubble";i.has(l)||(jf(e,t,2,!1),i.add(l))}function Il(t,e,i){var l=0;e&&(l|=4),jf(i,t,l,e)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function Ql(t){if(!t[Gr]){t[Gr]=!0,Lo.forEach(function(i){i!=="selectionchange"&&(mg.has(i)||Il(i,!1,t),Il(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gr]||(e[Gr]=!0,Il("selectionchange",!1,e))}}function jf(t,e,i,l){switch(eh(e)){case 2:var g=Ng;break;case 8:g=Fg;break;default:g=oo}i=g.bind(null,e,i,t),g=void 0,!ps||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(g=!0),l?g!==void 0?t.addEventListener(e,i,{capture:!0,passive:g}):t.addEventListener(e,i,!0):g!==void 0?t.addEventListener(e,i,{passive:g}):t.addEventListener(e,i,!1)}function Kl(t,e,i,l,g){var y=l;if((e&1)===0&&(e&2)===0&&l!==null)t:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===g||A.nodeType===8&&A.parentNode===g)break;if(T===4)for(T=l.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;T=T.return}for(;A!==null;){if(T=Vi(A),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){l=y=T;continue t}A=A.parentNode}}l=l.return}qo(function(){var N=y,at=vs(i),dt=[];t:{var J=Su.get(t);if(J!==void 0){var it=lr,Tt=t;switch(t){case"keypress":if(rr(i)===0)break t;case"keydown":case"keyup":it=ud;break;case"focusin":Tt="focus",it=bs;break;case"focusout":Tt="blur",it=bs;break;case"beforeblur":case"afterblur":it=bs;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=hd;break;case mu:case pu:case yu:it=td;break;case _u:it=gd;break;case"scroll":case"scrollend":it=Qh;break;case"wheel":it=md;break;case"copy":case"cut":case"paste":it=id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Zo;break;case"toggle":case"beforetoggle":it=yd}var Dt=(e&4)!==0,$t=!Dt&&(t==="scroll"||t==="scrollend"),q=Dt?J!==null?J+"Capture":null:J;Dt=[];for(var Y=N,Q;Y!==null;){var ut=Y;if(Q=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||Q===null||q===null||(ut=Jn(Y,q),ut!=null&&Dt.push(La(Y,ut,Q))),$t)break;Y=Y.return}0<Dt.length&&(J=new it(J,Tt,null,i,at),dt.push({event:J,listeners:Dt}))}}if((e&7)===0){t:{if(J=t==="mouseover"||t==="pointerover",it=t==="mouseout"||t==="pointerout",J&&i!==gs&&(Tt=i.relatedTarget||i.fromElement)&&(Vi(Tt)||Tt[dn]))break t;if((it||J)&&(J=at.window===at?at:(J=at.ownerDocument)?J.defaultView||J.parentWindow:window,it?(Tt=i.relatedTarget||i.toElement,it=N,Tt=Tt?Vi(Tt):null,Tt!==null&&($t=G(Tt),Dt=Tt.tag,Tt!==$t||Dt!==5&&Dt!==27&&Dt!==6)&&(Tt=null)):(it=null,Tt=N),it!==Tt)){if(Dt=Qo,ut="onMouseLeave",q="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(Dt=Zo,ut="onPointerLeave",q="onPointerEnter",Y="pointer"),$t=it==null?J:Zn(it),Q=Tt==null?J:Zn(Tt),J=new Dt(ut,Y+"leave",it,i,at),J.target=$t,J.relatedTarget=Q,ut=null,Vi(at)===N&&(Dt=new Dt(q,Y+"enter",Tt,i,at),Dt.target=Q,Dt.relatedTarget=$t,ut=Dt),$t=ut,it&&Tt)e:{for(Dt=it,q=Tt,Y=0,Q=Dt;Q;Q=Gn(Q))Y++;for(Q=0,ut=q;ut;ut=Gn(ut))Q++;for(;0<Y-Q;)Dt=Gn(Dt),Y--;for(;0<Q-Y;)q=Gn(q),Q--;for(;Y--;){if(Dt===q||q!==null&&Dt===q.alternate)break e;Dt=Gn(Dt),q=Gn(q)}Dt=null}else Dt=null;it!==null&&kf(dt,J,it,Dt,!1),Tt!==null&&$t!==null&&kf(dt,$t,Tt,Dt,!0)}}t:{if(J=N?Zn(N):window,it=J.nodeName&&J.nodeName.toLowerCase(),it==="select"||it==="input"&&J.type==="file")var bt=ru;else if(nu(J))if(su)bt=Ad;else{bt=wd;var kt=Od}else it=J.nodeName,!it||it.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?N&&ds(N.elementType)&&(bt=ru):bt=Ed;if(bt&&(bt=bt(t,N))){au(dt,bt,i,at);break t}kt&&kt(t,J,N),t==="focusout"&&N&&J.type==="number"&&N.memoizedProps.value!=null&&hs(J,"number",J.value)}switch(kt=N?Zn(N):window,t){case"focusin":(nu(kt)||kt.contentEditable==="true")&&(Cn=kt,Es=N,sa=null);break;case"focusout":sa=Es=Cn=null;break;case"mousedown":As=!0;break;case"contextmenu":case"mouseup":case"dragend":As=!1,gu(dt,i,at);break;case"selectionchange":if(Rd)break;case"keydown":case"keyup":gu(dt,i,at)}var Ot;if(Ts)t:{switch(t){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else bn?eu(t,i)&&(Et="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Et="onCompositionStart");Et&&(Jo&&i.locale!=="ko"&&(bn||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&bn&&(Ot=Wo()):(bi=at,ys="value"in bi?bi.value:bi.textContent,bn=!0)),kt=Vr(N,Et),0<kt.length&&(Et=new Ko(Et,t,null,i,at),dt.push({event:Et,listeners:kt}),Ot?Et.data=Ot:(Ot=iu(i),Ot!==null&&(Et.data=Ot)))),(Ot=Sd?bd(t,i):Cd(t,i))&&(Et=Vr(N,"onBeforeInput"),0<Et.length&&(kt=new Ko("onBeforeInput","beforeinput",null,i,at),dt.push({event:kt,listeners:Et}),kt.data=Ot)),dg(dt,t,N,i,at)}Rf(dt,e)})}function La(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Vr(t,e){for(var i=e+"Capture",l=[];t!==null;){var g=t,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Jn(t,i),g!=null&&l.unshift(La(t,g,y)),g=Jn(t,e),g!=null&&l.push(La(t,g,y))),t=t.return}return l}function Gn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kf(t,e,i,l,g){for(var y=e._reactName,T=[];i!==null&&i!==l;){var A=i,L=A.alternate,N=A.stateNode;if(A=A.tag,L!==null&&L===l)break;A!==5&&A!==26&&A!==27||N===null||(L=N,g?(N=Jn(i,y),N!=null&&T.unshift(La(i,N,L))):g||(N=Jn(i,y),N!=null&&T.push(La(i,N,L)))),i=i.return}T.length!==0&&t.push({event:e,listeners:T})}var pg=/\r\n?/g,yg=/\u0000|\uFFFD/g;function Lf(t){return(typeof t=="string"?t:""+t).replace(pg,`
`).replace(yg,"")}function Bf(t,e){return e=Lf(e),Lf(t)===e}function qr(){}function Nt(t,e,i,l,g,y){switch(i){case"children":typeof l=="string"?e==="body"||e==="textarea"&&l===""||yn(t,l):(typeof l=="number"||typeof l=="bigint")&&e!=="body"&&yn(t,""+l);break;case"className":tr(t,"class",l);break;case"tabIndex":tr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":tr(t,i,l);break;case"style":Go(t,l,y);break;case"data":if(e!=="object"){tr(t,"data",l);break}case"src":case"href":if(l===""&&(e!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=nr(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(i==="formAction"?(e!=="input"&&Nt(t,e,"name",g.name,g,null),Nt(t,e,"formEncType",g.formEncType,g,null),Nt(t,e,"formMethod",g.formMethod,g,null),Nt(t,e,"formTarget",g.formTarget,g,null)):(Nt(t,e,"encType",g.encType,g,null),Nt(t,e,"method",g.method,g,null),Nt(t,e,"target",g.target,g,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=nr(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=qr);break;case"onScroll":l!=null&&zt("scroll",t);break;case"onScrollEnd":l!=null&&zt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(j(61));if(i=l.__html,i!=null){if(g.children!=null)throw Error(j(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=nr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":zt("beforetoggle",t),zt("toggle",t),$a(t,"popover",l);break;case"xlinkActuate":ai(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ai(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ai(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ai(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ai(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ai(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ai(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ai(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ai(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$a(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Wh.get(i)||i,$a(t,i,l))}}function Zl(t,e,i,l,g,y){switch(i){case"style":Go(t,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(j(61));if(i=l.__html,i!=null){if(g.children!=null)throw Error(j(60));t.innerHTML=i}}break;case"children":typeof l=="string"?yn(t,l):(typeof l=="number"||typeof l=="bigint")&&yn(t,""+l);break;case"onScroll":l!=null&&zt("scroll",t);break;case"onScrollEnd":l!=null&&zt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(g=i.endsWith("Capture"),e=i.slice(2,g?i.length-7:void 0),y=t[Se]||null,y=y!=null?y[i]:null,typeof y=="function"&&t.removeEventListener(e,y,g),typeof l=="function")){typeof y!="function"&&y!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(e,l,g);break t}i in t?t[i]=l:l===!0?t.setAttribute(i,""):$a(t,i,l)}}}function de(t,e,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",t),zt("load",t);var l=!1,g=!1,y;for(y in i)if(i.hasOwnProperty(y)){var T=i[y];if(T!=null)switch(y){case"src":l=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Nt(t,e,y,T,i,null)}}g&&Nt(t,e,"srcSet",i.srcSet,i,null),l&&Nt(t,e,"src",i.src,i,null);return;case"input":zt("invalid",t);var A=y=T=g=null,L=null,N=null;for(l in i)if(i.hasOwnProperty(l)){var at=i[l];if(at!=null)switch(l){case"name":g=at;break;case"type":T=at;break;case"checked":L=at;break;case"defaultChecked":N=at;break;case"value":y=at;break;case"defaultValue":A=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(j(137,e));break;default:Nt(t,e,l,at,i,null)}}Yo(t,y,A,L,N,T,g,!1),er(t);return;case"select":zt("invalid",t),l=T=y=null;for(g in i)if(i.hasOwnProperty(g)&&(A=i[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:Nt(t,e,g,A,i,null)}e=y,i=T,t.multiple=!!l,e!=null?pn(t,!!l,e,!1):i!=null&&pn(t,!!l,i,!0);return;case"textarea":zt("invalid",t),y=g=l=null;for(T in i)if(i.hasOwnProperty(T)&&(A=i[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(j(91));break;default:Nt(t,e,T,A,i,null)}No(t,l,g,y),er(t);return;case"option":for(L in i)if(i.hasOwnProperty(L)&&(l=i[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Nt(t,e,L,l,i,null)}return;case"dialog":zt("cancel",t),zt("close",t);break;case"iframe":case"object":zt("load",t);break;case"video":case"audio":for(l=0;l<ka.length;l++)zt(ka[l],t);break;case"image":zt("error",t),zt("load",t);break;case"details":zt("toggle",t);break;case"embed":case"source":case"link":zt("error",t),zt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in i)if(i.hasOwnProperty(N)&&(l=i[N],l!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Nt(t,e,N,l,i,null)}return;default:if(ds(e)){for(at in i)i.hasOwnProperty(at)&&(l=i[at],l!==void 0&&Zl(t,e,at,l,i,void 0));return}}for(A in i)i.hasOwnProperty(A)&&(l=i[A],l!=null&&Nt(t,e,A,l,i,null))}function _g(t,e,i,l){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,A=null,L=null,N=null,at=null;for(it in i){var dt=i[it];if(i.hasOwnProperty(it)&&dt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":L=dt;default:l.hasOwnProperty(it)||Nt(t,e,it,null,l,dt)}}for(var J in l){var it=l[J];if(dt=i[J],l.hasOwnProperty(J)&&(it!=null||dt!=null))switch(J){case"type":y=it;break;case"name":g=it;break;case"checked":N=it;break;case"defaultChecked":at=it;break;case"value":T=it;break;case"defaultValue":A=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(j(137,e));break;default:it!==dt&&Nt(t,e,J,it,l,dt)}}fs(t,T,A,L,N,at,y,g);return;case"select":it=T=A=J=null;for(y in i)if(L=i[y],i.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":it=L;default:l.hasOwnProperty(y)||Nt(t,e,y,null,l,L)}for(g in l)if(y=l[g],L=i[g],l.hasOwnProperty(g)&&(y!=null||L!=null))switch(g){case"value":J=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==L&&Nt(t,e,g,y,l,L)}e=A,i=T,l=it,J!=null?pn(t,!!i,J,!1):!!l!=!!i&&(e!=null?pn(t,!!i,e,!0):pn(t,!!i,i?[]:"",!1));return;case"textarea":it=J=null;for(A in i)if(g=i[A],i.hasOwnProperty(A)&&g!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Nt(t,e,A,null,l,g)}for(T in l)if(g=l[T],y=i[T],l.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":J=g;break;case"defaultValue":it=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(j(91));break;default:g!==y&&Nt(t,e,T,g,l,y)}Xo(t,J,it);return;case"option":for(var Tt in i)if(J=i[Tt],i.hasOwnProperty(Tt)&&J!=null&&!l.hasOwnProperty(Tt))switch(Tt){case"selected":t.selected=!1;break;default:Nt(t,e,Tt,null,l,J)}for(L in l)if(J=l[L],it=i[L],l.hasOwnProperty(L)&&J!==it&&(J!=null||it!=null))switch(L){case"selected":t.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Nt(t,e,L,J,l,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in i)J=i[Dt],i.hasOwnProperty(Dt)&&J!=null&&!l.hasOwnProperty(Dt)&&Nt(t,e,Dt,null,l,J);for(N in l)if(J=l[N],it=i[N],l.hasOwnProperty(N)&&J!==it&&(J!=null||it!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(j(137,e));break;default:Nt(t,e,N,J,l,it)}return;default:if(ds(e)){for(var $t in i)J=i[$t],i.hasOwnProperty($t)&&J!==void 0&&!l.hasOwnProperty($t)&&Zl(t,e,$t,void 0,l,J);for(at in l)J=l[at],it=i[at],!l.hasOwnProperty(at)||J===it||J===void 0&&it===void 0||Zl(t,e,at,J,l,it);return}}for(var q in i)J=i[q],i.hasOwnProperty(q)&&J!=null&&!l.hasOwnProperty(q)&&Nt(t,e,q,null,l,J);for(dt in l)J=l[dt],it=i[dt],!l.hasOwnProperty(dt)||J===it||J==null&&it==null||Nt(t,e,dt,J,l,it)}var Jl=null,$l=null;function Wr(t){return t.nodeType===9?t:t.ownerDocument}function zf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pf(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function to(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eo=null;function Sg(){var t=window.event;return t&&t.type==="popstate"?t===eo?!1:(eo=t,!0):(eo=null,!1)}var Uf=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Cg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(t){return Hf.resolve(null).then(t).catch(Tg)}:Uf;function Tg(t){setTimeout(function(){throw t})}function io(t,e){var i=e,l=0;do{var g=i.nextSibling;if(t.removeChild(i),g&&g.nodeType===8)if(i=g.data,i==="/$"){if(l===0){t.removeChild(g),Na(e);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=g}while(i);Na(e)}function no(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var i=e;switch(e=e.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":no(i),cs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function xg(t,e,i,l){for(;t.nodeType===1;){var g=i;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Kn])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==g.rel||t.getAttribute("href")!==(g.href==null?null:g.href)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||t.getAttribute("title")!==(g.title==null?null:g.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(g.src==null?null:g.src)||t.getAttribute("type")!==(g.type==null?null:g.type)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=We(t.nextSibling),t===null)break}return null}function Og(t,e,i){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=We(t.nextSibling),t===null))return null;return t}function We(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}function Yf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}function Xf(t,e,i){switch(e=Wr(i),t){case"html":if(t=e.documentElement,!t)throw Error(j(452));return t;case"head":if(t=e.head,!t)throw Error(j(453));return t;case"body":if(t=e.body,!t)throw Error(j(454));return t;default:throw Error(j(451))}}var Ne=new Map,Nf=new Set;function Ir(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var _i=D.d;D.d={f:wg,r:Eg,D:Ag,C:Dg,L:Mg,m:Rg,X:kg,S:jg,M:Lg};function wg(){var t=_i.f(),e=Yr();return t||e}function Eg(t){var e=gn(t);e!==null&&e.tag===5&&e.type==="form"?gc(e):_i.r(t)}var Vn=typeof document>"u"?null:document;function Ff(t,e,i){var l=Vn;if(l&&typeof e=="string"&&e){var g=je(e);g='link[rel="'+t+'"][href="'+g+'"]',typeof i=="string"&&(g+='[crossorigin="'+i+'"]'),Nf.has(g)||(Nf.add(g),t={rel:t,crossOrigin:i,href:e},l.querySelector(g)===null&&(e=l.createElement("link"),de(e,"link",t),le(e),l.head.appendChild(e)))}}function Ag(t){_i.D(t),Ff("dns-prefetch",t,null)}function Dg(t,e){_i.C(t,e),Ff("preconnect",t,e)}function Mg(t,e,i){_i.L(t,e,i);var l=Vn;if(l&&t&&e){var g='link[rel="preload"][as="'+je(e)+'"]';e==="image"&&i&&i.imageSrcSet?(g+='[imagesrcset="'+je(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(g+='[imagesizes="'+je(i.imageSizes)+'"]')):g+='[href="'+je(t)+'"]';var y=g;switch(e){case"style":y=qn(t);break;case"script":y=Wn(t)}Ne.has(y)||(t=K({rel:"preload",href:e==="image"&&i&&i.imageSrcSet?void 0:t,as:e},i),Ne.set(y,t),l.querySelector(g)!==null||e==="style"&&l.querySelector(Ba(y))||e==="script"&&l.querySelector(za(y))||(e=l.createElement("link"),de(e,"link",t),le(e),l.head.appendChild(e)))}}function Rg(t,e){_i.m(t,e);var i=Vn;if(i&&t){var l=e&&typeof e.as=="string"?e.as:"script",g='link[rel="modulepreload"][as="'+je(l)+'"][href="'+je(t)+'"]',y=g;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Wn(t)}if(!Ne.has(y)&&(t=K({rel:"modulepreload",href:t},e),Ne.set(y,t),i.querySelector(g)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(za(y)))return}l=i.createElement("link"),de(l,"link",t),le(l),i.head.appendChild(l)}}}function jg(t,e,i){_i.S(t,e,i);var l=Vn;if(l&&t){var g=vn(l).hoistableStyles,y=qn(t);e=e||"default";var T=g.get(y);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(Ba(y)))A.loading=5;else{t=K({rel:"stylesheet",href:t,"data-precedence":e},i),(i=Ne.get(y))&&ao(t,i);var L=T=l.createElement("link");le(L),de(L,"link",t),L._p=new Promise(function(N,at){L.onload=N,L.onerror=at}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Qr(T,e,l)}T={type:"stylesheet",instance:T,count:1,state:A},g.set(y,T)}}}function kg(t,e){_i.X(t,e);var i=Vn;if(i&&t){var l=vn(i).hoistableScripts,g=Wn(t),y=l.get(g);y||(y=i.querySelector(za(g)),y||(t=K({src:t,async:!0},e),(e=Ne.get(g))&&ro(t,e),y=i.createElement("script"),le(y),de(y,"link",t),i.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(g,y))}}function Lg(t,e){_i.M(t,e);var i=Vn;if(i&&t){var l=vn(i).hoistableScripts,g=Wn(t),y=l.get(g);y||(y=i.querySelector(za(g)),y||(t=K({src:t,async:!0,type:"module"},e),(e=Ne.get(g))&&ro(t,e),y=i.createElement("script"),le(y),de(y,"link",t),i.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(g,y))}}function Gf(t,e,i,l){var g=(g=$.current)?Ir(g):null;if(!g)throw Error(j(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(e=qn(i.href),i=vn(g).hoistableStyles,l=i.get(e),l||(l={type:"style",instance:null,count:0,state:null},i.set(e,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=qn(i.href);var y=vn(g).hoistableStyles,T=y.get(t);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,T),(y=g.querySelector(Ba(t)))&&!y._p&&(T.instance=y,T.state.loading=5),Ne.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ne.set(t,i),y||Bg(g,t,i,T.state))),e&&l===null)throw Error(j(528,""));return T}if(e&&l!==null)throw Error(j(529,""));return null;case"script":return e=i.async,i=i.src,typeof i=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Wn(i),i=vn(g).hoistableScripts,l=i.get(e),l||(l={type:"script",instance:null,count:0,state:null},i.set(e,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,t))}}function qn(t){return'href="'+je(t)+'"'}function Ba(t){return'link[rel="stylesheet"]['+t+"]"}function Vf(t){return K({},t,{"data-precedence":t.precedence,precedence:null})}function Bg(t,e,i,l){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?l.loading=1:(e=t.createElement("link"),l.preload=e,e.addEventListener("load",function(){return l.loading|=1}),e.addEventListener("error",function(){return l.loading|=2}),de(e,"link",i),le(e),t.head.appendChild(e))}function Wn(t){return'[src="'+je(t)+'"]'}function za(t){return"script[async]"+t}function qf(t,e,i){if(e.count++,e.instance===null)switch(e.type){case"style":var l=t.querySelector('style[data-href~="'+je(i.href)+'"]');if(l)return e.instance=l,le(l),l;var g=K({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),le(l),de(l,"style",g),Qr(l,i.precedence,t),e.instance=l;case"stylesheet":g=qn(i.href);var y=t.querySelector(Ba(g));if(y)return e.state.loading|=4,e.instance=y,le(y),y;l=Vf(i),(g=Ne.get(g))&&ao(l,g),y=(t.ownerDocument||t).createElement("link"),le(y);var T=y;return T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),de(y,"link",l),e.state.loading|=4,Qr(y,i.precedence,t),e.instance=y;case"script":return y=Wn(i.src),(g=t.querySelector(za(y)))?(e.instance=g,le(g),g):(l=i,(g=Ne.get(y))&&(l=K({},i),ro(l,g)),t=t.ownerDocument||t,g=t.createElement("script"),le(g),de(g,"link",l),t.head.appendChild(g),e.instance=g);case"void":return null;default:throw Error(j(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(l=e.instance,e.state.loading|=4,Qr(l,i.precedence,t));return e.instance}function Qr(t,e,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=l.length?l[l.length-1]:null,y=g,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===e)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(t,y.nextSibling):(e=i.nodeType===9?i.head:i,e.insertBefore(t,e.firstChild))}function ao(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ro(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Kr=null;function Wf(t,e,i){if(Kr===null){var l=new Map,g=Kr=new Map;g.set(i,l)}else g=Kr,l=g.get(i),l||(l=new Map,g.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),g=0;g<i.length;g++){var y=i[g];if(!(y[Kn]||y[ve]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(e)||"";T=t+T;var A=l.get(T);A?A.push(y):l.set(T,[y])}}return l}function If(t,e,i){t=t.ownerDocument||t,t.head.insertBefore(i,e==="title"?t.querySelector("head > title"):null)}function zg(t,e,i){if(i===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Qf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pa=null;function Pg(){}function Ug(t,e,i){if(Pa===null)throw Error(j(475));var l=Pa;if(e.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var g=qn(i.href),y=t.querySelector(Ba(g));if(y){t=y._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Zr.bind(l),t.then(l,l)),e.state.loading|=4,e.instance=y,le(y);return}y=t.ownerDocument||t,i=Vf(i),(g=Ne.get(g))&&ao(i,g),y=y.createElement("link"),le(y);var T=y;T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),de(y,"link",i),e.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(l.count++,e=Zr.bind(l),t.addEventListener("load",e),t.addEventListener("error",e))}}function Hg(){if(Pa===null)throw Error(j(475));var t=Pa;return t.stylesheets&&t.count===0&&so(t,t.stylesheets),0<t.count?function(e){var i=setTimeout(function(){if(t.stylesheets&&so(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(i)}}:null}function Zr(){if(this.count--,this.count===0){if(this.stylesheets)so(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Jr=null;function so(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Jr=new Map,e.forEach(Yg,t),Jr=null,Zr.call(t))}function Yg(t,e){if(!(e.state.loading&4)){var i=Jr.get(t);if(i)var l=i.get(null);else{i=new Map,Jr.set(t,i);for(var g=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(i.set(T.dataset.precedence,T),l=T)}l&&i.set(null,l)}g=e.instance,T=g.getAttribute("data-precedence"),y=i.get(T)||l,y===l&&i.set(null,g),i.set(T,g),this.count++,l=Zr.bind(this),g.addEventListener("load",l),g.addEventListener("error",l),y?y.parentNode.insertBefore(g,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(g,t.firstChild)),e.state.loading|=4}}var Ua={$$typeof:n,Provider:null,Consumer:null,_currentValue:w,_currentValue2:w,_threadCount:0};function Xg(t,e,i,l,g,y,T,A){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=l,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Kf(t,e,i,l,g,y,T,A,L,N,at,dt){return t=new Xg(t,e,i,T,A,L,N,dt),e=1,y===!0&&(e|=24),y=Ye(3,null,null,e),t.current=y,y.stateNode=t,e=Us(),e.refCount++,t.pooledCache=e,e.refCount++,y.memoizedState={element:l,isDehydrated:i,cache:e},yl(y),t}function Zf(t){return t?(t=On,t):On}function Jf(t,e,i,l,g,y){g=Zf(g),l.context===null?l.context=g:l.pendingContext=g,l=Di(e),l.payload={element:i},y=y===void 0?null:y,y!==null&&(l.callback=y),i=Mi(t,l,e),i!==null&&(_e(i,t,e),ba(i,t,e))}function $f(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function lo(t,e){$f(t,e),(t=t.alternate)&&$f(t,e)}function th(t){if(t.tag===13){var e=Ci(t,67108864);e!==null&&_e(e,t,67108864),lo(t,67108864)}}var $r=!0;function Ng(t,e,i,l){var g=H.T;H.T=null;var y=D.p;try{D.p=2,oo(t,e,i,l)}finally{D.p=y,H.T=g}}function Fg(t,e,i,l){var g=H.T;H.T=null;var y=D.p;try{D.p=8,oo(t,e,i,l)}finally{D.p=y,H.T=g}}function oo(t,e,i,l){if($r){var g=uo(l);if(g===null)Kl(t,e,l,ts,i),ih(t,l);else if(Vg(g,t,e,i,l))l.stopPropagation();else if(ih(t,l),e&4&&-1<Gg.indexOf(t)){for(;g!==null;){var y=gn(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Gi(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var L=1<<31-xe(T);A.entanglements[1]|=L,T&=~L}ei(y),(Qt&6)===0&&(Pr=wt()+500,ja(0))}}break;case 13:A=Ci(y,2),A!==null&&_e(A,y,2),Yr(),lo(y,2)}if(y=uo(l),y===null&&Kl(t,e,l,ts,i),y===g)break;g=y}g!==null&&l.stopPropagation()}else Kl(t,e,l,null,i)}}function uo(t){return t=vs(t),co(t)}var ts=null;function co(t){if(ts=null,t=Vi(t),t!==null){var e=G(t);if(e===null)t=null;else{var i=e.tag;if(i===13){if(t=x(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ts=t,null}function eh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bt()){case Ft:return 2;case Ut:return 8;case ee:case Kt:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var fo=!1,Pi=null,Ui=null,Hi=null,Ha=new Map,Ya=new Map,Yi=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ih(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(e.pointerId)}}function Xa(t,e,i,l,g,y){return t===null||t.nativeEvent!==y?(t={blockedOn:e,domEventName:i,eventSystemFlags:l,nativeEvent:y,targetContainers:[g]},e!==null&&(e=gn(e),e!==null&&th(e)),t):(t.eventSystemFlags|=l,e=t.targetContainers,g!==null&&e.indexOf(g)===-1&&e.push(g),t)}function Vg(t,e,i,l,g){switch(e){case"focusin":return Pi=Xa(Pi,t,e,i,l,g),!0;case"dragenter":return Ui=Xa(Ui,t,e,i,l,g),!0;case"mouseover":return Hi=Xa(Hi,t,e,i,l,g),!0;case"pointerover":var y=g.pointerId;return Ha.set(y,Xa(Ha.get(y)||null,t,e,i,l,g)),!0;case"gotpointercapture":return y=g.pointerId,Ya.set(y,Xa(Ya.get(y)||null,t,e,i,l,g)),!0}return!1}function nh(t){var e=Vi(t.target);if(e!==null){var i=G(e);if(i!==null){if(e=i.tag,e===13){if(e=x(i),e!==null){t.blockedOn=e,Hh(t.priority,function(){if(i.tag===13){var l=De(),g=Ci(i,l);g!==null&&_e(g,i,l),lo(i,l)}});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function es(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=uo(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);gs=l,i.target.dispatchEvent(l),gs=null}else return e=gn(i),e!==null&&th(e),t.blockedOn=i,!1;e.shift()}return!0}function ah(t,e,i){es(t)&&i.delete(e)}function qg(){fo=!1,Pi!==null&&es(Pi)&&(Pi=null),Ui!==null&&es(Ui)&&(Ui=null),Hi!==null&&es(Hi)&&(Hi=null),Ha.forEach(ah),Ya.forEach(ah)}function is(t,e){t.blockedOn===e&&(t.blockedOn=null,fo||(fo=!0,M.unstable_scheduleCallback(M.unstable_NormalPriority,qg)))}var ns=null;function rh(t){ns!==t&&(ns=t,M.unstable_scheduleCallback(M.unstable_NormalPriority,function(){ns===t&&(ns=null);for(var e=0;e<t.length;e+=3){var i=t[e],l=t[e+1],g=t[e+2];if(typeof l!="function"){if(co(l||i)===null)continue;break}var y=gn(i);y!==null&&(t.splice(e,3),e-=3,tl(y,{pending:!0,data:g,method:i.method,action:l},l,g))}}))}function Na(t){function e(L){return is(L,t)}Pi!==null&&is(Pi,t),Ui!==null&&is(Ui,t),Hi!==null&&is(Hi,t),Ha.forEach(e),Ya.forEach(e);for(var i=0;i<Yi.length;i++){var l=Yi[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Yi.length&&(i=Yi[0],i.blockedOn===null);)nh(i),i.blockedOn===null&&Yi.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var g=i[l],y=i[l+1],T=g[Se]||null;if(typeof y=="function")T||rh(i);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Se]||null)A=T.formAction;else if(co(g)!==null)continue}else A=T.action;typeof A=="function"?i[l+1]=A:(i.splice(l,3),l-=3),rh(i)}}}function ho(t){this._internalRoot=t}as.prototype.render=ho.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));var i=e.current,l=De();Jf(i,l,t,e,null,null)},as.prototype.unmount=ho.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;t.tag===0&&Nn(),Jf(t.current,2,null,t,null,null),Yr(),e[dn]=null}};function as(t){this._internalRoot=t}as.prototype.unstable_scheduleHydration=function(t){if(t){var e=jo();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Yi.length&&e!==0&&e<Yi[i].priority;i++);Yi.splice(i,0,t),i===0&&nh(t)}};var sh=m.version;if(sh!=="19.0.0")throw Error(j(527,sh,"19.0.0"));D.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=E(e),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var Wg={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:H,findFiberByHostInstance:Vi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{Fi=rs.inject(Wg),ge=rs}catch{}}return Ga.createRoot=function(t,e){if(!nt(t))throw Error(j(299));var i=!1,l="",g=Cc,y=Tc,T=xc,A=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(l=e.identifierPrefix),e.onUncaughtError!==void 0&&(g=e.onUncaughtError),e.onCaughtError!==void 0&&(y=e.onCaughtError),e.onRecoverableError!==void 0&&(T=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(A=e.unstable_transitionCallbacks)),e=Kf(t,1,!1,null,null,i,l,g,y,T,A,null),t[dn]=e.current,Ql(t.nodeType===8?t.parentNode:t),new ho(e)},Ga.hydrateRoot=function(t,e,i){if(!nt(t))throw Error(j(299));var l=!1,g="",y=Cc,T=Tc,A=xc,L=null,N=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(T=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(L=i.unstable_transitionCallbacks),i.formState!==void 0&&(N=i.formState)),e=Kf(t,1,!0,e,i??null,l,g,y,T,A,L,N),e.context=Zf(null),i=e.current,l=De(),g=Di(l),g.callback=null,Mi(i,g,l),e.current.lanes=l,Qn(e,l),ei(e),t[dn]=e.current,Ql(t),new as(e)},Ga.version="19.0.0",Ga}var mh;function av(){if(mh)return mo.exports;mh=1;function M(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M)}catch(m){console.error(m)}}return M(),mo.exports=nv(),mo.exports}var rv=av();const Qa=Te.createContext(),sv={blueChamps:["","","","",""],redChamps:["","","","",""],bluePick:0,redPick:0,currentPick:0,currentTeam:"blue"};function lv(M,m){const V=[0,3,4,7,8];switch(V.includes(M.currentPick+1),m.type){case"ADD_BLUE_CHAMP":return{blueChamps:M.blueChamps.map((j,nt)=>nt===M.bluePick?m.payload.champ:j),redChamps:M.redChamps,bluePick:M.bluePick+1,redPick:M.redPick,currentPick:M.currentPick+1,currentTeam:V.includes(M.currentPick+1)?"blue":"red"};case"REMOVE_BLUE_CHAMP":return{blueChamps:M.blueChamps.map((j,nt)=>j===m.payload.champ?"":j),redChamps:M.redChamps,bluePick:M.bluePick-1,redPick:M.redPick,currentPick:M.currentPick-1,currentTeam:"blue"};case"ADD_RED_CHAMP":return{redChamps:M.redChamps.map((j,nt)=>nt===M.redPick?m.payload.champ:j),blueChamps:M.blueChamps,bluePick:M.bluePick,redPick:M.redPick+1,currentPick:M.currentPick+1,currentTeam:V.includes(M.currentPick+1)?"blue":"red"};case"REMOVE_RED_CHAMP":return{redChamps:M.redChamps.map((j,nt)=>j===m.payload.champ?"":j),blueChamps:M.blueChamps,bluePick:M.bluePick,redPick:M.redPick-1,currentPick:M.currentPick-1,currentTeam:"red"}}}const ov=({children:M})=>{const[m,V]=Te.useReducer(lv,sv);return Mt.jsx(Qa.Provider,{value:{state:m,dispatch:V},children:M})},ph=({champ:M,id:m,dimStyle:V,picked:j})=>{const nt="https://cdn.communitydragon.org/latest/champion/generic/square",{state:ht,dispatch:St}=Te.useContext(Qa),v=u=>{const c=ht.blueChamps.includes(M),h=ht.redChamps.includes(M);if(c){St({type:"REMOVE_BLUE_CHAMP",payload:{champ:M}});return}if(h){St({type:"REMOVE_RED_CHAMP",payload:{champ:M}});return}if(ht.currentTeam==="blue"){if(c||h){alert(`${M} already picked`);return}St({type:"ADD_BLUE_CHAMP",payload:{id:m,champ:M}})}else St({type:"ADD_RED_CHAMP",payload:{id:m,champ:M}})};return M?Mt.jsxs("div",{className:"champ-wrapper",children:[Mt.jsx("img",{className:"champ",onClick:v,src:nt.replaceAll("generic",m),style:V}),Mt.jsx("p",{className:"name",children:M})]}):Mt.jsx("div",{className:"champ"})},uv={Ambessa:{name:"Ambessa",path:"ambessa_circle_0.domina.png"},Aurora:{name:"Aurora",path:"aurora_circle_0.aurora.png"},Mel:{name:"Mel",path:"mel_circle_0.mel.png"},Rammus:{name:"Rammus",path:"armordillo_circle.png"},Orianna:{name:"Orianna",path:"oriana_circle.png"},Teemo:{name:"Teemo",path:"teemo_circle_0.asu_teemo.png"},Anivia:{name:"Anivia",path:"cryophoenix_circle.png"},Wukong:{name:"monkeyking",path:"monkeyking_circle.png"},Viktor:{name:"Viktor",path:"viktor_circle_0.viktorvgu.png"},Zilean:{name:"Zilean",path:"chronokeeper_circle.png"},Shaco:{name:"Shaco",path:"jester_circle.png"},Blitzcrank:{name:"Blitzcrank",path:"steamgolem_circle.png"},"Cho'Gath":{name:"Chogath",path:"greenterror_circle.png"},"Renata Glasc":{name:"Renata",path:"renata_circle_0.png"},"Nunu & Willump":{name:"Nunu",path:"nunu_circle_0.png"}};var So={};const cv={},fv=Object.freeze(Object.defineProperty({__proto__:null,default:cv},Symbol.toStringTag,{value:"Module"})),bo=Qg(fv);var yh;function hv(){return yh||(yh=1,function(M){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var m=m||{version:"5.4.2"};if(M.fabric=m,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?m.document=document:m.document=document.implementation.createHTMLDocument(""),m.window=window;else{var V=bo,j=new V.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;m.document=j.document,m.jsdomImplForWrapper=bo.implForWrapper,m.nodeCanvas=bo.Canvas,m.window=j,DOMParser=m.window.DOMParser}m.isTouchSupported="ontouchstart"in m.window||"ontouchstart"in m.document||m.window&&m.window.navigator&&m.window.navigator.maxTouchPoints>0,m.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",m.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],m.DPI=96,m.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",m.commaWsp="(?:\\s+,?\\s*|,\\s*)",m.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,m.reNonWord=/[ \n\.,;!\?\-]/,m.fontPaths={},m.iMatrix=[1,0,0,1,0,0],m.svgNS="http://www.w3.org/2000/svg",m.perfLimitSizeTotal=2097152,m.maxCacheSideLimit=4096,m.minCacheSideLimit=256,m.charWidthsCache={},m.textureSize=2048,m.disableStyleCopyPaste=!1,m.enableGLFiltering=!0,m.devicePixelRatio=m.window.devicePixelRatio||m.window.webkitDevicePixelRatio||m.window.mozDevicePixelRatio||1,m.browserShadowBlurConstant=1,m.arcToSegmentsCache={},m.boundsOfCurveCache={},m.cachesBoundsOfCurve=!0,m.forceGLPutImageData=!1,m.initFilterBackend=function(){if(m.enableGLFiltering&&m.isWebglSupported&&m.isWebglSupported(m.textureSize))return console.log("max texture size: "+m.maxTextureSize),new m.WebglFilterBackend({tileSize:m.textureSize});if(m.Canvas2dFilterBackend)return new m.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=m),function(){function v(n,s){if(this.__eventListeners[n]){var f=this.__eventListeners[n];s?f[f.indexOf(s)]=!1:m.util.array.fill(f,!1)}}function u(n,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var f in n)this.on(f,n[f]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(s);return this}function c(n,s){var f=(function(){s.apply(this,arguments),this.off(n,f)}).bind(this);this.on(n,f)}function h(n,s){if(arguments.length===1)for(var f in n)c.call(this,f,n[f]);else c.call(this,n,s);return this}function a(n,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)v.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var f in n)v.call(this,f,n[f]);else v.call(this,n,s);return this}function r(n,s){if(!this.__eventListeners)return this;var f=this.__eventListeners[n];if(!f)return this;for(var o=0,d=f.length;o<d;o++)f[o]&&f[o].call(this,s||{});return this.__eventListeners[n]=f.filter(function(p){return p!==!1}),this}m.Observable={fire:r,on:u,once:h,off:a}}(),m.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var v=0,u=arguments.length;v<u;v++)this._onObjectAdded(arguments[v]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(v,u,c){var h=this._objects;return c?h[u]=v:h.splice(u,0,v),this._onObjectAdded&&this._onObjectAdded(v),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var v=this._objects,u,c=!1,h=0,a=arguments.length;h<a;h++)u=v.indexOf(arguments[h]),u!==-1&&(c=!0,v.splice(u,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(v,u){for(var c=this.getObjects(),h=0,a=c.length;h<a;h++)v.call(u,c[h],h,c);return this},getObjects:function(v){return typeof v>"u"?this._objects.concat():this._objects.filter(function(u){return u.type===v})},item:function(v){return this._objects[v]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(v,u){return this._objects.indexOf(v)>-1?!0:u?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(v,!0)}):!1},complexity:function(){return this._objects.reduce(function(v,u){return v+=u.complexity?u.complexity():0,v},0)}},m.CommonMethods={_setOptions:function(v){for(var u in v)this.set(u,v[u])},_initGradient:function(v,u){v&&v.colorStops&&!(v instanceof m.Gradient)&&this.set(u,new m.Gradient(v))},_initPattern:function(v,u,c){v&&v.source&&!(v instanceof m.Pattern)?this.set(u,new m.Pattern(v,c)):c&&c()},_setObject:function(v){for(var u in v)this._set(u,v[u])},set:function(v,u){return typeof v=="object"?this._setObject(v):this._set(v,u),this},_set:function(v,u){this[v]=u},toggle:function(v){var u=this.get(v);return typeof u=="boolean"&&this.set(v,!u),this},get:function(v){return this[v]}},function(v){var u=Math.sqrt,c=Math.atan2,h=Math.pow,a=Math.PI/180,r=Math.PI/2;m.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var s=n/r;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var s=n/r,f=1;switch(n<0&&(f=-1),s){case 1:return f;case 2:return 0;case 3:return-f}return Math.sin(n)},removeFromArray:function(n,s){var f=n.indexOf(s);return f!==-1&&n.splice(f,1),n},getRandomInt:function(n,s){return Math.floor(Math.random()*(s-n+1))+n},degreesToRadians:function(n){return n*a},radiansToDegrees:function(n){return n/a},rotatePoint:function(n,s,f){var o=new m.Point(n.x-s.x,n.y-s.y),d=m.util.rotateVector(o,f);return new m.Point(d.x,d.y).addEquals(s)},rotateVector:function(n,s){var f=m.util.sin(s),o=m.util.cos(s),d=n.x*o-n.y*f,p=n.x*f+n.y*o;return{x:d,y:p}},createVector:function(n,s){return new m.Point(s.x-n.x,s.y-n.y)},calcAngleBetweenVectors:function(n,s){return Math.acos((n.x*s.x+n.y*s.y)/(Math.hypot(n.x,n.y)*Math.hypot(s.x,s.y)))},getHatVector:function(n){return new m.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,s,f){var o=m.util.createVector(n,s),d=m.util.createVector(n,f),p=m.util.calcAngleBetweenVectors(o,d),_=m.util.calcAngleBetweenVectors(m.util.rotateVector(o,p),d),S=p*(_===0?1:-1)/2;return{vector:m.util.getHatVector(m.util.rotateVector(o,S)),angle:p}},projectStrokeOnPoints:function(n,s,f){var o=[],d=s.strokeWidth/2,p=s.strokeUniform?new m.Point(1/s.scaleX,1/s.scaleY):new m.Point(1,1),_=function(S){var C=d/Math.hypot(S.x,S.y);return new m.Point(S.x*C*p.x,S.y*C*p.y)};return n.length<=1||n.forEach(function(S,C){var O=new m.Point(S.x,S.y),k,P;C===0?(P=n[C+1],k=f?_(m.util.createVector(P,O)).addEquals(O):n[n.length-1]):C===n.length-1?(k=n[C-1],P=f?_(m.util.createVector(k,O)).addEquals(O):n[0]):(k=n[C-1],P=n[C+1]);var H=m.util.getBisector(O,k,P),K=H.vector,ct=H.angle,mt,pt;if(s.strokeLineJoin==="miter"&&(mt=-d/Math.sin(ct/2),pt=new m.Point(K.x*mt*p.x,K.y*mt*p.y),Math.hypot(pt.x,pt.y)/d<=s.strokeMiterLimit)){o.push(O.add(pt)),o.push(O.subtract(pt));return}mt=-d*Math.SQRT2,pt=new m.Point(K.x*mt*p.x,K.y*mt*p.y),o.push(O.add(pt)),o.push(O.subtract(pt))}),o},transformPoint:function(n,s,f){return f?new m.Point(s[0]*n.x+s[2]*n.y,s[1]*n.x+s[3]*n.y):new m.Point(s[0]*n.x+s[2]*n.y+s[4],s[1]*n.x+s[3]*n.y+s[5])},makeBoundingBoxFromPoints:function(n,s){if(s)for(var f=0;f<n.length;f++)n[f]=m.util.transformPoint(n[f],s);var o=[n[0].x,n[1].x,n[2].x,n[3].x],d=m.util.array.min(o),p=m.util.array.max(o),_=p-d,S=[n[0].y,n[1].y,n[2].y,n[3].y],C=m.util.array.min(S),O=m.util.array.max(S),k=O-C;return{left:d,top:C,width:_,height:k}},invertTransform:function(n){var s=1/(n[0]*n[3]-n[1]*n[2]),f=[s*n[3],-s*n[1],-s*n[2],s*n[0]],o=m.util.transformPoint({x:n[4],y:n[5]},f,!0);return f[4]=-o.x,f[5]=-o.y,f},toFixed:function(n,s){return parseFloat(Number(n).toFixed(s))},parseUnit:function(n,s){var f=/\D{0,2}$/.exec(n),o=parseFloat(n);switch(s||(s=m.Text.DEFAULT_SVG_FONT_SIZE),f[0]){case"mm":return o*m.DPI/25.4;case"cm":return o*m.DPI/2.54;case"in":return o*m.DPI;case"pt":return o*m.DPI/72;case"pc":return o*m.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(n,s){return n=m.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),m.util.resolveNamespace(s)[n]},getSvgAttributes:function(n){var s=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(n){if(!n)return m;var s=n.split("."),f=s.length,o,d=v||m.window;for(o=0;o<f;++o)d=d[s[o]];return d},loadImage:function(n,s,f,o){if(!n){s&&s.call(f,n);return}var d=m.util.createImage(),p=function(){s&&s.call(f,d,!1),d=d.onload=d.onerror=null};d.onload=p,d.onerror=function(){m.log("Error loading "+d.src),s&&s.call(f,null,!0),d=d.onload=d.onerror=null},n.indexOf("data")!==0&&o!==void 0&&o!==null&&(d.crossOrigin=o),n.substring(0,14)==="data:image/svg"&&(d.onload=null,m.util.loadImageInDom(d,p)),d.src=n},loadImageInDom:function(n,s){var f=m.document.createElement("div");f.style.width=f.style.height="1px",f.style.left=f.style.top="-100%",f.style.position="absolute",f.appendChild(n),m.document.querySelector("body").appendChild(f),n.onload=function(){s(),f.parentNode.removeChild(f),f=null}},enlivenObjects:function(n,s,f,o){n=n||[];var d=[],p=0,_=n.length;function S(){++p===_&&s&&s(d.filter(function(C){return C}))}if(!_){s&&s(d);return}n.forEach(function(C,O){if(!C||!C.type){S();return}var k=m.util.getKlass(C.type,f);k.fromObject(C,function(P,H){H||(d[O]=P),o&&o(C,P,H),S()})})},enlivenObjectEnlivables:function(n,s,f){var o=m.Object.ENLIVEN_PROPS.filter(function(d){return!!n[d]});m.util.enlivenObjects(o.map(function(d){return n[d]}),function(d){var p={};o.forEach(function(_,S){p[_]=d[S],s&&(s[_]=d[S])}),f&&f(p)})},enlivenPatterns:function(n,s){n=n||[];function f(){++d===p&&s&&s(o)}var o=[],d=0,p=n.length;if(!p){s&&s(o);return}n.forEach(function(_,S){_&&_.source?new m.Pattern(_,function(C){o[S]=C,f()}):(o[S]=_,f())})},groupSVGElements:function(n,s,f){var o;return n&&n.length===1?(typeof f<"u"&&(n[0].sourcePath=f),n[0]):(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new m.Group(n,s),typeof f<"u"&&(o.sourcePath=f),o)},populateWithProperties:function(n,s,f){if(f&&Array.isArray(f))for(var o=0,d=f.length;o<d;o++)f[o]in n&&(s[f[o]]=n[f[o]])},createCanvasElement:function(){return m.document.createElement("canvas")},copyCanvasElement:function(n){var s=m.util.createCanvasElement();return s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s},toDataURL:function(n,s,f){return n.toDataURL("image/"+s,f)},createImage:function(){return m.document.createElement("img")},multiplyTransformMatrices:function(n,s,f){return[n[0]*s[0]+n[2]*s[1],n[1]*s[0]+n[3]*s[1],n[0]*s[2]+n[2]*s[3],n[1]*s[2]+n[3]*s[3],f?0:n[0]*s[4]+n[2]*s[5]+n[4],f?0:n[1]*s[4]+n[3]*s[5]+n[5]]},qrDecompose:function(n){var s=c(n[1],n[0]),f=h(n[0],2)+h(n[1],2),o=u(f),d=(n[0]*n[3]-n[2]*n[1])/o,p=c(n[0]*n[2]+n[1]*n[3],f);return{angle:s/a,scaleX:o,scaleY:d,skewX:p/a,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return m.iMatrix.concat();var s=m.util.degreesToRadians(n.angle),f=m.util.cos(s),o=m.util.sin(s);return[f,o,-o,f,0,0]},calcDimensionsMatrix:function(n){var s=typeof n.scaleX>"u"?1:n.scaleX,f=typeof n.scaleY>"u"?1:n.scaleY,o=[n.flipX?-s:s,0,0,n.flipY?-f:f,0,0],d=m.util.multiplyTransformMatrices,p=m.util.degreesToRadians;return n.skewX&&(o=d(o,[1,0,Math.tan(p(n.skewX)),1],!0)),n.skewY&&(o=d(o,[1,Math.tan(p(n.skewY)),0,1],!0)),o},composeMatrix:function(n){var s=[1,0,0,1,n.translateX||0,n.translateY||0],f=m.util.multiplyTransformMatrices;return n.angle&&(s=f(s,m.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(s=f(s,m.util.calcDimensionsMatrix(n))),s},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,s,f,o){o>0&&(s>o?s-=o:s=0,f>o?f-=o:f=0);var d=!0,p,_,S=n.getImageData(s,f,o*2||1,o*2||1),C=S.data.length;for(p=3;p<C&&(_=S.data[p],d=_<=0,d!==!1);p+=4);return S=null,d},parsePreserveAspectRatioAttribute:function(n){var s="meet",f="Mid",o="Mid",d=n.split(" "),p;return d&&d.length&&(s=d.pop(),s!=="meet"&&s!=="slice"?(p=s,s="meet"):d.length&&(p=d.pop())),f=p!=="none"?p.slice(1,4):"none",o=p!=="none"?p.slice(5,8):"none",{meetOrSlice:s,alignX:f,alignY:o}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?m.charWidthsCache[n]&&delete m.charWidthsCache[n]:m.charWidthsCache={}},limitDimsByArea:function(n,s){var f=Math.sqrt(s*n),o=Math.floor(s/f);return{x:Math.floor(f),y:o}},capValue:function(n,s,f){return Math.max(n,Math.min(s,f))},findScaleToFit:function(n,s){return Math.min(s.width/n.width,s.height/n.height)},findScaleToCover:function(n,s){return Math.max(s.width/n.width,s.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(s){return m.util.toFixed(s,m.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,s){var f=m.util.invertTransform(s),o=m.util.multiplyTransformMatrices(f,n.calcOwnMatrix());m.util.applyTransformToObject(n,o)},addTransformToObject:function(n,s){m.util.applyTransformToObject(n,m.util.multiplyTransformMatrices(s,n.calcOwnMatrix()))},applyTransformToObject:function(n,s){var f=m.util.qrDecompose(s),o=new m.Point(f.translateX,f.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",f.scaleX),n.set("scaleY",f.scaleY),n.skewX=f.skewX,n.skewY=f.skewY,n.angle=f.angle,n.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(n,s,f){var o=n/2,d=s/2,p=[{x:-o,y:-d},{x:o,y:-d},{x:-o,y:d},{x:o,y:d}],_=m.util.calcDimensionsMatrix(f),S=m.util.makeBoundingBoxFromPoints(p,_);return{x:S.width,y:S.height}},mergeClipPaths:function(n,s){var f=n,o=s;f.inverted&&!o.inverted&&(f=s,o=n),m.util.applyTransformToObject(o,m.util.multiplyTransformMatrices(m.util.invertTransform(f.calcTransformMatrix()),o.calcTransformMatrix()));var d=f.inverted&&o.inverted;return d&&(f.inverted=o.inverted=!1),new m.Group([f],{clipPath:o,inverted:d})},hasStyleChanged:function(n,s,f){return f=f||!1,n.fill!==s.fill||n.stroke!==s.stroke||n.strokeWidth!==s.strokeWidth||n.fontSize!==s.fontSize||n.fontFamily!==s.fontFamily||n.fontWeight!==s.fontWeight||n.fontStyle!==s.fontStyle||n.textBackgroundColor!==s.textBackgroundColor||n.deltaY!==s.deltaY||f&&(n.overline!==s.overline||n.underline!==s.underline||n.linethrough!==s.linethrough)},stylesToArray:function(f,s){for(var f=m.util.object.clone(f,!0),o=s.split(`
`),d=-1,p={},_=[],S=0;S<o.length;S++){if(!f[S]){d+=o[S].length;continue}for(var C=0;C<o[S].length;C++){d++;var O=f[S][C];if(O&&Object.keys(O).length>0){var k=m.util.hasStyleChanged(p,O,!0);k?_.push({start:d,end:d+1,style:O}):_[_.length-1].end++}p=O||{}}}return _},stylesFromArray:function(n,s){if(!Array.isArray(n))return n;for(var f=s.split(`
`),o=-1,d=0,p={},_=0;_<f.length;_++)for(var S=0;S<f[_].length;S++)o++,n[d]&&n[d].start<=o&&o<n[d].end&&(p[_]=p[_]||{},p[_][S]=Object.assign({},n[d].style),o===n[d].end-1&&d++);return p}}}(M),function(){var v=Array.prototype.join,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function h(x,b,E,R,U,D,w,B,F,Z,I){var et=m.util.cos(x),ft=m.util.sin(x),yt=m.util.cos(b),$=m.util.sin(b),W=E*U*yt-R*D*$+w,rt=R*U*yt+E*D*$+B,st=Z+F*(-E*U*ft-R*D*et),tt=I+F*(-R*U*ft+E*D*et),ot=W+F*(E*U*$+R*D*yt),_t=rt+F*(R*U*$-E*D*yt);return["C",st,tt,ot,_t,W,rt]}function a(x,b,E,R,U,D,w){var B=Math.PI,F=w*B/180,Z=m.util.sin(F),I=m.util.cos(F),et=0,ft=0;E=Math.abs(E),R=Math.abs(R);var yt=-I*x*.5-Z*b*.5,$=-I*b*.5+Z*x*.5,W=E*E,rt=R*R,st=$*$,tt=yt*yt,ot=W*rt-W*st-rt*tt,_t=0;if(ot<0){var At=Math.sqrt(1-ot/(W*rt));E*=At,R*=At}else _t=(U===D?-1:1)*Math.sqrt(ot/(W*st+rt*tt));var Ct=_t*E*$/R,lt=-_t*R*yt/E,xt=I*Ct-Z*lt+x*.5,wt=Z*Ct+I*lt+b*.5,Bt=r(1,0,(yt-Ct)/E,($-lt)/R),Ft=r((yt-Ct)/E,($-lt)/R,(-yt-Ct)/E,(-$-lt)/R);D===0&&Ft>0?Ft-=2*B:D===1&&Ft<0&&(Ft+=2*B);for(var Ut=Math.ceil(Math.abs(Ft/B*2)),ee=[],Kt=Ft/Ut,Qe=8/3*Math.sin(Kt/4)*Math.sin(Kt/4)/Math.sin(Kt/2),Ni=Bt+Kt,Me=0;Me<Ut;Me++)ee[Me]=h(Bt,Ni,I,Z,E,R,xt,wt,Qe,et,ft),et=ee[Me][5],ft=ee[Me][6],Bt=Ni,Ni+=Kt;return ee}function r(x,b,E,R){var U=Math.atan2(b,x),D=Math.atan2(R,E);return D>=U?D-U:2*Math.PI-(U-D)}function n(x,b,E,R,U,D,w,B){var F;if(m.cachesBoundsOfCurve&&(F=v.call(arguments),m.boundsOfCurveCache[F]))return m.boundsOfCurveCache[F];var Z=Math.sqrt,I=Math.min,et=Math.max,ft=Math.abs,yt=[],$=[[],[]],W,rt,st,tt,ot,_t,At,Ct;rt=6*x-12*E+6*U,W=-3*x+9*E-9*U+3*w,st=3*E-3*x;for(var lt=0;lt<2;++lt){if(lt>0&&(rt=6*b-12*R+6*D,W=-3*b+9*R-9*D+3*B,st=3*R-3*b),ft(W)<1e-12){if(ft(rt)<1e-12)continue;tt=-st/rt,0<tt&&tt<1&&yt.push(tt);continue}At=rt*rt-4*st*W,!(At<0)&&(Ct=Z(At),ot=(-rt+Ct)/(2*W),0<ot&&ot<1&&yt.push(ot),_t=(-rt-Ct)/(2*W),0<_t&&_t<1&&yt.push(_t))}for(var xt,wt,Bt=yt.length,Ft=Bt,Ut;Bt--;)tt=yt[Bt],Ut=1-tt,xt=Ut*Ut*Ut*x+3*Ut*Ut*tt*E+3*Ut*tt*tt*U+tt*tt*tt*w,$[0][Bt]=xt,wt=Ut*Ut*Ut*b+3*Ut*Ut*tt*R+3*Ut*tt*tt*D+tt*tt*tt*B,$[1][Bt]=wt;$[0][Ft]=x,$[1][Ft]=b,$[0][Ft+1]=w,$[1][Ft+1]=B;var ee=[{x:I.apply(null,$[0]),y:I.apply(null,$[1])},{x:et.apply(null,$[0]),y:et.apply(null,$[1])}];return m.cachesBoundsOfCurve&&(m.boundsOfCurveCache[F]=ee),ee}function s(x,b,E){for(var R=E[1],U=E[2],D=E[3],w=E[4],B=E[5],F=E[6],Z=E[7],I=a(F-x,Z-b,R,U,w,B,D),et=0,ft=I.length;et<ft;et++)I[et][1]+=x,I[et][2]+=b,I[et][3]+=x,I[et][4]+=b,I[et][5]+=x,I[et][6]+=b;return I}function f(x){var b=0,E=0,R=x.length,U=0,D=0,w,B,F,Z=[],I,et,ft;for(B=0;B<R;++B){switch(F=!1,w=x[B].slice(0),w[0]){case"l":w[0]="L",w[1]+=b,w[2]+=E;case"L":b=w[1],E=w[2];break;case"h":w[1]+=b;case"H":w[0]="L",w[2]=E,b=w[1];break;case"v":w[1]+=E;case"V":w[0]="L",E=w[1],w[1]=b,w[2]=E;break;case"m":w[0]="M",w[1]+=b,w[2]+=E;case"M":b=w[1],E=w[2],U=w[1],D=w[2];break;case"c":w[0]="C",w[1]+=b,w[2]+=E,w[3]+=b,w[4]+=E,w[5]+=b,w[6]+=E;case"C":et=w[3],ft=w[4],b=w[5],E=w[6];break;case"s":w[0]="S",w[1]+=b,w[2]+=E,w[3]+=b,w[4]+=E;case"S":I==="C"?(et=2*b-et,ft=2*E-ft):(et=b,ft=E),b=w[3],E=w[4],w[0]="C",w[5]=w[3],w[6]=w[4],w[3]=w[1],w[4]=w[2],w[1]=et,w[2]=ft,et=w[3],ft=w[4];break;case"q":w[0]="Q",w[1]+=b,w[2]+=E,w[3]+=b,w[4]+=E;case"Q":et=w[1],ft=w[2],b=w[3],E=w[4];break;case"t":w[0]="T",w[1]+=b,w[2]+=E;case"T":I==="Q"?(et=2*b-et,ft=2*E-ft):(et=b,ft=E),w[0]="Q",b=w[1],E=w[2],w[1]=et,w[2]=ft,w[3]=b,w[4]=E;break;case"a":w[0]="A",w[6]+=b,w[7]+=E;case"A":F=!0,Z=Z.concat(s(b,E,w)),b=w[6],E=w[7];break;case"z":case"Z":b=U,E=D;break}F||Z.push(w),I=w[0]}return Z}function o(x,b,E,R){return Math.sqrt((E-x)*(E-x)+(R-b)*(R-b))}function d(x){return x*x*x}function p(x){return 3*x*x*(1-x)}function _(x){return 3*x*(1-x)*(1-x)}function S(x){return(1-x)*(1-x)*(1-x)}function C(x,b,E,R,U,D,w,B){return function(F){var Z=d(F),I=p(F),et=_(F),ft=S(F);return{x:w*Z+U*I+E*et+x*ft,y:B*Z+D*I+R*et+b*ft}}}function O(x,b,E,R,U,D,w,B){return function(F){var Z=1-F,I=3*Z*Z*(E-x)+6*Z*F*(U-E)+3*F*F*(w-U),et=3*Z*Z*(R-b)+6*Z*F*(D-R)+3*F*F*(B-D);return Math.atan2(et,I)}}function k(x){return x*x}function P(x){return 2*x*(1-x)}function H(x){return(1-x)*(1-x)}function K(x,b,E,R,U,D){return function(w){var B=k(w),F=P(w),Z=H(w);return{x:U*B+E*F+x*Z,y:D*B+R*F+b*Z}}}function ct(x,b,E,R,U,D){return function(w){var B=1-w,F=2*B*(E-x)+2*w*(U-E),Z=2*B*(R-b)+2*w*(D-R);return Math.atan2(Z,F)}}function mt(x,b,E){var R={x:b,y:E},U,D=0,w;for(w=1;w<=100;w+=1)U=x(w/100),D+=o(R.x,R.y,U.x,U.y),R=U;return D}function pt(x,b){for(var E=0,R=0,U=x.iterator,D={x:x.x,y:x.y},w,B,F=.01,Z=x.angleFinder,I;R<b&&F>1e-4;)w=U(E),I=E,B=o(D.x,D.y,w.x,w.y),B+R>b?(E-=F,F/=2):(D=w,E+=F,R+=B);return w.angle=Z(I),w}function vt(x){for(var b=0,E=x.length,R,U=0,D=0,w=0,B=0,F=[],Z,I,et,ft=0;ft<E;ft++){switch(R=x[ft],I={x:U,y:D,command:R[0]},R[0]){case"M":I.length=0,w=U=R[1],B=D=R[2];break;case"L":I.length=o(U,D,R[1],R[2]),U=R[1],D=R[2];break;case"C":Z=C(U,D,R[1],R[2],R[3],R[4],R[5],R[6]),et=O(U,D,R[1],R[2],R[3],R[4],R[5],R[6]),I.iterator=Z,I.angleFinder=et,I.length=mt(Z,U,D),U=R[5],D=R[6];break;case"Q":Z=K(U,D,R[1],R[2],R[3],R[4]),et=ct(U,D,R[1],R[2],R[3],R[4]),I.iterator=Z,I.angleFinder=et,I.length=mt(Z,U,D),U=R[3],D=R[4];break;case"Z":case"z":I.destX=w,I.destY=B,I.length=o(U,D,w,B),U=w,D=B;break}b+=I.length,F.push(I)}return F.push({length:b,x:U,y:D}),F}function gt(x,b,E){E||(E=vt(x));for(var R=0;b-E[R].length>0&&R<E.length-2;)b-=E[R].length,R++;var U=E[R],D=b/U.length,w=U.command,B=x[R],F;switch(w){case"M":return{x:U.x,y:U.y,angle:0};case"Z":case"z":return F=new m.Point(U.x,U.y).lerp(new m.Point(U.destX,U.destY),D),F.angle=Math.atan2(U.destY-U.y,U.destX-U.x),F;case"L":return F=new m.Point(U.x,U.y).lerp(new m.Point(B[1],B[2]),D),F.angle=Math.atan2(B[2]-U.y,B[1]-U.x),F;case"C":return pt(U,b);case"Q":return pt(U,b)}}function z(x){var b=[],E=[],R,U,D=m.rePathCommand,w="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",B="("+w+")"+m.commaWsp,F="([01])"+m.commaWsp+"?",Z=B+"?"+B+"?"+B+F+F+B+"?("+w+")",I=new RegExp(Z,"g"),et,ft,yt;if(!x||!x.match)return b;yt=x.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var $=0,W,rt=yt.length;$<rt;$++){R=yt[$],ft=R.slice(1).trim(),E.length=0;var st=R.charAt(0);if(W=[st],st.toLowerCase()==="a")for(var tt;tt=I.exec(ft);)for(var ot=1;ot<tt.length;ot++)E.push(tt[ot]);else for(;et=D.exec(ft);)E.push(et[0]);for(var ot=0,_t=E.length;ot<_t;ot++)U=parseFloat(E[ot]),isNaN(U)||W.push(U);var At=u[st.toLowerCase()],Ct=c[st]||st;if(W.length-1>At)for(var lt=1,xt=W.length;lt<xt;lt+=At)b.push([st].concat(W.slice(lt,lt+At))),st=Ct;else b.push(W)}return b}function X(x,b){var E=[],R,U=new m.Point(x[0].x,x[0].y),D=new m.Point(x[1].x,x[1].y),w=x.length,B=1,F=0,Z=w>2;for(b=b||0,Z&&(B=x[2].x<D.x?-1:x[2].x===D.x?0:1,F=x[2].y<D.y?-1:x[2].y===D.y?0:1),E.push(["M",U.x-B*b,U.y-F*b]),R=1;R<w;R++){if(!U.eq(D)){var I=U.midPointFrom(D);E.push(["Q",U.x,U.y,I.x,I.y])}U=x[R],R+1<x.length&&(D=x[R+1])}return Z&&(B=U.x>x[R-2].x?1:U.x===x[R-2].x?0:-1,F=U.y>x[R-2].y?1:U.y===x[R-2].y?0:-1),E.push(["L",U.x+B*b,U.y+F*b]),E}function G(x,b,E){return E&&(b=m.util.multiplyTransformMatrices(b,[1,0,0,1,-E.x,-E.y])),x.map(function(R){for(var U=R.slice(0),D={},w=1;w<R.length-1;w+=2)D.x=R[w],D.y=R[w+1],D=m.util.transformPoint(D,b),U[w]=D.x,U[w+1]=D.y;return U})}m.util.joinPath=function(x){return x.map(function(b){return b.join(" ")}).join(" ")},m.util.parsePath=z,m.util.makePathSimpler=f,m.util.getSmoothPathFromPoints=X,m.util.getPathSegmentsInfo=vt,m.util.getBoundsOfCurve=n,m.util.getPointOnPath=gt,m.util.transformPath=G}(),function(){var v=Array.prototype.slice;function u(n,s){for(var f=v.call(arguments,2),o=[],d=0,p=n.length;d<p;d++)o[d]=f.length?n[d][s].apply(n[d],f):n[d][s].call(n[d]);return o}function c(n,s){return r(n,s,function(f,o){return f>=o})}function h(n,s){return r(n,s,function(f,o){return f<o})}function a(n,s){for(var f=n.length;f--;)n[f]=s;return n}function r(n,s,f){if(!(!n||n.length===0)){var o=n.length-1,d=s?n[o][s]:n[o];if(s)for(;o--;)f(n[o][s],d)&&(d=n[o][s]);else for(;o--;)f(n[o],d)&&(d=n[o]);return d}}m.util.array={fill:a,invoke:u,min:h,max:c}}(),function(){function v(c,h,a){if(a)if(!m.isLikelyNode&&h instanceof Element)c=h;else if(h instanceof Array){c=[];for(var r=0,n=h.length;r<n;r++)c[r]=v({},h[r],a)}else if(h&&typeof h=="object")for(var s in h)s==="canvas"||s==="group"?c[s]=null:h.hasOwnProperty(s)&&(c[s]=v({},h[s],a));else c=h;else for(var s in h)c[s]=h[s];return c}function u(c,h){return v({},c,h)}m.util.object={extend:v,clone:u},m.util.object.extend(m.util,m.Observable)}(),function(){function v(r){return r.replace(/-+(.)?/g,function(n,s){return s?s.toUpperCase():""})}function u(r,n){return r.charAt(0).toUpperCase()+(n?r.slice(1):r.slice(1).toLowerCase())}function c(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(r){var n=0,s,f=[];for(n=0,s;n<r.length;n++)(s=a(r,n))!==!1&&f.push(s);return f}function a(r,n){var s=r.charCodeAt(n);if(isNaN(s))return"";if(s<55296||s>57343)return r.charAt(n);if(55296<=s&&s<=56319){if(r.length<=n+1)throw"High surrogate without following low surrogate";var f=r.charCodeAt(n+1);if(56320>f||f>57343)throw"High surrogate without following low surrogate";return r.charAt(n)+r.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var o=r.charCodeAt(n-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}m.util.string={camelize:v,capitalize:u,escapeXml:c,graphemeSplit:h}}(),function(){var v=Array.prototype.slice,u=function(){},c=function(){for(var s in{toString:1})if(s==="toString")return!1;return!0}(),h=function(s,f,o){for(var d in f)d in s.prototype&&typeof s.prototype[d]=="function"&&(f[d]+"").indexOf("callSuper")>-1?s.prototype[d]=function(p){return function(){var _=this.constructor.superclass;this.constructor.superclass=o;var S=f[p].apply(this,arguments);if(this.constructor.superclass=_,p!=="initialize")return S}}(d):s.prototype[d]=f[d],c&&(f.toString!==Object.prototype.toString&&(s.prototype.toString=f.toString),f.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=f.valueOf))};function a(){}function r(s){for(var f=null,o=this;o.constructor.superclass;){var d=o.constructor.superclass.prototype[s];if(o[s]!==d){f=d;break}o=o.constructor.superclass.prototype}return f?arguments.length>1?f.apply(this,v.call(arguments,1)):f.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function n(){var s=null,f=v.call(arguments,0);typeof f[0]=="function"&&(s=f.shift());function o(){this.initialize.apply(this,arguments)}o.superclass=s,o.subclasses=[],s&&(a.prototype=s.prototype,o.prototype=new a,s.subclasses.push(o));for(var d=0,p=f.length;d<p;d++)h(o,f[d],s);return o.prototype.initialize||(o.prototype.initialize=u),o.prototype.constructor=o,o.prototype.callSuper=r,o}m.util.createClass=n}(),function(){var v=!!m.document.createElement("div").attachEvent,u=["touchstart","touchmove","touchend"];m.util.addListener=function(h,a,r,n){h&&h.addEventListener(a,r,v?!1:n)},m.util.removeListener=function(h,a,r,n){h&&h.removeEventListener(a,r,v?!1:n)};function c(h){var a=h.changedTouches;return a&&a[0]?a[0]:h}m.util.getPointer=function(h){var a=h.target,r=m.util.getScrollLeftTop(a),n=c(h);return{x:n.clientX+r.left,y:n.clientY+r.top}},m.util.isTouchEvent=function(h){return u.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function v(n,s){var f=n.style;if(!f)return n;if(typeof s=="string")return n.style.cssText+=";"+s,s.indexOf("opacity")>-1?r(n,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var o in s)if(o==="opacity")r(n,s[o]);else{var d=o==="float"||o==="cssFloat"?typeof f.styleFloat>"u"?"cssFloat":"styleFloat":o;f.setProperty(d,s[o])}return n}var u=m.document.createElement("div"),c=typeof u.style.opacity=="string",h=typeof u.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,r=function(n){return n};c?r=function(n,s){return n.style.opacity=s,n}:h&&(r=function(n,s){var f=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(f.zoom=1),a.test(f.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",f.filter=f.filter.replace(a,s)):f.filter+=" alpha(opacity="+s*100+")",n}),m.util.setStyle=v}(),function(){var v=Array.prototype.slice;function u(S){return typeof S=="string"?m.document.getElementById(S):S}var c,h=function(S){return v.call(S,0)};try{c=h(m.document.childNodes)instanceof Array}catch{}c||(h=function(S){for(var C=new Array(S.length),O=S.length;O--;)C[O]=S[O];return C});function a(S,C){var O=m.document.createElement(S);for(var k in C)k==="class"?O.className=C[k]:k==="for"?O.htmlFor=C[k]:O.setAttribute(k,C[k]);return O}function r(S,C){S&&(" "+S.className+" ").indexOf(" "+C+" ")===-1&&(S.className+=(S.className?" ":"")+C)}function n(S,C,O){return typeof C=="string"&&(C=a(C,O)),S.parentNode&&S.parentNode.replaceChild(C,S),C.appendChild(S),C}function s(S){for(var C=0,O=0,k=m.document.documentElement,P=m.document.body||{scrollLeft:0,scrollTop:0};S&&(S.parentNode||S.host)&&(S=S.parentNode||S.host,S===m.document?(C=P.scrollLeft||k.scrollLeft||0,O=P.scrollTop||k.scrollTop||0):(C+=S.scrollLeft||0,O+=S.scrollTop||0),!(S.nodeType===1&&S.style.position==="fixed")););return{left:C,top:O}}function f(S){var C,O=S&&S.ownerDocument,k={left:0,top:0},P={left:0,top:0},H,K={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!O)return P;for(var ct in K)P[K[ct]]+=parseInt(o(S,ct),10)||0;return C=O.documentElement,typeof S.getBoundingClientRect<"u"&&(k=S.getBoundingClientRect()),H=s(S),{left:k.left+H.left-(C.clientLeft||0)+P.left,top:k.top+H.top-(C.clientTop||0)+P.top}}var o;m.document.defaultView&&m.document.defaultView.getComputedStyle?o=function(S,C){var O=m.document.defaultView.getComputedStyle(S,null);return O?O[C]:void 0}:o=function(S,C){var O=S.style[C];return!O&&S.currentStyle&&(O=S.currentStyle[C]),O},function(){var S=m.document.documentElement.style,C="userSelect"in S?"userSelect":"MozUserSelect"in S?"MozUserSelect":"WebkitUserSelect"in S?"WebkitUserSelect":"KhtmlUserSelect"in S?"KhtmlUserSelect":"";function O(P){return typeof P.onselectstart<"u"&&(P.onselectstart=m.util.falseFunction),C?P.style[C]="none":typeof P.unselectable=="string"&&(P.unselectable="on"),P}function k(P){return typeof P.onselectstart<"u"&&(P.onselectstart=null),C?P.style[C]="":typeof P.unselectable=="string"&&(P.unselectable=""),P}m.util.makeElementUnselectable=O,m.util.makeElementSelectable=k}();function d(S){var C=m.jsdomImplForWrapper(S);return C._canvas||C._image}function p(S){if(m.isLikelyNode){var C=m.jsdomImplForWrapper(S);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function _(S,C){S.imageSmoothingEnabled=S.imageSmoothingEnabled||S.webkitImageSmoothingEnabled||S.mozImageSmoothingEnabled||S.msImageSmoothingEnabled||S.oImageSmoothingEnabled,S.imageSmoothingEnabled=C}m.util.setImageSmoothing=_,m.util.getById=u,m.util.toArray=h,m.util.addClass=r,m.util.makeElement=a,m.util.wrapElement=n,m.util.getScrollLeftTop=s,m.util.getElementOffset=f,m.util.getNodeCanvas=d,m.util.cleanUpJsdomNode=p}(),function(){function v(h,a){return h+(/\?/.test(h)?"&":"?")+a}function u(){}function c(h,a){a||(a={});var r=a.method?a.method.toUpperCase():"GET",n=a.onComplete||function(){},s=new m.window.XMLHttpRequest,f=a.body||a.parameters;return s.onreadystatechange=function(){s.readyState===4&&(n(s),s.onreadystatechange=u)},r==="GET"&&(f=null,typeof a.parameters=="string"&&(h=v(h,a.parameters))),s.open(r,h,!0),(r==="POST"||r==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(f),s}m.util.request=c}(),m.log=console.log,m.warn=console.warn,function(){var v=m.util.object.extend,u=m.util.object.clone,c=[];m.util.object.extend(c,{cancelAll:function(){var d=this.splice(0);return d.forEach(function(p){p.cancel()}),d},cancelByCanvas:function(d){if(!d)return[];var p=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===d});return p.forEach(function(_){_.cancel()}),p},cancelByTarget:function(d){var p=this.findAnimationsByTarget(d);return p.forEach(function(_){_.cancel()}),p},findAnimationIndex:function(d){return this.indexOf(this.findAnimation(d))},findAnimation:function(d){return this.find(function(p){return p.cancel===d})},findAnimationsByTarget:function(d){return d?this.filter(function(p){return p.target===d}):[]}});function h(){return!1}function a(d,p,_,S){return-_*Math.cos(d/S*(Math.PI/2))+_+p}function r(d){d||(d={});var p=!1,_,S=function(){var C=m.runningAnimations.indexOf(_);return C>-1&&m.runningAnimations.splice(C,1)[0]};return _=v(u(d),{cancel:function(){return p=!0,S()},currentValue:"startValue"in d?d.startValue:0,completionRate:0,durationRate:0}),m.runningAnimations.push(_),f(function(C){var O=C||+new Date,k=d.duration||500,P=O+k,H,K=d.onChange||h,ct=d.abort||h,mt=d.onComplete||h,pt=d.easing||a,vt="startValue"in d?d.startValue.length>0:!1,gt="startValue"in d?d.startValue:0,z="endValue"in d?d.endValue:100,X=d.byValue||(vt?gt.map(function(G,x){return z[x]-gt[x]}):z-gt);d.onStart&&d.onStart(),function G(x){H=x||+new Date;var b=H>P?k:H-O,E=b/k,R=vt?gt.map(function(D,w){return pt(b,gt[w],X[w],k)}):pt(b,gt,X,k),U=Math.abs(vt?(R[0]-gt[0])/X[0]:(R-gt)/X);if(_.currentValue=vt?R.slice():R,_.completionRate=U,_.durationRate=E,!p){if(ct(R,U,E)){S();return}if(H>P){_.currentValue=vt?z.slice():z,_.completionRate=1,_.durationRate=1,K(vt?z.slice():z,1,1),mt(z,1,1),S();return}else K(R,U,E),f(G)}}(O)}),_.cancel}var n=m.window.requestAnimationFrame||m.window.webkitRequestAnimationFrame||m.window.mozRequestAnimationFrame||m.window.oRequestAnimationFrame||m.window.msRequestAnimationFrame||function(d){return m.window.setTimeout(d,1e3/60)},s=m.window.cancelAnimationFrame||m.window.clearTimeout;function f(){return n.apply(m.window,arguments)}function o(){return s.apply(m.window,arguments)}m.util.animate=r,m.util.requestAnimFrame=f,m.util.cancelAnimFrame=o,m.runningAnimations=c}(),function(){function v(c,h,a){var r="rgba("+parseInt(c[0]+a*(h[0]-c[0]),10)+","+parseInt(c[1]+a*(h[1]-c[1]),10)+","+parseInt(c[2]+a*(h[2]-c[2]),10);return r+=","+(c&&h?parseFloat(c[3]+a*(h[3]-c[3])):1),r+=")",r}function u(c,h,a,r){var n=new m.Color(c).getSource(),s=new m.Color(h).getSource(),f=r.onComplete,o=r.onChange;return r=r||{},m.util.animate(m.util.object.extend(r,{duration:a||500,startValue:n,endValue:s,byValue:s,easing:function(d,p,_,S){var C=r.colorEasing?r.colorEasing(d,S):1-Math.cos(d/S*(Math.PI/2));return v(p,_,C)},onComplete:function(d,p,_){if(f)return f(v(s,s,0),p,_)},onChange:function(d,p,_){if(o){if(Array.isArray(d))return o(v(d,d,0),p,_);o(d,p,_)}}}))}m.util.animateColor=u}(),function(){function v(x,b,E,R){return x<Math.abs(b)?(x=b,R=E/4):b===0&&x===0?R=E/(2*Math.PI)*Math.asin(1):R=E/(2*Math.PI)*Math.asin(b/x),{a:x,c:b,p:E,s:R}}function u(x,b,E){return x.a*Math.pow(2,10*(b-=1))*Math.sin((b*E-x.s)*(2*Math.PI)/x.p)}function c(x,b,E,R){return E*((x=x/R-1)*x*x+1)+b}function h(x,b,E,R){return x/=R/2,x<1?E/2*x*x*x+b:E/2*((x-=2)*x*x+2)+b}function a(x,b,E,R){return E*(x/=R)*x*x*x+b}function r(x,b,E,R){return-E*((x=x/R-1)*x*x*x-1)+b}function n(x,b,E,R){return x/=R/2,x<1?E/2*x*x*x*x+b:-E/2*((x-=2)*x*x*x-2)+b}function s(x,b,E,R){return E*(x/=R)*x*x*x*x+b}function f(x,b,E,R){return E*((x=x/R-1)*x*x*x*x+1)+b}function o(x,b,E,R){return x/=R/2,x<1?E/2*x*x*x*x*x+b:E/2*((x-=2)*x*x*x*x+2)+b}function d(x,b,E,R){return-E*Math.cos(x/R*(Math.PI/2))+E+b}function p(x,b,E,R){return E*Math.sin(x/R*(Math.PI/2))+b}function _(x,b,E,R){return-E/2*(Math.cos(Math.PI*x/R)-1)+b}function S(x,b,E,R){return x===0?b:E*Math.pow(2,10*(x/R-1))+b}function C(x,b,E,R){return x===R?b+E:E*(-Math.pow(2,-10*x/R)+1)+b}function O(x,b,E,R){return x===0?b:x===R?b+E:(x/=R/2,x<1?E/2*Math.pow(2,10*(x-1))+b:E/2*(-Math.pow(2,-10*--x)+2)+b)}function k(x,b,E,R){return-E*(Math.sqrt(1-(x/=R)*x)-1)+b}function P(x,b,E,R){return E*Math.sqrt(1-(x=x/R-1)*x)+b}function H(x,b,E,R){return x/=R/2,x<1?-E/2*(Math.sqrt(1-x*x)-1)+b:E/2*(Math.sqrt(1-(x-=2)*x)+1)+b}function K(x,b,E,R){var U=1.70158,D=0,w=E;if(x===0)return b;if(x/=R,x===1)return b+E;D||(D=R*.3);var B=v(w,E,D,U);return-u(B,x,R)+b}function ct(x,b,E,R){var U=1.70158,D=0,w=E;if(x===0)return b;if(x/=R,x===1)return b+E;D||(D=R*.3);var B=v(w,E,D,U);return B.a*Math.pow(2,-10*x)*Math.sin((x*R-B.s)*(2*Math.PI)/B.p)+B.c+b}function mt(x,b,E,R){var U=1.70158,D=0,w=E;if(x===0)return b;if(x/=R/2,x===2)return b+E;D||(D=R*(.3*1.5));var B=v(w,E,D,U);return x<1?-.5*u(B,x,R)+b:B.a*Math.pow(2,-10*(x-=1))*Math.sin((x*R-B.s)*(2*Math.PI)/B.p)*.5+B.c+b}function pt(x,b,E,R,U){return U===void 0&&(U=1.70158),E*(x/=R)*x*((U+1)*x-U)+b}function vt(x,b,E,R,U){return U===void 0&&(U=1.70158),E*((x=x/R-1)*x*((U+1)*x+U)+1)+b}function gt(x,b,E,R,U){return U===void 0&&(U=1.70158),x/=R/2,x<1?E/2*(x*x*(((U*=1.525)+1)*x-U))+b:E/2*((x-=2)*x*(((U*=1.525)+1)*x+U)+2)+b}function z(x,b,E,R){return E-X(R-x,0,E,R)+b}function X(x,b,E,R){return(x/=R)<1/2.75?E*(7.5625*x*x)+b:x<2/2.75?E*(7.5625*(x-=1.5/2.75)*x+.75)+b:x<2.5/2.75?E*(7.5625*(x-=2.25/2.75)*x+.9375)+b:E*(7.5625*(x-=2.625/2.75)*x+.984375)+b}function G(x,b,E,R){return x<R/2?z(x*2,0,E,R)*.5+b:X(x*2-R,0,E,R)*.5+E*.5+b}m.util.ease={easeInQuad:function(x,b,E,R){return E*(x/=R)*x+b},easeOutQuad:function(x,b,E,R){return-E*(x/=R)*(x-2)+b},easeInOutQuad:function(x,b,E,R){return x/=R/2,x<1?E/2*x*x+b:-E/2*(--x*(x-2)-1)+b},easeInCubic:function(x,b,E,R){return E*(x/=R)*x*x+b},easeOutCubic:c,easeInOutCubic:h,easeInQuart:a,easeOutQuart:r,easeInOutQuart:n,easeInQuint:s,easeOutQuint:f,easeInOutQuint:o,easeInSine:d,easeOutSine:p,easeInOutSine:_,easeInExpo:S,easeOutExpo:C,easeInOutExpo:O,easeInCirc:k,easeOutCirc:P,easeInOutCirc:H,easeInElastic:K,easeOutElastic:ct,easeInOutElastic:mt,easeInBack:pt,easeOutBack:vt,easeInOutBack:gt,easeInBounce:z,easeOutBounce:X,easeInOutBounce:G}}(),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.util.object.clone,a=u.util.toFixed,r=u.util.parseUnit,n=u.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],f=["symbol","image","marker","pattern","view","svg"],o=["pattern","defs","symbol","metadata","clipPath","mask","desc"],d=["symbol","g","a","svg","clipPath","defs"],p={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},S="font-size",C="clip-path";u.svgValidTagNamesRegEx=P(s),u.svgViewBoxElementsRegEx=P(f),u.svgInvalidAncestorsRegEx=P(o),u.svgValidParentsRegEx=P(d),u.cssRules={},u.gradientDefs={},u.clipPaths={};function O(D){return D in p?p[D]:D}function k(D,w,B,F){var Z=Array.isArray(w),I;if((D==="fill"||D==="stroke")&&w==="none")w="";else{if(D==="strokeUniform")return w==="non-scaling-stroke";if(D==="strokeDashArray")w==="none"?w=null:w=w.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(D==="transformMatrix")B&&B.transformMatrix?w=n(B.transformMatrix,u.parseTransformAttribute(w)):w=u.parseTransformAttribute(w);else if(D==="visible")w=w!=="none"&&w!=="hidden",B&&B.visible===!1&&(w=!1);else if(D==="opacity")w=parseFloat(w),B&&typeof B.opacity<"u"&&(w*=B.opacity);else if(D==="textAnchor")w=w==="start"?"left":w==="end"?"right":"center";else if(D==="charSpacing")I=r(w,F)/F*1e3;else if(D==="paintFirst"){var et=w.indexOf("fill"),ft=w.indexOf("stroke"),w="fill";(et>-1&&ft>-1&&ft<et||et===-1&&ft>-1)&&(w="stroke")}else{if(D==="href"||D==="xlink:href"||D==="font")return w;if(D==="imageSmoothing")return w==="optimizeQuality";I=Z?w.map(r):r(w,F)}}return!Z&&isNaN(I)?w:I}function P(D){return new RegExp("^("+D.join("|")+")\\b","i")}function H(D){for(var w in _)if(!(typeof D[_[w]]>"u"||D[w]==="")){if(typeof D[w]>"u"){if(!u.Object.prototype[w])continue;D[w]=u.Object.prototype[w]}if(D[w].indexOf("url(")!==0){var B=new u.Color(D[w]);D[w]=B.setAlpha(a(B.getAlpha()*D[_[w]],2)).toRgba()}}return D}function K(D,w){var B,F=[],Z,I,et;for(I=0,et=w.length;I<et;I++)B=w[I],Z=D.getElementsByTagName(B),F=F.concat(Array.prototype.slice.call(Z));return F}u.parseTransformAttribute=function(){function D(lt,xt){var wt=u.util.cos(xt[0]),Bt=u.util.sin(xt[0]),Ft=0,Ut=0;xt.length===3&&(Ft=xt[1],Ut=xt[2]),lt[0]=wt,lt[1]=Bt,lt[2]=-Bt,lt[3]=wt,lt[4]=Ft-(wt*Ft-Bt*Ut),lt[5]=Ut-(Bt*Ft+wt*Ut)}function w(lt,xt){var wt=xt[0],Bt=xt.length===2?xt[1]:xt[0];lt[0]=wt,lt[3]=Bt}function B(lt,xt,wt){lt[wt]=Math.tan(u.util.degreesToRadians(xt[0]))}function F(lt,xt){lt[4]=xt[0],xt.length===2&&(lt[5]=xt[1])}var Z=u.iMatrix,I=u.reNum,et=u.commaWsp,ft="(?:(skewX)\\s*\\(\\s*("+I+")\\s*\\))",yt="(?:(skewY)\\s*\\(\\s*("+I+")\\s*\\))",$="(?:(rotate)\\s*\\(\\s*("+I+")(?:"+et+"("+I+")"+et+"("+I+"))?\\s*\\))",W="(?:(scale)\\s*\\(\\s*("+I+")(?:"+et+"("+I+"))?\\s*\\))",rt="(?:(translate)\\s*\\(\\s*("+I+")(?:"+et+"("+I+"))?\\s*\\))",st="(?:(matrix)\\s*\\(\\s*("+I+")"+et+"("+I+")"+et+"("+I+")"+et+"("+I+")"+et+"("+I+")"+et+"("+I+")\\s*\\))",tt="(?:"+st+"|"+rt+"|"+W+"|"+$+"|"+ft+"|"+yt+")",ot="(?:"+tt+"(?:"+et+"*"+tt+")*)",_t="^\\s*(?:"+ot+"?)\\s*$",At=new RegExp(_t),Ct=new RegExp(tt,"g");return function(lt){var xt=Z.concat(),wt=[];if(!lt||lt&&!At.test(lt))return xt;lt.replace(Ct,function(Ft){var Ut=new RegExp(tt).exec(Ft).filter(function(Qe){return!!Qe}),ee=Ut[1],Kt=Ut.slice(2).map(parseFloat);switch(ee){case"translate":F(xt,Kt);break;case"rotate":Kt[0]=u.util.degreesToRadians(Kt[0]),D(xt,Kt);break;case"scale":w(xt,Kt);break;case"skewX":B(xt,Kt,2);break;case"skewY":B(xt,Kt,1);break;case"matrix":xt=Kt;break}wt.push(xt.concat()),xt=Z.concat()});for(var Bt=wt[0];wt.length>1;)wt.shift(),Bt=u.util.multiplyTransformMatrices(Bt,wt[0]);return Bt}}();function ct(D,w){var B,F;D.replace(/;\s*$/,"").split(";").forEach(function(Z){var I=Z.split(":");B=I[0].trim().toLowerCase(),F=I[1].trim(),w[B]=F})}function mt(D,w){var B,F;for(var Z in D)typeof D[Z]>"u"||(B=Z.toLowerCase(),F=D[Z],w[B]=F)}function pt(D,w){var B={};for(var F in u.cssRules[w])if(vt(D,F.split(" ")))for(var Z in u.cssRules[w][F])B[Z]=u.cssRules[w][F][Z];return B}function vt(D,w){var B,F=!0;return B=z(D,w.pop()),B&&w.length&&(F=gt(D,w)),B&&F&&w.length===0}function gt(D,w){for(var B,F=!0;D.parentNode&&D.parentNode.nodeType===1&&w.length;)F&&(B=w.pop()),D=D.parentNode,F=z(D,B);return w.length===0}function z(D,w){var B=D.nodeName,F=D.getAttribute("class"),Z=D.getAttribute("id"),I,et;if(I=new RegExp("^"+B,"i"),w=w.replace(I,""),Z&&w.length&&(I=new RegExp("#"+Z+"(?![a-zA-Z\\-]+)","i"),w=w.replace(I,"")),F&&w.length)for(F=F.split(" "),et=F.length;et--;)I=new RegExp("\\."+F[et]+"(?![a-zA-Z\\-]+)","i"),w=w.replace(I,"");return w.length===0}function X(D,w){var B;if(D.getElementById&&(B=D.getElementById(w)),B)return B;var F,Z,I,et=D.getElementsByTagName("*");for(Z=0,I=et.length;Z<I;Z++)if(F=et[Z],w===F.getAttribute("id"))return F}function G(D){for(var w=K(D,["use","svg:use"]),B=0;w.length&&B<w.length;){var F=w[B],Z=F.getAttribute("xlink:href")||F.getAttribute("href");if(Z===null)return;var I=Z.slice(1),et=F.getAttribute("x")||0,ft=F.getAttribute("y")||0,yt=X(D,I).cloneNode(!0),$=(yt.getAttribute("transform")||"")+" translate("+et+", "+ft+")",W,rt=w.length,st,tt,ot,_t,At=u.svgNS;if(b(yt),/^svg$/i.test(yt.nodeName)){var Ct=yt.ownerDocument.createElementNS(At,"g");for(tt=0,ot=yt.attributes,_t=ot.length;tt<_t;tt++)st=ot.item(tt),Ct.setAttributeNS(At,st.nodeName,st.nodeValue);for(;yt.firstChild;)Ct.appendChild(yt.firstChild);yt=Ct}for(tt=0,ot=F.attributes,_t=ot.length;tt<_t;tt++)st=ot.item(tt),!(st.nodeName==="x"||st.nodeName==="y"||st.nodeName==="xlink:href"||st.nodeName==="href")&&(st.nodeName==="transform"?$=st.nodeValue+" "+$:yt.setAttribute(st.nodeName,st.nodeValue));yt.setAttribute("transform",$),yt.setAttribute("instantiated_by_use","1"),yt.removeAttribute("id"),W=F.parentNode,W.replaceChild(yt,F),w.length===rt&&B++}}var x=new RegExp("^\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*$");function b(D){if(!u.svgViewBoxElementsRegEx.test(D.nodeName))return{};var w=D.getAttribute("viewBox"),B=1,F=1,Z=0,I=0,et,ft,yt,$,W=D.getAttribute("width"),rt=D.getAttribute("height"),st=D.getAttribute("x")||0,tt=D.getAttribute("y")||0,ot=D.getAttribute("preserveAspectRatio")||"",_t=!w||!(w=w.match(x)),At=!W||!rt||W==="100%"||rt==="100%",Ct=_t&&At,lt={},xt="",wt=0,Bt=0;if(lt.width=0,lt.height=0,lt.toBeParsed=Ct,_t&&(st||tt)&&D.parentNode&&D.parentNode.nodeName!=="#document"&&(xt=" translate("+r(st)+" "+r(tt)+") ",yt=(D.getAttribute("transform")||"")+xt,D.setAttribute("transform",yt),D.removeAttribute("x"),D.removeAttribute("y")),Ct)return lt;if(_t)return lt.width=r(W),lt.height=r(rt),lt;if(Z=-parseFloat(w[1]),I=-parseFloat(w[2]),et=parseFloat(w[3]),ft=parseFloat(w[4]),lt.minX=Z,lt.minY=I,lt.viewBoxWidth=et,lt.viewBoxHeight=ft,At?(lt.width=et,lt.height=ft):(lt.width=r(W),lt.height=r(rt),B=lt.width/et,F=lt.height/ft),ot=u.util.parsePreserveAspectRatioAttribute(ot),ot.alignX!=="none"&&(ot.meetOrSlice==="meet"&&(F=B=B>F?F:B),ot.meetOrSlice==="slice"&&(F=B=B>F?B:F),wt=lt.width-et*B,Bt=lt.height-ft*B,ot.alignX==="Mid"&&(wt/=2),ot.alignY==="Mid"&&(Bt/=2),ot.alignX==="Min"&&(wt=0),ot.alignY==="Min"&&(Bt=0)),B===1&&F===1&&Z===0&&I===0&&st===0&&tt===0)return lt;if((st||tt)&&D.parentNode.nodeName!=="#document"&&(xt=" translate("+r(st)+" "+r(tt)+") "),yt=xt+" matrix("+B+" 0 0 "+F+" "+(Z*B+wt)+" "+(I*F+Bt)+") ",D.nodeName==="svg"){for($=D.ownerDocument.createElementNS(u.svgNS,"g");D.firstChild;)$.appendChild(D.firstChild);D.appendChild($)}else $=D,$.removeAttribute("x"),$.removeAttribute("y"),yt=$.getAttribute("transform")+yt;return $.setAttribute("transform",yt),lt}function E(D,w){for(;D&&(D=D.parentNode);)if(D.nodeName&&w.test(D.nodeName.replace("svg:",""))&&!D.getAttribute("instantiated_by_use"))return!0;return!1}u.parseSVGDocument=function(D,w,B,F){if(D){G(D);var Z=u.Object.__uid++,I,et,ft=b(D),yt=u.util.toArray(D.getElementsByTagName("*"));if(ft.crossOrigin=F&&F.crossOrigin,ft.svgUid=Z,yt.length===0&&u.isLikelyNode){yt=D.selectNodes('//*[name(.)!="svg"]');var $=[];for(I=0,et=yt.length;I<et;I++)$[I]=yt[I];yt=$}var W=yt.filter(function(st){return b(st),u.svgValidTagNamesRegEx.test(st.nodeName.replace("svg:",""))&&!E(st,u.svgInvalidAncestorsRegEx)});if(!W||W&&!W.length){w&&w([],{});return}var rt={};yt.filter(function(st){return st.nodeName.replace("svg:","")==="clipPath"}).forEach(function(st){var tt=st.getAttribute("id");rt[tt]=u.util.toArray(st.getElementsByTagName("*")).filter(function(ot){return u.svgValidTagNamesRegEx.test(ot.nodeName.replace("svg:",""))})}),u.gradientDefs[Z]=u.getGradientDefs(D),u.cssRules[Z]=u.getCSSRules(D),u.clipPaths[Z]=rt,u.parseElements(W,function(st,tt){w&&(w(st,ft,tt,yt),delete u.gradientDefs[Z],delete u.cssRules[Z],delete u.clipPaths[Z])},h(ft),B,F)}};function R(D,w){var B=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],F="xlink:href",Z=w.getAttribute(F).slice(1),I=X(D,Z);if(I&&I.getAttribute(F)&&R(D,I),B.forEach(function(ft){I&&!w.hasAttribute(ft)&&I.hasAttribute(ft)&&w.setAttribute(ft,I.getAttribute(ft))}),!w.children.length)for(var et=I.cloneNode(!0);et.firstChild;)w.appendChild(et.firstChild);w.removeAttribute(F)}var U=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+u.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+u.reNum+"))?\\s+(.*)");c(u,{parseFontDeclaration:function(D,w){var B=D.match(U);if(B){var F=B[1],Z=B[3],I=B[4],et=B[5],ft=B[6];F&&(w.fontStyle=F),Z&&(w.fontWeight=isNaN(parseFloat(Z))?Z:parseFloat(Z)),I&&(w.fontSize=r(I)),ft&&(w.fontFamily=ft),et&&(w.lineHeight=et==="normal"?1:et)}},getGradientDefs:function(D){var w=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],B=K(D,w),F,Z=0,I={};for(Z=B.length;Z--;)F=B[Z],F.getAttribute("xlink:href")&&R(D,F),I[F.getAttribute("id")]=F;return I},parseAttributes:function(D,w,B){if(D){var F,Z={},I,et;typeof B>"u"&&(B=D.getAttribute("svgUid")),D.parentNode&&u.svgValidParentsRegEx.test(D.parentNode.nodeName)&&(Z=u.parseAttributes(D.parentNode,w,B));var ft=w.reduce(function(ot,_t){return F=D.getAttribute(_t),F&&(ot[_t]=F),ot},{}),yt=c(pt(D,B),u.parseStyleAttribute(D));ft=c(ft,yt),yt[C]&&D.setAttribute(C,yt[C]),I=et=Z.fontSize||u.Text.DEFAULT_SVG_FONT_SIZE,ft[S]&&(ft[S]=I=r(ft[S],et));var $,W,rt={};for(var st in ft)$=O(st),W=k($,ft[st],Z,I),rt[$]=W;rt&&rt.font&&u.parseFontDeclaration(rt.font,rt);var tt=c(Z,rt);return u.svgValidParentsRegEx.test(D.nodeName)?tt:H(tt)}},parseElements:function(D,w,B,F,Z){new u.ElementsParser(D,w,B,F,Z).parse()},parseStyleAttribute:function(D){var w={},B=D.getAttribute("style");return B&&(typeof B=="string"?ct(B,w):mt(B,w)),w},parsePointsAttribute:function(D){if(!D)return null;D=D.replace(/,/g," ").trim(),D=D.split(/\s+/);var w=[],B,F;for(B=0,F=D.length;B<F;B+=2)w.push({x:parseFloat(D[B]),y:parseFloat(D[B+1])});return w},getCSSRules:function(D){var w=D.getElementsByTagName("style"),B,F,Z={},I;for(B=0,F=w.length;B<F;B++){var et=w[B].textContent;et=et.replace(/\/\*[\s\S]*?\*\//g,""),et.trim()!==""&&(I=et.split("}"),I=I.filter(function(ft){return ft.trim()}),I.forEach(function(ft){var yt=ft.split("{"),$={},W=yt[1].trim(),rt=W.split(";").filter(function(_t){return _t.trim()});for(B=0,F=rt.length;B<F;B++){var st=rt[B].split(":"),tt=st[0].trim(),ot=st[1].trim();$[tt]=ot}ft=yt[0].trim(),ft.split(",").forEach(function(_t){_t=_t.replace(/^svg/i,"").trim(),_t!==""&&(Z[_t]?u.util.object.extend(Z[_t],$):Z[_t]=u.util.object.clone($))})}))}return Z},loadSVGFromURL:function(D,w,B,F){D=D.replace(/^\n\s*/,"").trim(),new u.util.request(D,{method:"get",onComplete:Z});function Z(I){var et=I.responseXML;if(!et||!et.documentElement)return w&&w(null),!1;u.parseSVGDocument(et.documentElement,function(ft,yt,$,W){w&&w(ft,yt,$,W)},B,F)}},loadSVGFromString:function(D,w,B,F){var Z=new u.window.DOMParser,I=Z.parseFromString(D.trim(),"text/xml");u.parseSVGDocument(I.documentElement,function(et,ft,yt,$){w(et,ft,yt,$)},B,F)}})}(M),m.ElementsParser=function(v,u,c,h,a,r){this.elements=v,this.callback=u,this.options=c,this.reviver=h,this.svgUid=c&&c.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},function(v){v.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},v.createObjects=function(){var u=this;this.elements.forEach(function(c,h){c.setAttribute("svgUid",u.svgUid),u.createObject(c,h)})},v.findTag=function(u){return m[m.util.string.capitalize(u.tagName.replace("svg:",""))]},v.createObject=function(u,c){var h=this.findTag(u);if(h&&h.fromElement)try{h.fromElement(u,this.createCallback(c,u),this.options)}catch(a){m.log(a)}else this.checkIfDone()},v.createCallback=function(u,c){var h=this;return function(a){var r;h.resolveGradient(a,c,"fill"),h.resolveGradient(a,c,"stroke"),a instanceof m.Image&&a._originalElement&&(r=a.parsePreserveAspectRatioAttribute(c)),a._removeTransformMatrix(r),h.resolveClipPath(a,c),h.reviver&&h.reviver(c,a),h.instances[u]=a,h.checkIfDone()}},v.extractPropertyDefinition=function(u,c,h){var a=u[c],r=this.regexUrl;if(r.test(a)){r.lastIndex=0;var n=r.exec(a)[1];return r.lastIndex=0,m[h][this.svgUid][n]}},v.resolveGradient=function(u,c,h){var a=this.extractPropertyDefinition(u,h,"gradientDefs");if(a){var r=c.getAttribute(h+"-opacity"),n=m.Gradient.fromElement(a,u,r,this.options);u.set(h,n)}},v.createClipPathCallback=function(u,c){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,c.push(h)}},v.resolveClipPath=function(u,c){var h=this.extractPropertyDefinition(u,"clipPath","clipPaths"),a,r,n,s,f,o;if(h){s=[],n=m.util.invertTransform(u.calcTransformMatrix());for(var d=h[0].parentNode,p=c;p.parentNode&&p.getAttribute("clip-path")!==u.clipPath;)p=p.parentNode;p.parentNode.appendChild(d);for(var _=0;_<h.length;_++)a=h[_],r=this.findTag(a),r.fromElement(a,this.createClipPathCallback(u,s),this.options);s.length===1?h=s[0]:h=new m.Group(s),f=m.util.multiplyTransformMatrices(n,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,p);var o=m.util.qrDecompose(f);h.flipX=!1,h.flipY=!1,h.set("scaleX",o.scaleX),h.set("scaleY",o.scaleY),h.angle=o.angle,h.skewX=o.skewX,h.skewY=0,h.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),u.clipPath=h}else delete u.clipPath},v.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(u){return u!=null}),this.callback(this.instances,this.elements))}}(m.ElementsParser.prototype),function(v){var u=v.fabric||(v.fabric={});if(u.Point){u.warn("fabric.Point is already defined");return}u.Point=c;function c(h,a){this.x=h,this.y=a}c.prototype={type:"point",constructor:c,add:function(h){return new c(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new c(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new c(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new c(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new c(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new c(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new c(this.x+(h.x-this.x)*a,this.y+(h.y-this.y)*a)},distanceFrom:function(h){var a=this.x-h.x,r=this.y-h.y;return Math.sqrt(a*a+r*r)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new c(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new c(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,a){return this.x=h,this.y=a,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var a=this.x,r=this.y;this.x=h.x,this.y=h.y,h.x=a,h.y=r},clone:function(){return new c(this.x,this.y)}}}(M),function(v){var u=v.fabric||(v.fabric={});if(u.Intersection){u.warn("fabric.Intersection is already defined");return}function c(h){this.status=h,this.points=[]}u.Intersection=c,u.Intersection.prototype={constructor:c,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},u.Intersection.intersectLineLine=function(h,a,r,n){var s,f=(n.x-r.x)*(h.y-r.y)-(n.y-r.y)*(h.x-r.x),o=(a.x-h.x)*(h.y-r.y)-(a.y-h.y)*(h.x-r.x),d=(n.y-r.y)*(a.x-h.x)-(n.x-r.x)*(a.y-h.y);if(d!==0){var p=f/d,_=o/d;0<=p&&p<=1&&0<=_&&_<=1?(s=new c("Intersection"),s.appendPoint(new u.Point(h.x+p*(a.x-h.x),h.y+p*(a.y-h.y)))):s=new c}else f===0||o===0?s=new c("Coincident"):s=new c("Parallel");return s},u.Intersection.intersectLinePolygon=function(h,a,r){var n=new c,s=r.length,f,o,d,p;for(p=0;p<s;p++)f=r[p],o=r[(p+1)%s],d=c.intersectLineLine(h,a,f,o),n.appendPoints(d.points);return n.points.length>0&&(n.status="Intersection"),n},u.Intersection.intersectPolygonPolygon=function(h,a){var r=new c,n=h.length,s;for(s=0;s<n;s++){var f=h[s],o=h[(s+1)%n],d=c.intersectLinePolygon(f,o,a);r.appendPoints(d.points)}return r.points.length>0&&(r.status="Intersection"),r},u.Intersection.intersectPolygonRectangle=function(h,a,r){var n=a.min(r),s=a.max(r),f=new u.Point(s.x,n.y),o=new u.Point(n.x,s.y),d=c.intersectLinePolygon(n,f,h),p=c.intersectLinePolygon(f,s,h),_=c.intersectLinePolygon(s,o,h),S=c.intersectLinePolygon(o,n,h),C=new c;return C.appendPoints(d.points),C.appendPoints(p.points),C.appendPoints(_.points),C.appendPoints(S.points),C.points.length>0&&(C.status="Intersection"),C}}(M),function(v){var u=v.fabric||(v.fabric={});if(u.Color){u.warn("fabric.Color is already defined.");return}function c(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}u.Color=c,u.Color.prototype={_tryParsingColor:function(a){var r;a in c.colorNameMap&&(a=c.colorNameMap[a]),a==="transparent"&&(r=[255,255,255,0]),r||(r=c.sourceFromHex(a)),r||(r=c.sourceFromRgb(a)),r||(r=c.sourceFromHsl(a)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(a,r,n){a/=255,r/=255,n/=255;var s,f,o,d=u.util.array.max([a,r,n]),p=u.util.array.min([a,r,n]);if(o=(d+p)/2,d===p)s=f=0;else{var _=d-p;switch(f=o>.5?_/(2-d-p):_/(d+p),d){case a:s=(r-n)/_+(r<n?6:0);break;case r:s=(n-a)/_+2;break;case n:s=(a-r)/_+4;break}s/=6}return[Math.round(s*360),Math.round(f*100),Math.round(o*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),r=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+r[0]+","+r[1]+"%,"+r[2]+"%)"},toHsla:function(){var a=this.getSource(),r=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),r,n,s;return r=a[0].toString(16),r=r.length===1?"0"+r:r,n=a[1].toString(16),n=n.length===1?"0"+n:n,s=a[2].toString(16),s=s.length===1?"0"+s:s,r.toUpperCase()+n.toUpperCase()+s.toUpperCase()},toHexa:function(){var a=this.getSource(),r;return r=Math.round(a[3]*255),r=r.toString(16),r=r.length===1?"0"+r:r,this.toHex()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var r=this.getSource();return r[3]=a,this.setSource(r),this},toGrayscale:function(){var a=this.getSource(),r=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),n=a[3];return this.setSource([r,r,r,n]),this},toBlackWhite:function(a){var r=this.getSource(),n=(r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),s=r[3];return a=a||127,n=Number(n)<Number(a)?0:255,this.setSource([n,n,n,s]),this},overlayWith:function(a){a instanceof c||(a=new c(a));var r=[],n=this.getAlpha(),s=.5,f=this.getSource(),o=a.getSource(),d;for(d=0;d<3;d++)r.push(Math.round(f[d]*(1-s)+o[d]*s));return r[3]=n,this.setSource(r),this}},u.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,u.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,u.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,u.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(a,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?a+(r-a)*6*n:n<1/2?r:n<2/3?a+(r-a)*(2/3-n)*6:a}u.Color.fromRgb=function(a){return c.fromSource(c.sourceFromRgb(a))},u.Color.sourceFromRgb=function(a){var r=a.match(c.reRGBa);if(r){var n=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),s=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),f=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(n,10),parseInt(s,10),parseInt(f,10),r[4]?parseFloat(r[4]):1]}},u.Color.fromRgba=c.fromRgb,u.Color.fromHsl=function(a){return c.fromSource(c.sourceFromHsl(a))},u.Color.sourceFromHsl=function(a){var r=a.match(c.reHSLa);if(r){var n=(parseFloat(r[1])%360+360)%360/360,s=parseFloat(r[2])/(/%$/.test(r[2])?100:1),f=parseFloat(r[3])/(/%$/.test(r[3])?100:1),o,d,p;if(s===0)o=d=p=f;else{var _=f<=.5?f*(s+1):f+s-f*s,S=f*2-_;o=h(S,_,n+1/3),d=h(S,_,n),p=h(S,_,n-1/3)}return[Math.round(o*255),Math.round(d*255),Math.round(p*255),r[4]?parseFloat(r[4]):1]}},u.Color.fromHsla=c.fromHsl,u.Color.fromHex=function(a){return c.fromSource(c.sourceFromHex(a))},u.Color.sourceFromHex=function(a){if(a.match(c.reHex)){var r=a.slice(a.indexOf("#")+1),n=r.length===3||r.length===4,s=r.length===8||r.length===4,f=n?r.charAt(0)+r.charAt(0):r.substring(0,2),o=n?r.charAt(1)+r.charAt(1):r.substring(2,4),d=n?r.charAt(2)+r.charAt(2):r.substring(4,6),p=s?n?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(f,16),parseInt(o,16),parseInt(d,16),parseFloat((parseInt(p,16)/255).toFixed(2))]}},u.Color.fromSource=function(a){var r=new c;return r.setSource(a),r}}(M),function(v){var u=v.fabric||(v.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],a={},r="left",n="top",s="right",f="bottom",o="center",d={top:f,bottom:n,left:s,right:r,center:o},p=u.util.radiansToDegrees,_=Math.sign||function($){return($>0)-($<0)||+$};function S($,W){var rt=$.angle+p(Math.atan2(W.y,W.x))+360;return Math.round(rt%360/45)}function C($,W){var rt=W.transform.target,st=rt.canvas,tt=u.util.object.clone(W);tt.target=rt,st&&st.fire("object:"+$,tt),rt.fire($,W)}function O($,W){var rt=W.canvas,st=rt.uniScaleKey,tt=$[st];return rt.uniformScaling&&!tt||!rt.uniformScaling&&tt}function k($){return $.originX===o&&$.originY===o}function P($,W,rt){var st=$.lockScalingX,tt=$.lockScalingY;return!!(st&&tt||!W&&(st||tt)&&rt||st&&W==="x"||tt&&W==="y")}function H($,W,rt){var st="not-allowed",tt=O($,rt),ot="";if(W.x!==0&&W.y===0?ot="x":W.x===0&&W.y!==0&&(ot="y"),P(rt,ot,tt))return st;var _t=S(rt,W);return c[_t]+"-resize"}function K($,W,rt){var st="not-allowed";if(W.x!==0&&rt.lockSkewingY||W.y!==0&&rt.lockSkewingX)return st;var tt=S(rt,W)%4;return h[tt]+"-resize"}function ct($,W,rt){return $[rt.canvas.altActionKey]?a.skewCursorStyleHandler($,W,rt):a.scaleCursorStyleHandler($,W,rt)}function mt($,W,rt){var st=$[rt.canvas.altActionKey];if(W.x===0)return st?"skewX":"scaleY";if(W.y===0)return st?"skewY":"scaleX"}function pt($,W,rt){return rt.lockRotation?"not-allowed":W.cursorStyle}function vt($,W,rt,st){return{e:$,transform:W,pointer:{x:rt,y:st}}}function gt($){return function(W,rt,st,tt){var ot=rt.target,_t=ot.getCenterPoint(),At=ot.translateToOriginPoint(_t,rt.originX,rt.originY),Ct=$(W,rt,st,tt);return ot.setPositionByOrigin(At,rt.originX,rt.originY),Ct}}function z($,W){return function(rt,st,tt,ot){var _t=W(rt,st,tt,ot);return _t&&C($,vt(rt,st,tt,ot)),_t}}function X($,W,rt,st,tt){var ot=$.target,_t=ot.controls[$.corner],At=ot.canvas.getZoom(),Ct=ot.padding/At,lt=ot.toLocalPoint(new u.Point(st,tt),W,rt);return lt.x>=Ct&&(lt.x-=Ct),lt.x<=-Ct&&(lt.x+=Ct),lt.y>=Ct&&(lt.y-=Ct),lt.y<=Ct&&(lt.y+=Ct),lt.x-=_t.offsetX,lt.y-=_t.offsetY,lt}function G($){return $.flipX!==$.flipY}function x($,W,rt,st,tt){if($[W]!==0){var ot=$._getTransformedDimensions()[st],_t=tt/ot*$[rt];$.set(rt,_t)}}function b($,W,rt,st){var tt=W.target,ot=tt._getTransformedDimensions(0,tt.skewY),_t=X(W,W.originX,W.originY,rt,st),At=Math.abs(_t.x*2)-ot.x,Ct=tt.skewX,lt;At<2?lt=0:(lt=p(Math.atan2(At/tt.scaleX,ot.y/tt.scaleY)),W.originX===r&&W.originY===f&&(lt=-lt),W.originX===s&&W.originY===n&&(lt=-lt),G(tt)&&(lt=-lt));var xt=Ct!==lt;if(xt){var wt=tt._getTransformedDimensions().y;tt.set("skewX",lt),x(tt,"skewY","scaleY","y",wt)}return xt}function E($,W,rt,st){var tt=W.target,ot=tt._getTransformedDimensions(tt.skewX,0),_t=X(W,W.originX,W.originY,rt,st),At=Math.abs(_t.y*2)-ot.y,Ct=tt.skewY,lt;At<2?lt=0:(lt=p(Math.atan2(At/tt.scaleY,ot.x/tt.scaleX)),W.originX===r&&W.originY===f&&(lt=-lt),W.originX===s&&W.originY===n&&(lt=-lt),G(tt)&&(lt=-lt));var xt=Ct!==lt;if(xt){var wt=tt._getTransformedDimensions().x;tt.set("skewY",lt),x(tt,"skewX","scaleX","x",wt)}return xt}function R($,W,rt,st){var tt=W.target,ot=tt.skewX,_t,At=W.originY;if(tt.lockSkewingX)return!1;if(ot===0){var Ct=X(W,o,o,rt,st);Ct.x>0?_t=r:_t=s}else ot>0&&(_t=At===n?r:s),ot<0&&(_t=At===n?s:r),G(tt)&&(_t=_t===r?s:r);W.originX=_t;var lt=z("skewing",gt(b));return lt($,W,rt,st)}function U($,W,rt,st){var tt=W.target,ot=tt.skewY,_t,At=W.originX;if(tt.lockSkewingY)return!1;if(ot===0){var Ct=X(W,o,o,rt,st);Ct.y>0?_t=n:_t=f}else ot>0&&(_t=At===r?n:f),ot<0&&(_t=At===r?f:n),G(tt)&&(_t=_t===n?f:n);W.originY=_t;var lt=z("skewing",gt(E));return lt($,W,rt,st)}function D($,W,rt,st){var tt=W,ot=tt.target,_t=ot.translateToOriginPoint(ot.getCenterPoint(),tt.originX,tt.originY);if(ot.lockRotation)return!1;var At=Math.atan2(tt.ey-_t.y,tt.ex-_t.x),Ct=Math.atan2(st-_t.y,rt-_t.x),lt=p(Ct-At+tt.theta),xt=!0;if(ot.snapAngle>0){var wt=ot.snapAngle,Bt=ot.snapThreshold||wt,Ft=Math.ceil(lt/wt)*wt,Ut=Math.floor(lt/wt)*wt;Math.abs(lt-Ut)<Bt?lt=Ut:Math.abs(lt-Ft)<Bt&&(lt=Ft)}return lt<0&&(lt=360+lt),lt%=360,xt=ot.angle!==lt,ot.angle=lt,xt}function w($,W,rt,st,tt){tt=tt||{};var ot=W.target,_t=ot.lockScalingX,At=ot.lockScalingY,Ct=tt.by,lt,xt,wt,Bt,Ft=O($,ot),Ut=P(ot,Ct,Ft),ee,Kt,Qe=W.gestureScale;if(Ut)return!1;if(Qe)xt=W.scaleX*Qe,wt=W.scaleY*Qe;else{if(lt=X(W,W.originX,W.originY,rt,st),ee=Ct!=="y"?_(lt.x):1,Kt=Ct!=="x"?_(lt.y):1,W.signX||(W.signX=ee),W.signY||(W.signY=Kt),ot.lockScalingFlip&&(W.signX!==ee||W.signY!==Kt))return!1;if(Bt=ot._getTransformedDimensions(),Ft&&!Ct){var Ni=Math.abs(lt.x)+Math.abs(lt.y),Me=W.original,Fi=Math.abs(Bt.x*Me.scaleX/ot.scaleX)+Math.abs(Bt.y*Me.scaleY/ot.scaleY),ge=Ni/Fi;xt=Me.scaleX*ge,wt=Me.scaleY*ge}else xt=Math.abs(lt.x*ot.scaleX/Bt.x),wt=Math.abs(lt.y*ot.scaleY/Bt.y);k(W)&&(xt*=2,wt*=2),W.signX!==ee&&Ct!=="y"&&(W.originX=d[W.originX],xt*=-1,W.signX=ee),W.signY!==Kt&&Ct!=="x"&&(W.originY=d[W.originY],wt*=-1,W.signY=Kt)}var ls=ot.scaleX,Ke=ot.scaleY;return Ct?(Ct==="x"&&ot.set("scaleX",xt),Ct==="y"&&ot.set("scaleY",wt)):(!_t&&ot.set("scaleX",xt),!At&&ot.set("scaleY",wt)),ls!==ot.scaleX||Ke!==ot.scaleY}function B($,W,rt,st){return w($,W,rt,st)}function F($,W,rt,st){return w($,W,rt,st,{by:"x"})}function Z($,W,rt,st){return w($,W,rt,st,{by:"y"})}function I($,W,rt,st){return $[W.target.canvas.altActionKey]?a.skewHandlerX($,W,rt,st):a.scalingY($,W,rt,st)}function et($,W,rt,st){return $[W.target.canvas.altActionKey]?a.skewHandlerY($,W,rt,st):a.scalingX($,W,rt,st)}function ft($,W,rt,st){var tt=W.target,ot=X(W,W.originX,W.originY,rt,st),_t=tt.strokeWidth/(tt.strokeUniform?tt.scaleX:1),At=k(W)?2:1,Ct=tt.width,lt=Math.abs(ot.x*At/tt.scaleX)-_t;return tt.set("width",Math.max(lt,0)),Ct!==lt}function yt($,W,rt,st){var tt=W.target,ot=rt-W.offsetX,_t=st-W.offsetY,At=!tt.get("lockMovementX")&&tt.left!==ot,Ct=!tt.get("lockMovementY")&&tt.top!==_t;return At&&tt.set("left",ot),Ct&&tt.set("top",_t),(At||Ct)&&C("moving",vt($,W,rt,st)),At||Ct}a.scaleCursorStyleHandler=H,a.skewCursorStyleHandler=K,a.scaleSkewCursorStyleHandler=ct,a.rotationWithSnapping=z("rotating",gt(D)),a.scalingEqually=z("scaling",gt(B)),a.scalingX=z("scaling",gt(F)),a.scalingY=z("scaling",gt(Z)),a.scalingYOrSkewingX=I,a.scalingXOrSkewingY=et,a.changeWidth=z("resizing",gt(ft)),a.skewHandlerX=R,a.skewHandlerY=U,a.dragHandler=yt,a.scaleOrSkewActionName=mt,a.rotationStyleHandler=pt,a.fireEvent=C,a.wrapWithFixedAnchor=gt,a.wrapWithFireEvent=z,a.getLocalPoint=X,u.controlsUtils=a}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.degreesToRadians,h=u.controlsUtils;function a(n,s,f,o,d){o=o||{};var p=this.sizeX||o.cornerSize||d.cornerSize,_=this.sizeY||o.cornerSize||d.cornerSize,S=typeof o.transparentCorners<"u"?o.transparentCorners:d.transparentCorners,C=S?"stroke":"fill",O=!S&&(o.cornerStrokeColor||d.cornerStrokeColor),k=s,P=f,H;n.save(),n.fillStyle=o.cornerColor||d.cornerColor,n.strokeStyle=o.cornerStrokeColor||d.cornerStrokeColor,p>_?(H=p,n.scale(1,_/p),P=f*p/_):_>p?(H=_,n.scale(p/_,1),k=s*_/p):H=p,n.lineWidth=1,n.beginPath(),n.arc(k,P,H/2,0,2*Math.PI,!1),n[C](),O&&n.stroke(),n.restore()}function r(n,s,f,o,d){o=o||{};var p=this.sizeX||o.cornerSize||d.cornerSize,_=this.sizeY||o.cornerSize||d.cornerSize,S=typeof o.transparentCorners<"u"?o.transparentCorners:d.transparentCorners,C=S?"stroke":"fill",O=!S&&(o.cornerStrokeColor||d.cornerStrokeColor),k=p/2,P=_/2;n.save(),n.fillStyle=o.cornerColor||d.cornerColor,n.strokeStyle=o.cornerStrokeColor||d.cornerStrokeColor,n.lineWidth=1,n.translate(s,f),n.rotate(c(d.angle)),n[C+"Rect"](-k,-P,p,_),O&&n.strokeRect(-k,-P,p,_),n.restore()}h.renderCircleControl=a,h.renderSquareControl=r}(M),function(v){var u=v.fabric||(v.fabric={});function c(h){for(var a in h)this[a]=h[a]}u.Control=c,u.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,a){return a.cursorStyle},getActionName:function(h,a){return a.actionName},getVisibility:function(h,a){var r=h._controlsVisibility;return r&&typeof r[a]<"u"?r[a]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,a){var r=u.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},a);return r},calcCornerCoords:function(h,a,r,n,s){var f,o,d,p,_=s?this.touchSizeX:this.sizeX,S=s?this.touchSizeY:this.sizeY;if(_&&S&&_!==S){var C=Math.atan2(S,_),O=Math.sqrt(_*_+S*S)/2,k=C-u.util.degreesToRadians(h),P=Math.PI/2-C-u.util.degreesToRadians(h);f=O*u.util.cos(k),o=O*u.util.sin(k),d=O*u.util.cos(P),p=O*u.util.sin(P)}else{var H=_&&S?_:a;O=H*.7071067812;var k=u.util.degreesToRadians(45-h);f=d=O*u.util.cos(k),o=p=O*u.util.sin(k)}return{tl:{x:r-p,y:n-d},tr:{x:r+f,y:n-o},bl:{x:r-f,y:n+o},br:{x:r+p,y:n+d}}},render:function(h,a,r,n,s){switch(n=n||{},n.cornerStyle||s.cornerStyle){case"circle":u.controlsUtils.renderCircleControl.call(this,h,a,r,n,s);break;default:u.controlsUtils.renderSquareControl.call(this,h,a,r,n,s)}}}}(M),function(){function v(r,n){var s=r.getAttribute("style"),f=r.getAttribute("offset")||0,o,d,p,_;if(f=parseFloat(f)/(/%$/.test(f)?100:1),f=f<0?0:f>1?1:f,s){var S=s.split(/\s*;\s*/);for(S[S.length-1]===""&&S.pop(),_=S.length;_--;){var C=S[_].split(/\s*:\s*/),O=C[0].trim(),k=C[1].trim();O==="stop-color"?o=k:O==="stop-opacity"&&(p=k)}}return o||(o=r.getAttribute("stop-color")||"rgb(0,0,0)"),p||(p=r.getAttribute("stop-opacity")),o=new m.Color(o),d=o.getAlpha(),p=isNaN(parseFloat(p))?1:parseFloat(p),p*=d*n,{offset:f,color:o.toRgb(),opacity:p}}function u(r){return{x1:r.getAttribute("x1")||0,y1:r.getAttribute("y1")||0,x2:r.getAttribute("x2")||"100%",y2:r.getAttribute("y2")||0}}function c(r){return{x1:r.getAttribute("fx")||r.getAttribute("cx")||"50%",y1:r.getAttribute("fy")||r.getAttribute("cy")||"50%",r1:0,x2:r.getAttribute("cx")||"50%",y2:r.getAttribute("cy")||"50%",r2:r.getAttribute("r")||"50%"}}var h=m.util.object.clone;m.Gradient=m.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(r){r||(r={}),r.coords||(r.coords={});var n,s=this;Object.keys(r).forEach(function(f){s[f]=r[f]}),this.id?this.id+="_"+m.Object.__uid++:this.id=m.Object.__uid++,n={x1:r.coords.x1||0,y1:r.coords.y1||0,x2:r.coords.x2||0,y2:r.coords.y2||0},this.type==="radial"&&(n.r1=r.coords.r1||0,n.r2=r.coords.r2||0),this.coords=n,this.colorStops=r.colorStops.slice()},addColorStop:function(r){for(var n in r){var s=new m.Color(r[n]);this.colorStops.push({offset:parseFloat(n),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(r){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return m.util.populateWithProperties(this,n,r),n},toSVG:function(r,d){var s=h(this.coords,!0),f,o,d=d||{},p,_,S=h(this.colorStops,!0),C=s.r1>s.r2,O=this.gradientTransform?this.gradientTransform.concat():m.iMatrix.concat(),k=-this.offsetX,P=-this.offsetY,H=!!d.additionalTransform,K=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(S.sort(function(gt,z){return gt.offset-z.offset}),K==="objectBoundingBox"?(k/=r.width,P/=r.height):(k+=r.width/2,P+=r.height/2),r.type==="path"&&this.gradientUnits!=="percentage"&&(k-=r.pathOffset.x,P-=r.pathOffset.y),O[4]-=k,O[5]-=P,_='id="SVGID_'+this.id+'" gradientUnits="'+K+'"',_+=' gradientTransform="'+(H?d.additionalTransform+" ":"")+m.util.matrixToSVG(O)+'" ',this.type==="linear"?p=["<linearGradient ",_,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(p=["<radialGradient ",_,' cx="',C?s.x1:s.x2,'" cy="',C?s.y1:s.y2,'" r="',C?s.r1:s.r2,'" fx="',C?s.x2:s.x1,'" fy="',C?s.y2:s.y1,`">
`]),this.type==="radial"){if(C)for(S=S.concat(),S.reverse(),f=0,o=S.length;f<o;f++)S[f].offset=1-S[f].offset;var ct=Math.min(s.r1,s.r2);if(ct>0){var mt=Math.max(s.r1,s.r2),pt=ct/mt;for(f=0,o=S.length;f<o;f++)S[f].offset+=pt*(1-S[f].offset)}}for(f=0,o=S.length;f<o;f++){var vt=S[f];p.push("<stop ",'offset="',vt.offset*100+"%",'" style="stop-color:',vt.color,typeof vt.opacity<"u"?";stop-opacity: "+vt.opacity:";",`"/>
`)}return p.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),p.join("")},toLive:function(r){var n,s=m.util.object.clone(this.coords),f,o;if(this.type){for(this.type==="linear"?n=r.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(n=r.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),f=0,o=this.colorStops.length;f<o;f++){var d=this.colorStops[f].color,p=this.colorStops[f].opacity,_=this.colorStops[f].offset;typeof p<"u"&&(d=new m.Color(d).setAlpha(p).toRgba()),n.addColorStop(_,d)}return n}}}),m.util.object.extend(m.Gradient,{fromElement:function(r,n,s,f){var o=parseFloat(s)/(/%$/.test(s)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var d=r.getElementsByTagName("stop"),p,_=r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",S=r.getAttribute("gradientTransform")||"",C=[],O,k,P=0,H=0,K;for(r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?(p="linear",O=u(r)):(p="radial",O=c(r)),k=d.length;k--;)C.push(v(d[k],o));K=m.parseTransformAttribute(S),a(n,O,f,_),_==="pixels"&&(P=-n.left,H=-n.top);var ct=new m.Gradient({id:r.getAttribute("id"),type:p,coords:O,colorStops:C,gradientUnits:_,gradientTransform:K,offsetX:P,offsetY:H});return ct}});function a(r,n,s,f){var o,d;Object.keys(n).forEach(function(p){o=n[p],o==="Infinity"?d=1:o==="-Infinity"?d=0:(d=parseFloat(n[p],10),typeof o=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(d*=.01,f==="pixels"&&((p==="x1"||p==="x2"||p==="r2")&&(d*=s.viewBoxWidth||s.width),(p==="y1"||p==="y2")&&(d*=s.viewBoxHeight||s.height)))),n[p]=d})}}(),function(){var v=m.util.toFixed;m.Pattern=m.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(u,c){if(u||(u={}),this.id=m.Object.__uid++,this.setOptions(u),!u.source||u.source&&typeof u.source!="string"){c&&c(this);return}else{var h=this;this.source=m.util.createImage(),m.util.loadImage(u.source,function(a,r){h.source=a,c&&c(h,r)},null,this.crossOrigin)}},toObject:function(u){var c=m.Object.NUM_FRACTION_DIGITS,h,a;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),a={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:v(this.offsetX,c),offsetY:v(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},m.util.populateWithProperties(this,a,u),a},toSVG:function(u){var c=typeof this.source=="function"?this.source():this.source,h=c.width/u.width,a=c.height/u.height,r=this.offsetX/u.width,n=this.offsetY/u.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,n&&(a+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,r&&(h+=Math.abs(r))),c.src?s=c.src:c.toDataURL&&(s=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+n+'" width="'+h+'" height="'+a+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(u){for(var c in u)this[c]=u[c]},toLive:function(u){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":u.createPattern(c,this.repeat)}})}(),function(v){var u=v.fabric||(v.fabric={}),c=u.util.toFixed;if(u.Shadow){u.warn("fabric.Shadow is already defined.");return}u.Shadow=u.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var a in h)this[a]=h[a];this.id=u.Object.__uid++},_parseShadow:function(h){var a=h.trim(),r=u.Shadow.reOffsetsAndBlur.exec(a)||[],n=a.replace(u.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var a=40,r=40,n=u.Object.NUM_FRACTION_DIGITS,s=u.util.rotateVector({x:this.offsetX,y:this.offsetY},u.util.degreesToRadians(-h.angle)),f=20,o=new u.Color(this.color);return h.width&&h.height&&(a=c((Math.abs(s.x)+this.blur)/h.width,n)*100+f,r=c((Math.abs(s.y)+this.blur)/h.height,n)*100+f),h.flipX&&(s.x*=-1),h.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+c(s.x,n)+'" dy="'+c(s.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+o.toRgb()+'" flood-opacity="'+o.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},a=u.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(r){this[r]!==a[r]&&(h[r]=this[r])},this),h}}),u.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(M),function(){if(m.StaticCanvas){m.warn("fabric.StaticCanvas is already defined.");return}var v=m.util.object.extend,u=m.util.getElementOffset,c=m.util.removeFromArray,h=m.util.toFixed,a=m.util.transformPoint,r=m.util.invertTransform,n=m.util.getNodeCanvas,s=m.util.createCanvasElement,f=new Error("Could not initialize `canvas` element");m.StaticCanvas=m.util.createClass(m.CommonMethods,{initialize:function(o,d){d||(d={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,d)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:m.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,d){var p=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(d),this.interactive||this._initRetinaScaling(),d.overlayImage&&this.setOverlayImage(d.overlayImage,p),d.backgroundImage&&this.setBackgroundImage(d.backgroundImage,p),d.backgroundColor&&this.setBackgroundColor(d.backgroundColor,p),d.overlayColor&&this.setOverlayColor(d.overlayColor,p),this.calcOffset()},_isRetinaScaling:function(){return m.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,m.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=m.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,d,p){d.setAttribute("width",this.width*o),d.setAttribute("height",this.height*o),p.scale(o,o)},calcOffset:function(){return this._offset=u(this.lowerCanvasEl),this},setOverlayImage:function(o,d,p){return this.__setBgOverlayImage("overlayImage",o,d,p)},setBackgroundImage:function(o,d,p){return this.__setBgOverlayImage("backgroundImage",o,d,p)},setOverlayColor:function(o,d){return this.__setBgOverlayColor("overlayColor",o,d)},setBackgroundColor:function(o,d){return this.__setBgOverlayColor("backgroundColor",o,d)},__setBgOverlayImage:function(o,d,p,_){return typeof d=="string"?m.util.loadImage(d,function(S,C){if(S){var O=new m.Image(S,_);this[o]=O,O.canvas=this}p&&p(S,C)},this,_&&_.crossOrigin):(_&&d.setOptions(_),this[o]=d,d&&(d.canvas=this),p&&p(d,!1)),this},__setBgOverlayColor:function(o,d,p){return this[o]=d,this._initGradient(d,o),this._initPattern(d,o,p),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),typeof o.getContext>"u"))throw f;return o},_initOptions:function(o){var d=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(d.width,10)||0,this.height=this.height||parseInt(d.height,10)||0,this.lowerCanvasEl.style&&(d.width=this.width,d.height=this.height,d.style.width=this.width+"px",d.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){o&&o.getContext?this.lowerCanvasEl=o:this.lowerCanvasEl=m.util.getById(o)||this._createCanvasElement(),m.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,d){return this.setDimensions({width:o},d)},setHeight:function(o,d){return this.setDimensions({height:o},d)},setDimensions:function(o,d){var p;d=d||{};for(var _ in o)p=o[_],d.cssOnly||(this._setBackstoreDimension(_,o[_]),p+="px",this.hasLostContext=!0),d.backstoreOnly||this._setCssDimension(_,p);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),d.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,d){return this.lowerCanvasEl[o]=d,this.upperCanvasEl&&(this.upperCanvasEl[o]=d),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=d),this[o]=d,this},_setCssDimension:function(o,d){return this.lowerCanvasEl.style[o]=d,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=d),this.wrapperEl&&(this.wrapperEl.style[o]=d),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var d=this._activeObject,p=this.backgroundImage,_=this.overlayImage,S,C,O;for(this.viewportTransform=o,C=0,O=this._objects.length;C<O;C++)S=this._objects[C],S.group||S.setCoords(!0);return d&&d.setCoords(),p&&p.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,d){var p=o,_=this.viewportTransform.slice(0);o=a(o,r(this.viewportTransform)),_[0]=d,_[3]=d;var S=a(o,_);return _[4]+=p.x-S.x,_[5]+=p.y-S.y,this.setViewportTransform(_)},setZoom:function(o){return this.zoomToPoint(new m.Point(0,0),o),this},absolutePan:function(o){var d=this.viewportTransform.slice(0);return d[4]=-o.x,d[5]=-o.y,this.setViewportTransform(d)},relativePan:function(o){return this.absolutePan(new m.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var o=this.contextContainer;return this.renderCanvas(o,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=m.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},d=this.width,p=this.height,_=r(this.viewportTransform);return o.tl=a({x:0,y:0},_),o.br=a({x:d,y:p},_),o.tr=new m.Point(o.br.x,o.tl.y),o.bl=new m.Point(o.tl.x,o.br.y),this.vptCoords=o,o},cancelRequestedRender:function(){this.isRendering&&(m.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,d){var p=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),m.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._renderObjects(o,d),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var d=this.viewportTransform,p=this.clipPath;o.save(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.globalCompositeOperation="destination-in",p.transform(o),o.scale(1/p.zoomX,1/p.zoomY),o.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),o.restore()},_renderObjects:function(o,d){var p,_;for(p=0,_=d.length;p<_;++p)d[p]&&d[p].render(o)},_renderBackgroundOrOverlay:function(o,d){var p=this[d+"Color"],_=this[d+"Image"],S=this.viewportTransform,C=this[d+"Vpt"];if(!(!p&&!_)){if(p){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=p.toLive?p.toLive(o,this):p,C&&o.transform(S[0],S[1],S[2],S[3],S[4],S[5]),o.transform(1,0,0,1,p.offsetX||0,p.offsetY||0);var O=p.gradientTransform||p.patternTransform;O&&o.transform(O[0],O[1],O[2],O[3],O[4],O[5]),o.fill(),o.restore()}if(_){o.save();var k=this.skipOffscreen;this.skipOffscreen=C,C&&o.transform(S[0],S[1],S[2],S[3],S[4],S[5]),_.render(o),this.skipOffscreen=k,o.restore()}}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new m.Point(this.width/2,this.height/2)},centerObjectH:function(o){return this._centerObject(o,new m.Point(this.getCenterPoint().x,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new m.Point(o.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(o){var d=this.getCenterPoint();return this._centerObject(o,d)},viewportCenterObject:function(o){var d=this.getVpCenter();return this._centerObject(o,d)},viewportCenterObjectH:function(o){var d=this.getVpCenter();return this._centerObject(o,new m.Point(d.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var d=this.getVpCenter();return this._centerObject(o,new m.Point(o.getCenterPoint().x,d.y))},getVpCenter:function(){var o=this.getCenterPoint(),d=r(this.viewportTransform);return a(o,d)},_centerObject:function(o,d){return o.setPositionByOrigin(d,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,d){var p=this.clipPath,_={version:m.version,objects:this._toObjects(o,d)};return p&&!p.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,o,d)),v(_,this.__serializeBgOverlay(o,d)),m.util.populateWithProperties(this,_,d),_},_toObjects:function(o,d){return this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){return this._toObject(p,o,d)},this)},_toObject:function(o,d,p){var _;this.includeDefaultValues||(_=o.includeDefaultValues,o.includeDefaultValues=!1);var S=o[d](p);return this.includeDefaultValues||(o.includeDefaultValues=_),S},__serializeBgOverlay:function(o,d){var p={},_=this.backgroundImage,S=this.overlayImage,C=this.backgroundColor,O=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(p.background=C.toObject(d)):C&&(p.background=C),O&&O.toObject?O.excludeFromExport||(p.overlay=O.toObject(d)):O&&(p.overlay=O),_&&!_.excludeFromExport&&(p.backgroundImage=this._toObject(_,o,d)),S&&!S.excludeFromExport&&(p.overlayImage=this._toObject(S,o,d)),p},svgViewportTransformation:!0,toSVG:function(o,d){o||(o={}),o.reviver=d;var p=[];return this._setSVGPreamble(p,o),this._setSVGHeader(p,o),this.clipPath&&p.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(p,"background"),this._setSVGBgOverlayImage(p,"backgroundImage",d),this._setSVGObjects(p,d),this.clipPath&&p.push(`</g>
`),this._setSVGBgOverlayColor(p,"overlay"),this._setSVGBgOverlayImage(p,"overlayImage",d),p.push("</svg>"),p.join("")},_setSVGPreamble:function(o,d){d.suppressPreamble||o.push('<?xml version="1.0" encoding="',d.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(o,d){var p=d.width||this.width,_=d.height||this.height,S,C='viewBox="0 0 '+this.width+" "+this.height+'" ',O=m.Object.NUM_FRACTION_DIGITS;d.viewBox?C='viewBox="'+d.viewBox.x+" "+d.viewBox.y+" "+d.viewBox.width+" "+d.viewBox.height+'" ':this.svgViewportTransformation&&(S=this.viewportTransform,C='viewBox="'+h(-S[4]/S[0],O)+" "+h(-S[5]/S[3],O)+" "+h(this.width/S[0],O)+" "+h(this.height/S[3],O)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',p,'" ','height="',_,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",m.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(d),`</defs>
`)},createSVGClipPathMarkup:function(o){var d=this.clipPath;return d?(d.clipPathId="CLIPPATH_"+m.Object.__uid++,'<clipPath id="'+d.clipPathId+`" >
`+this.clipPath.toClipPathSVG(o.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var o=this,d=["background","overlay"].map(function(p){var _=o[p+"Color"];if(_&&_.toLive){var S=o[p+"Vpt"],C=o.viewportTransform,O={width:o.width/(S?C[0]:1),height:o.height/(S?C[3]:1)};return _.toSVG(O,{additionalTransform:S?m.util.matrixToSVG(C):""})}});return d.join("")},createSVGFontFacesMarkup:function(){var o="",d={},p,_,S,C,O,k,P,H,K,ct=m.fontPaths,mt=[];for(this._objects.forEach(function vt(gt){mt.push(gt),gt._objects&&gt._objects.forEach(vt)}),H=0,K=mt.length;H<K;H++)if(p=mt[H],_=p.fontFamily,!(p.type.indexOf("text")===-1||d[_]||!ct[_])&&(d[_]=!0,!!p.styles)){S=p.styles;for(O in S){C=S[O];for(P in C)k=C[P],_=k.fontFamily,!d[_]&&ct[_]&&(d[_]=!0)}}for(var pt in d)o+=[`		@font-face {
`,"			font-family: '",pt,`';
`,"			src: url('",ct[pt],`');
`,`		}
`].join("");return o&&(o=['	<style type="text/css">',`<![CDATA[
`,o,"]]>",`</style>
`].join("")),o},_setSVGObjects:function(o,d){var p,_,S,C=this._objects;for(_=0,S=C.length;_<S;_++)p=C[_],!p.excludeFromExport&&this._setSVGObject(o,p,d)},_setSVGObject:function(o,d,p){o.push(d.toSVG(p))},_setSVGBgOverlayImage:function(o,d,p){this[d]&&!this[d].excludeFromExport&&this[d].toSVG&&o.push(this[d].toSVG(p))},_setSVGBgOverlayColor:function(o,d){var p=this[d+"Color"],_=this.viewportTransform,S=this.width,C=this.height;if(p)if(p.toLive){var O=p.repeat,k=m.util.invertTransform(_),P=this[d+"Vpt"],H=P?m.util.matrixToSVG(k):"";o.push('<rect transform="'+H+" translate(",S/2,",",C/2,')"',' x="',p.offsetX-S/2,'" y="',p.offsetY-C/2,'" ','width="',O==="repeat-y"||O==="no-repeat"?p.source.width:S,'" height="',O==="repeat-x"||O==="no-repeat"?p.source.height:C,'" fill="url(#SVGID_'+p.id+')"',`></rect>
`)}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',p,'"',`></rect>
`)},sendToBack:function(o){if(!o)return this;var d=this._activeObject,p,_,S;if(o===d&&o.type==="activeSelection")for(S=d._objects,p=S.length;p--;)_=S[p],c(this._objects,_),this._objects.unshift(_);else c(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var d=this._activeObject,p,_,S;if(o===d&&o.type==="activeSelection")for(S=d._objects,p=0;p<S.length;p++)_=S[p],c(this._objects,_),this._objects.push(_);else c(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,d){if(!o)return this;var p=this._activeObject,_,S,C,O,k,P=0;if(o===p&&o.type==="activeSelection")for(k=p._objects,_=0;_<k.length;_++)S=k[_],C=this._objects.indexOf(S),C>0+P&&(O=C-1,c(this._objects,S),this._objects.splice(O,0,S)),P++;else C=this._objects.indexOf(o),C!==0&&(O=this._findNewLowerIndex(o,C,d),c(this._objects,o),this._objects.splice(O,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,d,p){var _,S;if(p)for(_=d,S=d-1;S>=0;--S){var C=o.intersectsWithObject(this._objects[S])||o.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(o);if(C){_=S;break}}else _=d-1;return _},bringForward:function(o,d){if(!o)return this;var p=this._activeObject,_,S,C,O,k,P=0;if(o===p&&o.type==="activeSelection")for(k=p._objects,_=k.length;_--;)S=k[_],C=this._objects.indexOf(S),C<this._objects.length-1-P&&(O=C+1,c(this._objects,S),this._objects.splice(O,0,S)),P++;else C=this._objects.indexOf(o),C!==this._objects.length-1&&(O=this._findNewUpperIndex(o,C,d),c(this._objects,o),this._objects.splice(O,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,d,p){var _,S,C;if(p)for(_=d,S=d+1,C=this._objects.length;S<C;++S){var O=o.intersectsWithObject(this._objects[S])||o.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(o);if(O){_=S;break}}else _=d+1;return _},moveTo:function(o,d){return c(this._objects,o),this._objects.splice(d,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(m.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),m.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),m.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),v(m.StaticCanvas.prototype,m.Observable),v(m.StaticCanvas.prototype,m.Collection),v(m.StaticCanvas.prototype,m.DataURLExporter),v(m.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var d=s();if(!d||!d.getContext)return null;var p=d.getContext("2d");if(!p)return null;switch(o){case"setLineDash":return typeof p.setLineDash<"u";default:return null}}}),m.StaticCanvas.prototype.toJSON=m.StaticCanvas.prototype.toObject,m.isLikelyNode&&(m.StaticCanvas.prototype.createPNGStream=function(){var o=n(this.lowerCanvasEl);return o&&o.createPNGStream()},m.StaticCanvas.prototype.createJPEGStream=function(o){var d=n(this.lowerCanvasEl);return d&&d.createJPEGStream(o)})}(),m.BaseBrush=m.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(v){v.strokeStyle=this.color,v.lineWidth=this.width,v.lineCap=this.strokeLineCap,v.miterLimit=this.strokeMiterLimit,v.lineJoin=this.strokeLineJoin,v.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(v){var u=this.canvas.viewportTransform;v.save(),v.transform(u[0],u[1],u[2],u[3],u[4],u[5])},_setShadow:function(){if(this.shadow){var v=this.canvas,u=this.shadow,c=v.contextTop,h=v.getZoom();v&&v._isRetinaScaling()&&(h*=m.devicePixelRatio),c.shadowColor=u.color,c.shadowBlur=u.blur*h,c.shadowOffsetX=u.offsetX*h,c.shadowOffsetY=u.offsetY*h}},needsFullRender:function(){var v=new m.Color(this.color);return v.getAlpha()<1||!!this.shadow},_resetShadow:function(){var v=this.canvas.contextTop;v.shadowColor="",v.shadowBlur=v.shadowOffsetX=v.shadowOffsetY=0},_isOutSideCanvas:function(v){return v.x<0||v.x>this.canvas.getWidth()||v.y<0||v.y>this.canvas.getHeight()}}),function(){m.PencilBrush=m.util.createClass(m.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(v){this.canvas=v,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(v,u,c){var h=u.midPointFrom(c);return v.quadraticCurveTo(u.x,u.y,h.x,h.y),h},onMouseDown:function(v,u){this.canvas._isMainEvent(u.e)&&(this.drawStraightLine=u.e[this.straightLineKey],this._prepareForDrawing(v),this._captureDrawingPath(v),this._render())},onMouseMove:function(v,u){if(this.canvas._isMainEvent(u.e)&&(this.drawStraightLine=u.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v))&&this._captureDrawingPath(v)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,h=c.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,c[h-2],c[h-1],!0),a.stroke(),a.restore()}},onMouseUp:function(v){return this.canvas._isMainEvent(v.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(v){var u=new m.Point(v.x,v.y);this._reset(),this._addPoint(u),this.canvas.contextTop.moveTo(u.x,u.y)},_addPoint:function(v){return this._points.length>1&&v.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(v),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(v){var u=new m.Point(v.x,v.y);return this._addPoint(u)},_render:function(v){var u,c,h=this._points[0],a=this._points[1];if(v=v||this.canvas.contextTop,this._saveAndTransform(v),v.beginPath(),this._points.length===2&&h.x===a.x&&h.y===a.y){var r=this.width/1e3;h=new m.Point(h.x,h.y),a=new m.Point(a.x,a.y),h.x-=r,a.x+=r}for(v.moveTo(h.x,h.y),u=1,c=this._points.length;u<c;u++)this._drawSegment(v,h,a),h=this._points[u],a=this._points[u+1];v.lineTo(h.x,h.y),v.stroke(),v.restore()},convertPointsToSVGPath:function(v){var u=this.width/1e3;return m.util.getSmoothPathFromPoints(v,u)},_isEmptySVGPath:function(v){var u=m.util.joinPath(v);return u==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(v){var u=new m.Path(v,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,u.shadow=new m.Shadow(this.shadow)),u},decimatePoints:function(v,u){if(v.length<=2)return v;var c=this.canvas.getZoom(),h=Math.pow(u/c,2),a,r=v.length-1,n=v[0],s=[n],f;for(a=1;a<r-1;a++)f=Math.pow(n.x-v[a].x,2)+Math.pow(n.y-v[a].y,2),f>=h&&(n=v[a],s.push(n));return s.push(v[r]),s},_finalizeAndAddPath:function(){var v=this.canvas.contextTop;v.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var u=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(u)){this.canvas.requestRenderAll();return}var c=this.createPath(u);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),m.CircleBrush=m.util.createClass(m.BaseBrush,{width:10,initialize:function(v){this.canvas=v,this.points=[]},drawDot:function(v){var u=this.addPoint(v),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,u),c.restore()},dot:function(v,u){v.fillStyle=u.fill,v.beginPath(),v.arc(u.x,u.y,u.radius,0,Math.PI*2,!1),v.closePath(),v.fill()},onMouseDown:function(v){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(v)},_render:function(){var v=this.canvas.contextTop,u,c,h=this.points;for(this._saveAndTransform(v),u=0,c=h.length;u<c;u++)this.dot(v,h[u]);v.restore()},onMouseMove:function(v){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(v),this._render()):this.drawDot(v))},onMouseUp:function(){var v=this.canvas.renderOnAddRemove,u,c;this.canvas.renderOnAddRemove=!1;var h=[];for(u=0,c=this.points.length;u<c;u++){var a=this.points[u],r=new m.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(r.shadow=new m.Shadow(this.shadow)),h.push(r)}var n=new m.Group(h);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=v,this.canvas.requestRenderAll()},addPoint:function(v){var u=new m.Point(v.x,v.y),c=m.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new m.Color(this.color).setAlpha(m.util.getRandomInt(0,100)/100).toRgba();return u.radius=c,u.fill=h,this.points.push(u),u}}),m.SprayBrush=m.util.createClass(m.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(v){this.canvas=v,this.sprayChunks=[]},onMouseDown:function(v){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(v),this.render(this.sprayChunkPoints)},onMouseMove:function(v){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v)||(this.addSprayChunk(v),this.render(this.sprayChunkPoints))},onMouseUp:function(){var v=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var u=[],c=0,h=this.sprayChunks.length;c<h;c++)for(var a=this.sprayChunks[c],r=0,n=a.length;r<n;r++){var s=new m.Rect({width:a[r].width,height:a[r].width,left:a[r].x+1,top:a[r].y+1,originX:"center",originY:"center",fill:this.color});u.push(s)}this.optimizeOverlapping&&(u=this._getOptimizedRects(u));var f=new m.Group(u);this.shadow&&f.set("shadow",new m.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=v,this.canvas.requestRenderAll()},_getOptimizedRects:function(v){var u={},c,h,a;for(h=0,a=v.length;h<a;h++)c=v[h].left+""+v[h].top,u[c]||(u[c]=v[h]);var r=[];for(c in u)r.push(u[c]);return r},render:function(v){var u=this.canvas.contextTop,c,h;for(u.fillStyle=this.color,this._saveAndTransform(u),c=0,h=v.length;c<h;c++){var a=v[c];typeof a.opacity<"u"&&(u.globalAlpha=a.opacity),u.fillRect(a.x,a.y,a.width,a.width)}u.restore()},_render:function(){var v=this.canvas.contextTop,u,c;for(v.fillStyle=this.color,this._saveAndTransform(v),u=0,c=this.sprayChunks.length;u<c;u++)this.render(this.sprayChunks[u]);v.restore()},addSprayChunk:function(v){this.sprayChunkPoints=[];var u,c,h,a=this.width/2,r;for(r=0;r<this.density;r++){u=m.util.getRandomInt(v.x-a,v.x+a),c=m.util.getRandomInt(v.y-a,v.y+a),this.dotWidthVariance?h=m.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var n=new m.Point(u,c);n.width=h,this.randomOpacity&&(n.opacity=m.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),m.PatternBrush=m.util.createClass(m.PencilBrush,{getPatternSrc:function(){var v=20,u=5,c=m.util.createCanvasElement(),h=c.getContext("2d");return c.width=c.height=v+u,h.fillStyle=this.color,h.beginPath(),h.arc(v/2,v/2,v/2,0,Math.PI*2,!1),h.closePath(),h.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(v){return v.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(v){this.callSuper("_setBrushStyles",v),v.strokeStyle=this.getPattern(v)},createPath:function(v){var u=this.callSuper("createPath",v),c=u._getLeftTopCoords().scalarAdd(u.strokeWidth/2);return u.stroke=new m.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),u}}),function(){var v=m.util.getPointer,u=m.util.degreesToRadians,c=m.util.isTouchEvent;m.Canvas=m.util.createClass(m.StaticCanvas,{initialize:function(a,r){r||(r={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,r),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=m.PencilBrush&&new m.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),r,n,s;if(a.length>0&&!this.preserveObjectStacking){n=[],s=[];for(var f=0,o=this._objects.length;f<o;f++)r=this._objects[f],a.indexOf(r)===-1?n.push(r):s.push(r);a.length>1&&(this._activeObject._objects=s),n.push.apply(n,s)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,r){var n=a.calcTransformMatrix(),s=m.util.invertTransform(n),f=this.restorePointerVpt(r);return m.util.transformPoint(f,s)},isTargetTransparent:function(a,r,n){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var s=this._normalizePointer(a,{x:r,y:n}),f=Math.max(a.cacheTranslationX+s.x*a.zoomX,0),o=Math.max(a.cacheTranslationY+s.y*a.zoomY,0),S=m.util.isTransparent(a._cacheContext,Math.round(f),Math.round(o),this.targetFindTolerance);return S}var d=this.contextCache,p=a.selectionBackgroundColor,_=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(d),d.save(),d.transform(_[0],_[1],_[2],_[3],_[4],_[5]),a.render(d),d.restore(),a.selectionBackgroundColor=p;var S=m.util.isTransparent(d,r,n,this.targetFindTolerance);return S},_isSelectionKeyPressed:function(a){var r=!1;return Array.isArray(this.selectionKey)?r=!!this.selectionKey.find(function(n){return a[n]===!0}):r=a[this.selectionKey],r},_shouldClearSelection:function(a,r){var n=this.getActiveObjects(),s=this._activeObject;return!r||r&&s&&n.length>1&&n.indexOf(r)===-1&&s!==r&&!this._isSelectionKeyPressed(a)||r&&!r.evented||r&&!r.selectable&&s&&s!==r},_shouldCenterTransform:function(a,r,n){if(a){var s;return r==="scale"||r==="scaleX"||r==="scaleY"||r==="resizing"?s=this.centeredScaling||a.centeredScaling:r==="rotate"&&(s=this.centeredRotation||a.centeredRotation),s?!n:n}},_getOriginFromCorner:function(a,r){var n={x:a.originX,y:a.originY};return r==="ml"||r==="tl"||r==="bl"?n.x="right":(r==="mr"||r==="tr"||r==="br")&&(n.x="left"),r==="tl"||r==="mt"||r==="tr"?n.y="bottom":(r==="bl"||r==="mb"||r==="br")&&(n.y="top"),n},_getActionFromCorner:function(a,r,n,s){if(!r||!a)return"drag";var f=s.controls[r];return f.getActionName(n,f,s)},_setupCurrentTransform:function(a,r,n){if(r){var s=this.getPointer(a),f=r.__corner,o=r.controls[f],d=n&&f?o.getActionHandler(a,r,o):m.controlsUtils.dragHandler,p=this._getActionFromCorner(n,f,a,r),_=this._getOriginFromCorner(r,f),S=a[this.centeredKey],C={target:r,action:p,actionHandler:d,corner:f,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:s.x-r.left,offsetY:s.y-r.top,originX:_.x,originY:_.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:u(r.angle),width:r.width*r.scaleX,shiftKey:a.shiftKey,altKey:S,original:m.util.saveObjectTransform(r)};this._shouldCenterTransform(r,p,S)&&(C.originX="center",C.originY="center"),C.original.originX=_.x,C.original.originY=_.y,this._currentTransform=C,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var r=this._groupSelector,n=new m.Point(r.ex,r.ey),s=m.util.transformPoint(n,this.viewportTransform),f=new m.Point(r.ex+r.left,r.ey+r.top),o=m.util.transformPoint(f,this.viewportTransform),d=Math.min(s.x,o.x),p=Math.min(s.y,o.y),_=Math.max(s.x,o.x),S=Math.max(s.y,o.y),C=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(d,p,_-d,S-p)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,d+=C,p+=C,_-=C,S-=C,m.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(d,p,_-d,S-p))},findTarget:function(a,r){if(!this.skipTargetFind){var n=!0,s=this.getPointer(a,n),f=this._activeObject,o=this.getActiveObjects(),d,p,_=c(a),S=o.length>1&&!r||o.length===1;if(this.targets=[],S&&f._findTargetCorner(s,_)||o.length>1&&!r&&f===this._searchPossibleTargets([f],s))return f;if(o.length===1&&f===this._searchPossibleTargets([f],s))if(this.preserveObjectStacking)d=f,p=this.targets,this.targets=[];else return f;var C=this._searchPossibleTargets(this._objects,s);return a[this.altSelectionKey]&&C&&d&&C!==d&&(C=d,this.targets=p),C}},_checkTarget:function(a,r,n){if(r&&r.visible&&r.evented&&r.containsPoint(a))if((this.perPixelTargetFind||r.perPixelTargetFind)&&!r.isEditing){var s=this.isTargetTransparent(r,n.x,n.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(a,r){for(var n,s=a.length,f;s--;){var o=a[s],d=o.group?this._normalizePointer(o.group,r):r;if(this._checkTarget(d,o,r)){n=a[s],n.subTargetCheck&&n instanceof m.Group&&(f=this._searchPossibleTargets(n._objects,r),f&&this.targets.push(f));break}}return n},restorePointerVpt:function(a){return m.util.transformPoint(a,m.util.invertTransform(this.viewportTransform))},getPointer:function(a,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var n=v(a),s=this.upperCanvasEl,f=s.getBoundingClientRect(),o=f.width||0,d=f.height||0,p;(!o||!d)&&("top"in f&&"bottom"in f&&(d=Math.abs(f.top-f.bottom)),"right"in f&&"left"in f&&(o=Math.abs(f.right-f.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,r||(n=this.restorePointerVpt(n));var _=this.getRetinaScaling();return _!==1&&(n.x/=_,n.y/=_),o===0||d===0?p={width:1,height:1}:p={width:s.width/o,height:s.height/d},{x:n.x*p.width,y:n.y*p.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),r=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),m.util.addClass(n,"upper-canvas "+a),this.wrapperEl.appendChild(n),this._copyCanvasStyle(r,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=m.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),m.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),m.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var r=this.width||a.width,n=this.height||a.height;m.util.setStyle(a,{position:"absolute",width:r+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=r,a.height=n,m.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,r){r.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,r){var n=!1,s=this.getActiveObjects(),f=[],o=[];a.forEach(function(d){s.indexOf(d)===-1&&(n=!0,d.fire("deselected",{e:r,target:d}),o.push(d))}),s.forEach(function(d){a.indexOf(d)===-1&&(n=!0,d.fire("selected",{e:r,target:d}),f.push(d))}),a.length>0&&s.length>0?n&&this.fire("selection:updated",{e:r,selected:f,deselected:o}):s.length>0?this.fire("selection:created",{e:r,selected:f}):a.length>0&&this.fire("selection:cleared",{e:r,deselected:o})},setActiveObject:function(a,r){var n=this.getActiveObjects();return this._setActiveObject(a,r),this._fireSelectionEvents(n,r),this},_setActiveObject:function(a,r){return this._activeObject===a||!this._discardActiveObject(r,a)||a.onSelect({e:r})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,r){var n=this._activeObject;if(n){if(n.onDeselect({e:a,object:r}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var r=this.getActiveObjects(),n=this.getActiveObject();return r.length&&this.fire("before:selection:cleared",{target:n,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(r,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(r){m.util.cleanUpJsdomNode(this[r]),this[r]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,m.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var r=this._activeObject;r&&r._renderControls(a)},_toObject:function(a,r,n){var s=this._realizeGroupTransformOnObject(a),f=this.callSuper("_toObject",a,r,n);return this._unwindGroupTransformOnObject(a,s),f},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var r=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return r.forEach(function(s){n[s]=a[s]}),m.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(a,r){r&&a.set(r)},_setSVGObject:function(a,r,n){var s=this._realizeGroupTransformOnObject(r);this.callSuper("_setSVGObject",a,r,n),this._unwindGroupTransformOnObject(r,s)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),m.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var h in m.StaticCanvas)h!=="prototype"&&(m.Canvas[h]=m.StaticCanvas[h])}(),function(){var v=m.util.addListener,u=m.util.removeListener,c=3,h=2,a=1,r={passive:!1};function n(s,f){return s.button&&s.button===f-1}m.util.object.extend(m.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(v,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,f){var o=this.upperCanvasEl,d=this._getEventPrefix();s(m.window,"resize",this._onResize),s(o,d+"down",this._onMouseDown),s(o,d+"move",this._onMouseMove,r),s(o,d+"out",this._onMouseOut),s(o,d+"enter",this._onMouseEnter),s(o,"wheel",this._onMouseWheel),s(o,"contextmenu",this._onContextMenu),s(o,"dblclick",this._onDoubleClick),s(o,"dragover",this._onDragOver),s(o,"dragenter",this._onDragEnter),s(o,"dragleave",this._onDragLeave),s(o,"drop",this._onDrop),this.enablePointerEvents||s(o,"touchstart",this._onTouchStart,r),typeof eventjs<"u"&&f in eventjs&&(eventjs[f](o,"gesture",this._onGesture),eventjs[f](o,"drag",this._onDrag),eventjs[f](o,"orientation",this._onOrientationChange),eventjs[f](o,"shake",this._onShake),eventjs[f](o,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(u,"remove");var s=this._getEventPrefix();u(m.document,s+"up",this._onMouseUp),u(m.document,"touchend",this._onTouchEnd,r),u(m.document,s+"move",this._onMouseMove,r),u(m.document,"touchmove",this._onMouseMove,r)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(s,f){this.__onTransformGesture&&this.__onTransformGesture(s,f)},_onDrag:function(s,f){this.__onDrag&&this.__onDrag(s,f)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var f=this._hoveredTarget;this.fire("mouse:out",{target:f,e:s}),this._hoveredTarget=null,f&&f.fire("mouseout",{e:s});var o=this;this._hoveredTargets.forEach(function(d){o.fire("mouse:out",{target:d,e:s}),d&&d.fire("mouseout",{e:s})}),this._hoveredTargets=[]},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,f){this.__onOrientationChange&&this.__onOrientationChange(s,f)},_onShake:function(s,f){this.__onShake&&this.__onShake(s,f)},_onLongPress:function(s,f){this.__onLongPress&&this.__onLongPress(s,f)},_onDragOver:function(s){s.preventDefault();var f=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(f,s)},_onDrop:function(s){return this._simpleEventHandler("drop:before",s),this._simpleEventHandler("drop",s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var f=s.changedTouches;return f?f[0]&&f[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();v(m.document,"touchend",this._onTouchEnd,r),v(m.document,"touchmove",this._onMouseMove,r),u(f,o+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();u(f,o+"move",this._onMouseMove,r),v(m.document,o+"up",this._onMouseUp),v(m.document,o+"move",this._onMouseMove,r)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var f=this._getEventPrefix();u(m.document,"touchend",this._onTouchEnd,r),u(m.document,"touchmove",this._onMouseMove,r);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){v(o.upperCanvasEl,f+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(s)&&(u(m.document,o+"up",this._onMouseUp),u(m.document,o+"move",this._onMouseMove,r),v(f,o+"move",this._onMouseMove,r))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var f=this._activeObject;return!!f!=!!s||f&&s&&f!==s?!0:(f&&f.isEditing,!1)},__onMouseUp:function(s){var f,o=this._currentTransform,d=this._groupSelector,p=!1,_=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(s),f=this._target,this._handleEvent(s,"up:before"),n(s,c)){this.fireRightClick&&this._handleEvent(s,"up",c,_);return}if(n(s,h)){this.fireMiddleClick&&this._handleEvent(s,"up",h,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(this._isMainEvent(s)){if(o&&(this._finalizeCurrentTransform(s),p=o.actionPerformed),!_){var S=f===this._activeObject;this._maybeGroupObjects(s),p||(p=this._shouldRender(f)||!S&&f===this._activeObject)}var C,O;if(f){if(C=f._findTargetCorner(this.getPointer(s,!0),m.util.isTouchEvent(s)),f.selectable&&f!==this._activeObject&&f.activeOn==="up")this.setActiveObject(f,s),p=!0;else{var k=f.controls[C],P=k&&k.getMouseUpHandler(s,f,k);P&&(O=this.getPointer(s),P(s,o,O.x,O.y))}f.isMoving=!1}if(o&&(o.target!==f||o.corner!==C)){var H=o.target&&o.target.controls[o.corner],K=H&&H.getMouseUpHandler(s,f,k);O=O||this.getPointer(s),K&&K(s,o,O.x,O.y)}this._setCursorFromEvent(s,f),this._handleEvent(s,"up",a,_),this._groupSelector=null,this._currentTransform=null,f&&(f.__corner=0),p?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(s,f){var o=this.findTarget(f),d=this.targets,p={e:f,target:o,subTargets:d};if(this.fire(s,p),o&&o.fire(s,p),!d)return o;for(var _=0;_<d.length;_++)d[_].fire(s,p);return o},_handleEvent:function(s,f,o,d){var p=this._target,_=this.targets||[],S={e:s,target:p,subTargets:_,button:o||a,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};f==="up"&&(S.currentTarget=this.findTarget(s),S.currentSubTargets=this.targets),this.fire("mouse:"+f,S),p&&p.fire("mouse"+f,S);for(var C=0;C<_.length;C++)_[C].fire("mouse"+f,S)},_finalizeCurrentTransform:function(s){var f=this._currentTransform,o=f.target,d={e:s,target:o,transform:f,action:f.action};o._scaling&&(o._scaling=!1),o.setCoords(),(f.actionPerformed||this.stateful&&o.hasStateChanged())&&this._fire("modified",d)},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var f=this.getPointer(s);this.freeDrawingBrush.onMouseDown(f,{e:s,pointer:f}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var f=this.getPointer(s);this.freeDrawingBrush.onMouseMove(f,{e:s,pointer:f})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var f=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:f}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var f=this._target;if(n(s,c)){this.fireRightClick&&this._handleEvent(s,"down",c);return}if(n(s,h)){this.fireMiddleClick&&this._handleEvent(s,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(this._isMainEvent(s)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var d=this._shouldRender(f),p=this._shouldGroup(s,f);if(this._shouldClearSelection(s,f)?this.discardActiveObject(s):p&&(this._handleGrouping(s,f),f=this._activeObject),this.selection&&(!f||!f.selectable&&!f.isEditing&&f!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),f){var _=f===this._activeObject;f.selectable&&f.activeOn==="down"&&this.setActiveObject(f,s);var S=f._findTargetCorner(this.getPointer(s,!0),m.util.isTouchEvent(s));if(f.__corner=S,f===this._activeObject&&(S||!p)){this._setupCurrentTransform(s,f,_);var C=f.controls[S],o=this.getPointer(s),O=C&&C.getMouseDownHandler(s,f,C);O&&O(s,this._currentTransform,o.x,o.y)}}this._handleEvent(s,"down"),(d||p)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var f=this._currentTransform;this.stateful&&f.target.saveState(),this.fire("before:transform",{e:s,transform:f})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var f,o;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(this._isMainEvent(s)){var d=this._groupSelector;d?(o=this._absolutePointer,d.left=o.x-d.ex,d.top=o.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(f=this.findTarget(s)||null,this._setCursorFromEvent(s,f),this._fireOverOutEvents(f,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,f){var o=this._hoveredTarget,d=this._hoveredTargets,p=this.targets,_=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(s,f,{oldTarget:o,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var S=0;S<_;S++)this.fireSyntheticInOutEvents(p[S],f,{oldTarget:d[S],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,f){var o=this._draggedoverTarget,d=this._hoveredTargets,p=this.targets,_=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(s,f,{oldTarget:o,evtOut:"dragleave",evtIn:"dragenter"});for(var S=0;S<_;S++)this.fireSyntheticInOutEvents(p[S],f,{oldTarget:d[S],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,f,o){var d,p,_=o.oldTarget,S,C,O=_!==s,k=o.canvasEvtIn,P=o.canvasEvtOut;O&&(d={e:f,target:s,previousTarget:_},p={e:f,target:_,nextTarget:s}),C=s&&O,S=_&&O,S&&(P&&this.fire(P,p),_.fire(o.evtOut,p)),C&&(k&&this.fire(k,d),s.fire(o.evtIn,d))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var f=this.getPointer(s),o=this._currentTransform;o.reset=!1,o.shiftKey=s.shiftKey,o.altKey=s[this.centeredKey],this._performTransformAction(s,o,f),o.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,f,o){var d=o.x,p=o.y,_=f.action,S=!1,C=f.actionHandler;C&&(S=C(s,f,d,p)),_==="drag"&&S&&(f.target.isMoving=!0,this.setCursor(f.target.moveCursor||this.moveCursor)),f.actionPerformed=f.actionPerformed||S},_fire:m.controlsUtils.fireEvent,_setCursorFromEvent:function(s,f){if(!f)return this.setCursor(this.defaultCursor),!1;var o=f.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,p=(!d||!d.contains(f))&&f._findTargetCorner(this.getPointer(s,!0));p?this.setCursor(this.getCornerCursor(p,f,s)):(f.subTargetCheck&&this.targets.concat().reverse().map(function(_){o=_.hoverCursor||o}),this.setCursor(o))},getCornerCursor:function(s,f,o){var d=f.controls[s];return d.cursorStyleHandler(o,d,f)}})}(),function(){var v=Math.min,u=Math.max;m.util.object.extend(m.Canvas.prototype,{_shouldGroup:function(c,h){var a=this._activeObject;return a&&this._isSelectionKeyPressed(c)&&h&&h.selectable&&this.selection&&(a!==h||a.type==="activeSelection")&&!h.onSelect({e:c})},_handleGrouping:function(c,h){var a=this._activeObject;a.__corner||h===a&&(h=this.findTarget(c,!0),!h||!h.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(h,c):this._createActiveSelection(h,c))},_updateActiveSelection:function(c,h){var a=this._activeObject,r=a._objects.slice(0);a.contains(c)?(a.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),h)):(a.addWithUpdate(c),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,h)},_createActiveSelection:function(c,h){var a=this.getActiveObjects(),r=this._createGroup(c);this._hoveredTarget=r,this._setActiveObject(r,h),this._fireSelectionEvents(a,h)},_createGroup:function(c){var h=this._objects,a=h.indexOf(this._activeObject)<h.indexOf(c),r=a?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new m.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(c){var h=this._collectObjects(c),a;h.length===1?this.setActiveObject(h[0],c):h.length>1&&(a=new m.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(a,c))},_collectObjects:function(c){for(var h=[],a,r=this._groupSelector.ex,n=this._groupSelector.ey,s=r+this._groupSelector.left,f=n+this._groupSelector.top,o=new m.Point(v(r,s),v(n,f)),d=new m.Point(u(r,s),u(n,f)),p=!this.selectionFullyContained,_=r===s&&n===f,S=this._objects.length;S--&&(a=this._objects[S],!(!(!a||!a.selectable||!a.visible)&&(p&&a.intersectsWithRect(o,d,!0)||a.isContainedWithinRect(o,d,!0)||p&&a.containsPoint(o,null,!0)||p&&a.containsPoint(d,null,!0))&&(h.push(a),_))););return h.length>1&&(h=h.filter(function(C){return!C.onSelect({e:c})})),h},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){m.util.object.extend(m.StaticCanvas.prototype,{toDataURL:function(v){v||(v={});var u=v.format||"png",c=v.quality||1,h=(v.multiplier||1)*(v.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(h,v);return m.util.toDataURL(a,u,c)},toCanvasElement:function(v,u){v=v||1,u=u||{};var c=(u.width||this.width)*v,h=(u.height||this.height)*v,a=this.getZoom(),r=this.width,n=this.height,s=a*v,f=this.viewportTransform,o=(f[4]-(u.left||0))*v,d=(f[5]-(u.top||0))*v,p=this.interactive,_=[s,0,0,s,o,d],S=this.enableRetinaScaling,C=m.util.createCanvasElement(),O=this.contextTop;return C.width=c,C.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=f,this.width=r,this.height=n,this.calcViewportBoundaries(),this.interactive=p,this.enableRetinaScaling=S,this.contextTop=O,C}})}(),m.util.object.extend(m.StaticCanvas.prototype,{loadFromJSON:function(v,u,c){if(v){var h=typeof v=="string"?JSON.parse(v):m.util.object.clone(v),a=this,r=h.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(s){a.clear(),a._setBgOverlay(h,function(){r?a._enlivenObjects([r],function(f){a.clipPath=f[0],a.__setupCanvas.call(a,h,s,n,u)}):a.__setupCanvas.call(a,h,s,n,u)})},c),this}},__setupCanvas:function(v,u,c,h){var a=this;u.forEach(function(r,n){a.insertAt(r,n)}),this.renderOnAddRemove=c,delete v.objects,delete v.backgroundImage,delete v.overlayImage,delete v.background,delete v.overlay,this._setOptions(v),this.renderAll(),h&&h()},_setBgOverlay:function(v,u){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!v.backgroundImage&&!v.overlayImage&&!v.background&&!v.overlay){u&&u();return}var h=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&u&&u()};this.__setBgOverlay("backgroundImage",v.backgroundImage,c,h),this.__setBgOverlay("overlayImage",v.overlayImage,c,h),this.__setBgOverlay("backgroundColor",v.background,c,h),this.__setBgOverlay("overlayColor",v.overlay,c,h)},__setBgOverlay:function(v,u,c,h){var a=this;if(!u){c[v]=!0,h&&h();return}v==="backgroundImage"||v==="overlayImage"?m.util.enlivenObjects([u],function(r){a[v]=r[0],c[v]=!0,h&&h()}):this["set"+m.util.string.capitalize(v,!0)](u,function(){c[v]=!0,h&&h()})},_enlivenObjects:function(v,u,c){if(!v||v.length===0){u&&u([]);return}m.util.enlivenObjects(v,function(h){u&&u(h)},null,c)},_toDataURL:function(v,u){this.clone(function(c){u(c.toDataURL(v))})},_toDataURLWithMultiplier:function(v,u,c){this.clone(function(h){c(h.toDataURLWithMultiplier(v,u))})},clone:function(v,u){var c=JSON.stringify(this.toJSON(u));this.cloneWithoutData(function(h){h.loadFromJSON(c,function(){v&&v(h)})})},cloneWithoutData:function(v){var u=m.util.createCanvasElement();u.width=this.width,u.height=this.height;var c=new m.Canvas(u);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),v&&v(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):v&&v(c)}}),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.util.object.clone,a=u.util.toFixed,r=u.util.string.capitalize,n=u.util.degreesToRadians,s=!u.isLikelyNode,f=2;u.Object||(u.Object=u.util.createClass(u.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(o){o&&this.setOptions(o)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=u.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(o){var d=u.perfLimitSizeTotal,p=o.width,_=o.height,S=u.maxCacheSideLimit,C=u.minCacheSideLimit;if(p<=S&&_<=S&&p*_<=d)return p<C&&(o.width=C),_<C&&(o.height=C),o;var O=p/_,k=u.util.limitDimsByArea(O,d),P=u.util.capValue,H=P(C,k.x,S),K=P(C,k.y,S);return p>H&&(o.zoomX/=p/H,o.width=H,o.capped=!0),_>K&&(o.zoomY/=_/K,o.height=K,o.capped=!0),o},_getCacheCanvasDimensions:function(){var o=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),p=d.x*o.scaleX/this.scaleX,_=d.y*o.scaleY/this.scaleY;return{width:Math.ceil(p+f),height:Math.ceil(_+f),zoomX:o.scaleX,zoomY:o.scaleY,x:p,y:_}},_updateCacheCanvas:function(){var o=this.canvas;if(this.noScaleCache&&o&&o._currentTransform){var d=o._currentTransform.target,p=o._currentTransform.action;if(this===d&&p.slice&&p.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),C=S.width,O=S.height,k,P,H=S.zoomX,K=S.zoomY,ct=C!==this.cacheWidth||O!==this.cacheHeight,mt=this.zoomX!==H||this.zoomY!==K,pt=ct||mt;return pt?(ct?(_.width=C,_.height=O):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),k=S.x/2,P=S.y/2,this.cacheTranslationX=Math.round(_.width/2-k)+k,this.cacheTranslationY=Math.round(_.height/2-P)+P,this.cacheWidth=C,this.cacheHeight=O,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(H,K),this.zoomX=H,this.zoomY=K,!0):!1},setOptions:function(o){this._setOptions(o),this._initGradient(o.fill,"fill"),this._initGradient(o.stroke,"stroke"),this._initPattern(o.fill,"fill"),this._initPattern(o.stroke,"stroke")},transform:function(o){var d=this.group&&!this.group._transformDone||this.group&&this.canvas&&o===this.canvas.contextTop,p=this.calcTransformMatrix(!d);o.transform(p[0],p[1],p[2],p[3],p[4],p[5])},toObject:function(o){var d=u.Object.NUM_FRACTION_DIGITS,p={type:this.type,version:u.version,originX:this.originX,originY:this.originY,left:a(this.left,d),top:a(this.top,d),width:a(this.width,d),height:a(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,d),scaleX:a(this.scaleX,d),scaleY:a(this.scaleY,d),angle:a(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,d),skewY:a(this.skewY,d)};return this.clipPath&&!this.clipPath.excludeFromExport&&(p.clipPath=this.clipPath.toObject(o),p.clipPath.inverted=this.clipPath.inverted,p.clipPath.absolutePositioned=this.clipPath.absolutePositioned),u.util.populateWithProperties(this,p,o),this.includeDefaultValues||(p=this._removeDefaultValues(p)),p},toDatalessObject:function(o){return this.toObject(o)},_removeDefaultValues:function(o){var d=u.util.getKlass(o.type).prototype,p=d.stateProperties;return p.forEach(function(_){_==="left"||_==="top"||(o[_]===d[_]&&delete o[_],Array.isArray(o[_])&&Array.isArray(d[_])&&o[_].length===0&&d[_].length===0&&delete o[_])}),o},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var o=u.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(o.scaleX),scaleY:Math.abs(o.scaleY)}},getTotalObjectScaling:function(){var o=this.getObjectScaling(),d=o.scaleX,p=o.scaleY;if(this.canvas){var _=this.canvas.getZoom(),S=this.canvas.getRetinaScaling();d*=_*S,p*=_*S}return{scaleX:d,scaleY:p}},getObjectOpacity:function(){var o=this.opacity;return this.group&&(o*=this.group.getObjectOpacity()),o},_set:function(o,d){var p=o==="scaleX"||o==="scaleY",_=this[o]!==d,S=!1;return p&&(d=this._constrainScale(d)),o==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):o==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):o==="shadow"&&d&&!(d instanceof u.Shadow)?d=new u.Shadow(d):o==="dirty"&&this.group&&this.group.set("dirty",d),this[o]=d,_&&(S=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(o)>-1?(this.dirty=!0,S&&this.group.set("dirty",!0)):S&&this.stateProperties.indexOf(o)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:u.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(o){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(o.save(),this._setupCompositeOperation(o),this.drawSelectionBackground(o),this.transform(o),this._setOpacity(o),this._setShadow(o,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(o)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(o),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),o.restore())},renderCache:function(o){o=o||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,o.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(o,d){if(o.save(),d.inverted?o.globalCompositeOperation="destination-out":o.globalCompositeOperation="destination-in",d.absolutePositioned){var p=u.util.invertTransform(this.calcTransformMatrix());o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}d.transform(o),o.scale(1/d.zoomX,1/d.zoomY),o.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),o.restore()},drawObject:function(o,d){var p=this.fill,_=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(o)):this._renderBackground(o),this._render(o),this._drawClipPath(o,this.clipPath),this.fill=p,this.stroke=_},_drawClipPath:function(o,d){d&&(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(o,d))},drawCacheOnCanvas:function(o){o.scale(1/this.zoomX,1/this.zoomY),o.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(o){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!o&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!o){var d=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-p/2,d,p)}return!0}return!1},_renderBackground:function(o){if(this.backgroundColor){var d=this._getNonTransformedDimensions();o.fillStyle=this.backgroundColor,o.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(o)}},_setOpacity:function(o){this.group&&!this.group._transformDone?o.globalAlpha=this.getObjectOpacity():o.globalAlpha*=this.opacity},_setStrokeStyles:function(o,d){var p=d.stroke;p&&(o.lineWidth=d.strokeWidth,o.lineCap=d.strokeLineCap,o.lineDashOffset=d.strokeDashOffset,o.lineJoin=d.strokeLineJoin,o.miterLimit=d.strokeMiterLimit,p.toLive?p.gradientUnits==="percentage"||p.gradientTransform||p.patternTransform?this._applyPatternForTransformedGradient(o,p):(o.strokeStyle=p.toLive(o,this),this._applyPatternGradientTransform(o,p)):o.strokeStyle=d.stroke)},_setFillStyles:function(o,d){var p=d.fill;p&&(p.toLive?(o.fillStyle=p.toLive(o,this),this._applyPatternGradientTransform(o,d.fill)):o.fillStyle=p)},_setClippingProperties:function(o){o.globalAlpha=1,o.strokeStyle="transparent",o.fillStyle="#000000"},_setLineDash:function(o,d){!d||d.length===0||(1&d.length&&d.push.apply(d,d),o.setLineDash(d))},_renderControls:function(o,d){var p=this.getViewportTransform(),_=this.calcTransformMatrix(),S,C,O;d=d||{},C=typeof d.hasBorders<"u"?d.hasBorders:this.hasBorders,O=typeof d.hasControls<"u"?d.hasControls:this.hasControls,_=u.util.multiplyTransformMatrices(p,_),S=u.util.qrDecompose(_),o.save(),o.translate(S.translateX,S.translateY),o.lineWidth=1*this.borderScaleFactor,this.group||(o.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(S.angle-=180),o.rotate(n(this.group?S.angle:this.angle)),d.forActiveSelection||this.group?C&&this.drawBordersInGroup(o,S,d):C&&this.drawBorders(o,d),O&&this.drawControls(o,d),o.restore()},_setShadow:function(o){if(this.shadow){var d=this.shadow,p=this.canvas,_,S=p&&p.viewportTransform[0]||1,C=p&&p.viewportTransform[3]||1;d.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),p&&p._isRetinaScaling()&&(S*=u.devicePixelRatio,C*=u.devicePixelRatio),o.shadowColor=d.color,o.shadowBlur=d.blur*u.browserShadowBlurConstant*(S+C)*(_.scaleX+_.scaleY)/4,o.shadowOffsetX=d.offsetX*S*_.scaleX,o.shadowOffsetY=d.offsetY*C*_.scaleY}},_removeShadow:function(o){this.shadow&&(o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0)},_applyPatternGradientTransform:function(o,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var p=d.gradientTransform||d.patternTransform,_=-this.width/2+d.offsetX||0,S=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?o.transform(this.width,0,0,this.height,_,S):o.transform(1,0,0,1,_,S),p&&o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),{offsetX:_,offsetY:S}},_renderPaintInOrder:function(o){this.paintFirst==="stroke"?(this._renderStroke(o),this._renderFill(o)):(this._renderFill(o),this._renderStroke(o))},_render:function(){},_renderFill:function(o){this.fill&&(o.save(),this._setFillStyles(o,this),this.fillRule==="evenodd"?o.fill("evenodd"):o.fill(),o.restore())},_renderStroke:function(o){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();o.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&o.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(o,this.strokeDashArray),this._setStrokeStyles(o,this),o.stroke(),o.restore()}},_applyPatternForTransformedGradient:function(o,d){var p=this._limitCacheSize(this._getCacheCanvasDimensions()),_=u.util.createCanvasElement(),S,C=this.canvas.getRetinaScaling(),O=p.x/this.scaleX/C,k=p.y/this.scaleY/C;_.width=Math.ceil(O),_.height=Math.ceil(k),S=_.getContext("2d"),S.beginPath(),S.moveTo(0,0),S.lineTo(O,0),S.lineTo(O,k),S.lineTo(0,k),S.closePath(),S.translate(O/2,k/2),S.scale(p.zoomX/this.scaleX/C,p.zoomY/this.scaleY/C),this._applyPatternGradientTransform(S,d),S.fillStyle=d.toLive(o),S.fill(),o.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),o.scale(C*this.scaleX/p.zoomX,C*this.scaleY/p.zoomY),o.strokeStyle=S.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var o=u.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",o.scaleX),this.set("scaleY",o.scaleY),this.angle=o.angle,this.skewX=o.skewX,this.skewY=0}},_removeTransformMatrix:function(o){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=u.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,o&&(this.scaleX*=o.scaleX,this.scaleY*=o.scaleY,this.cropX=o.cropX,this.cropY=o.cropY,d.x+=o.offsetLeft,d.y+=o.offsetTop,this.width=o.width,this.height=o.height),this.setPositionByOrigin(d,"center","center")},clone:function(o,d){var p=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(p,o):u.Object._fromObject("Object",p,o)},cloneAsImage:function(o,d){var p=this.toCanvasElement(d);return o&&o(new u.Image(p)),this},toCanvasElement:function(o){o||(o={});var d=u.util,p=d.saveObjectTransform(this),_=this.group,S=this.shadow,C=Math.abs,O=(o.multiplier||1)*(o.enableRetinaScaling?u.devicePixelRatio:1);delete this.group,o.withoutTransform&&d.resetObjectTransform(this),o.withoutShadow&&(this.shadow=null);var k=u.util.createCanvasElement(),P=this.getBoundingRect(!0,!0),H=this.shadow,K,ct={x:0,y:0},mt,pt,vt;H&&(mt=H.blur,H.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),ct.x=2*Math.round(C(H.offsetX)+mt)*C(K.scaleX),ct.y=2*Math.round(C(H.offsetY)+mt)*C(K.scaleY)),pt=P.width+ct.x,vt=P.height+ct.y,k.width=Math.ceil(pt),k.height=Math.ceil(vt);var gt=new u.StaticCanvas(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});o.format==="jpeg"&&(gt.backgroundColor="#fff"),this.setPositionByOrigin(new u.Point(gt.width/2,gt.height/2),"center","center");var z=this.canvas;gt.add(this);var X=gt.toCanvasElement(O||1,o);return this.shadow=S,this.set("canvas",z),_&&(this.group=_),this.set(p).setCoords(),gt._objects=[],gt.dispose(),gt=null,X},toDataURL:function(o){return o||(o={}),u.util.toDataURL(this.toCanvasElement(o),o.format||"png",o.quality||1)},isType:function(o){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===o},complexity:function(){return 1},toJSON:function(o){return this.toObject(o)},rotate:function(o){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",o),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(o,d){d=d||this.canvas.getPointer(o);var p=new u.Point(d.x,d.y),_=this._getLeftTopCoords();return this.angle&&(p=u.util.rotatePoint(p,_,n(-this.angle))),{x:p.x-_.x,y:p.y-_.y}},_setupCompositeOperation:function(o){this.globalCompositeOperation&&(o.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){u.runningAnimations&&u.runningAnimations.cancelByTarget(this)}}),u.util.createAccessors&&u.util.createAccessors(u.Object),c(u.Object.prototype,u.Observable),u.Object.NUM_FRACTION_DIGITS=2,u.Object.ENLIVEN_PROPS=["clipPath"],u.Object._fromObject=function(o,d,p,_){var S=u[o];d=h(d,!0),u.util.enlivenPatterns([d.fill,d.stroke],function(C){typeof C[0]<"u"&&(d.fill=C[0]),typeof C[1]<"u"&&(d.stroke=C[1]),u.util.enlivenObjectEnlivables(d,d,function(){var O=_?new S(d[_],d):new S(d);p&&p(O)})})},u.Object.__uid=0)}(M),function(){var v=m.util.degreesToRadians,u={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};m.util.object.extend(m.Object.prototype,{translateToGivenOrigin:function(h,a,r,n,s){var f=h.x,o=h.y,d,p,_;return typeof a=="string"?a=u[a]:a-=.5,typeof n=="string"?n=u[n]:n-=.5,d=n-a,typeof r=="string"?r=c[r]:r-=.5,typeof s=="string"?s=c[s]:s-=.5,p=s-r,(d||p)&&(_=this._getTransformedDimensions(),f=h.x+d*_.x,o=h.y+p*_.y),new m.Point(f,o)},translateToCenterPoint:function(h,a,r){var n=this.translateToGivenOrigin(h,a,r,"center","center");return this.angle?m.util.rotatePoint(n,h,v(this.angle)):n},translateToOriginPoint:function(h,a,r){var n=this.translateToGivenOrigin(h,"center","center",a,r);return this.angle?m.util.rotatePoint(n,h,v(this.angle)):n},getCenterPoint:function(){var h=new m.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,a){var r=this.getCenterPoint();return this.translateToOriginPoint(r,h,a)},toLocalPoint:function(h,a,r){var n=this.getCenterPoint(),s,f;return typeof a<"u"&&typeof r<"u"?s=this.translateToGivenOrigin(n,"center","center",a,r):s=new m.Point(this.left,this.top),f=new m.Point(h.x,h.y),this.angle&&(f=m.util.rotatePoint(f,n,-v(this.angle))),f.subtractEquals(s)},setPositionByOrigin:function(h,a,r){var n=this.translateToCenterPoint(h,a,r),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(h){var a=v(this.angle),r=this.getScaledWidth(),n=m.util.cos(a)*r,s=m.util.sin(a)*r,f,o;typeof this.originX=="string"?f=u[this.originX]:f=this.originX-.5,typeof h=="string"?o=u[h]:o=h-.5,this.left+=n*(o-f),this.top+=s*(o-f),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function v(r){return[new m.Point(r.tl.x,r.tl.y),new m.Point(r.tr.x,r.tr.y),new m.Point(r.br.x,r.br.y),new m.Point(r.bl.x,r.bl.y)]}var u=m.util,c=u.degreesToRadians,h=u.multiplyTransformMatrices,a=u.transformPoint;u.object.extend(m.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(r,n){return n?r?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),r?this.aCoords:this.lineCoords)},getCoords:function(r,n){return v(this._getCoords(r,n))},intersectsWithRect:function(r,n,s,f){var o=this.getCoords(s,f),d=m.Intersection.intersectPolygonRectangle(o,r,n);return d.status==="Intersection"},intersectsWithObject:function(r,n,s){var f=m.Intersection.intersectPolygonPolygon(this.getCoords(n,s),r.getCoords(n,s));return f.status==="Intersection"||r.isContainedWithinObject(this,n,s)||this.isContainedWithinObject(r,n,s)},isContainedWithinObject:function(r,n,s){for(var f=this.getCoords(n,s),o=n?r.aCoords:r.lineCoords,d=0,p=r._getImageLines(o);d<4;d++)if(!r.containsPoint(f[d],p))return!1;return!0},isContainedWithinRect:function(r,n,s,f){var o=this.getBoundingRect(s,f);return o.left>=r.x&&o.left+o.width<=n.x&&o.top>=r.y&&o.top+o.height<=n.y},containsPoint:function(r,d,s,f){var o=this._getCoords(s,f),d=d||this._getImageLines(o),p=this._findCrossPoints(r,d);return p!==0&&p%2===1},isOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,f=this.getCoords(!0,r);return f.some(function(o){return o.x<=s.x&&o.x>=n.x&&o.y<=s.y&&o.y>=n.y})||this.intersectsWithRect(n,s,!0,r)?!0:this._containsCenterOfCanvas(n,s,r)},_containsCenterOfCanvas:function(r,n,s){var f={x:(r.x+n.x)/2,y:(r.y+n.y)/2};return!!this.containsPoint(f,null,!0,s)},isPartiallyOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,s,!0,r))return!0;var f=this.getCoords(!0,r).every(function(o){return(o.x>=s.x||o.x<=n.x)&&(o.y>=s.y||o.y<=n.y)});return f&&this._containsCenterOfCanvas(n,s,r)},_getImageLines:function(r){var n={topline:{o:r.tl,d:r.tr},rightline:{o:r.tr,d:r.br},bottomline:{o:r.br,d:r.bl},leftline:{o:r.bl,d:r.tl}};return n},_findCrossPoints:function(r,n){var s,f,o,d,p,_=0,S;for(var C in n)if(S=n[C],!(S.o.y<r.y&&S.d.y<r.y)&&!(S.o.y>=r.y&&S.d.y>=r.y)&&(S.o.x===S.d.x&&S.o.x>=r.x?p=S.o.x:(s=0,f=(S.d.y-S.o.y)/(S.d.x-S.o.x),o=r.y-s*r.x,d=S.o.y-f*S.o.x,p=-(o-d)/(s-f)),p>=r.x&&(_+=1),_===2))break;return _},getBoundingRect:function(r,n){var s=this.getCoords(r,n);return u.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(r){return Math.abs(r)<this.minScaleLimit?r<0?-this.minScaleLimit:this.minScaleLimit:r===0?1e-4:r},scale:function(r){return this._set("scaleX",r),this._set("scaleY",r),this.setCoords()},scaleToWidth:function(r,n){var s=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(r/this.width/s)},scaleToHeight:function(r,n){var s=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(r/this.height/s)},calcLineCoords:function(){var r=this.getViewportTransform(),n=this.padding,s=c(this.angle),f=u.cos(s),o=u.sin(s),d=f*n,p=o*n,_=d+p,S=d-p,C=this.calcACoords(),O={tl:a(C.tl,r),tr:a(C.tr,r),bl:a(C.bl,r),br:a(C.br,r)};return n&&(O.tl.x-=S,O.tl.y-=_,O.tr.x+=_,O.tr.y-=S,O.bl.x-=_,O.bl.y+=S,O.br.x+=S,O.br.y+=_),O},calcOCoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),s=this.getViewportTransform(),f=h(s,n),o=h(f,r),o=h(o,[1/s[0],0,0,1/s[3],0,0]),d=this._calculateCurrentDimensions(),p={};return this.forEachControl(function(_,S,C){p[S]=_.positionHandler(d,o,C)}),p},calcACoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),s=h(n,r),f=this._getTransformedDimensions(),o=f.x/2,d=f.y/2;return{tl:a({x:-o,y:-d},s),tr:a({x:o,y:-d},s),bl:a({x:-o,y:d},s),br:a({x:o,y:d},s)}},setCoords:function(r){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),r?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return u.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var r=this.getCenterPoint();return[1,0,0,1,r.x,r.y]},transformMatrixKey:function(r){var n="_",s="";return!r&&this.group&&(s=this.group.transformMatrixKey(r)+n),s+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(r){var n=this.calcOwnMatrix();if(r||!this.group)return n;var s=this.transformMatrixKey(r),f=this.matrixCache||(this.matrixCache={});return f.key===s?f.value:(this.group&&(n=h(this.group.calcTransformMatrix(!1),n)),f.key=s,f.value=n,n)},calcOwnMatrix:function(){var r=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===r)return n.value;var s=this._calcTranslateMatrix(),f={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=r,n.value=u.composeMatrix(f),n.value},_getNonTransformedDimensions:function(){var r=this.strokeWidth,n=this.width+r,s=this.height+r;return{x:n,y:s}},_getTransformedDimensions:function(r,n){typeof r>"u"&&(r=this.skewX),typeof n>"u"&&(n=this.skewY);var s,f,o,d=r===0&&n===0;if(this.strokeUniform?(f=this.width,o=this.height):(s=this._getNonTransformedDimensions(),f=s.x,o=s.y),d)return this._finalizeDimensions(f*this.scaleX,o*this.scaleY);var p=u.sizeAfterTransform(f,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:r,skewY:n});return this._finalizeDimensions(p.x,p.y)},_finalizeDimensions:function(r,n){return this.strokeUniform?{x:r+this.strokeWidth,y:n+this.strokeWidth}:{x:r,y:n}},_calculateCurrentDimensions:function(){var r=this.getViewportTransform(),n=this._getTransformedDimensions(),s=a(n,r,!0);return s.scalarAdd(2*this.padding)}})}(),m.util.object.extend(m.Object.prototype,{sendToBack:function(){return this.group?m.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?m.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(v){return this.group?m.StaticCanvas.prototype.sendBackwards.call(this.group,this,v):this.canvas&&this.canvas.sendBackwards(this,v),this},bringForward:function(v){return this.group?m.StaticCanvas.prototype.bringForward.call(this.group,this,v):this.canvas&&this.canvas.bringForward(this,v),this},moveTo:function(v){return this.group&&this.group.type!=="activeSelection"?m.StaticCanvas.prototype.moveTo.call(this.group,this,v):this.canvas&&this.canvas.moveTo(this,v),this}}),function(){function v(c,h){if(h){if(h.toLive)return c+": url(#SVGID_"+h.id+"); ";var a=new m.Color(h),r=c+": "+a.toRgb()+"; ",n=a.getAlpha();return n!==1&&(r+=c+"-opacity: "+n.toString()+"; "),r}else return c+": none; "}var u=m.util.toFixed;m.util.object.extend(m.Object.prototype,{getSvgStyles:function(c){var h=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",f=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=typeof this.opacity<"u"?this.opacity:"1",p=this.visible?"":" visibility: hidden;",_=c?"":this.getSvgFilter(),S=v("fill",this.fill),C=v("stroke",this.stroke);return[C,"stroke-width: ",a,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",f,"; ","stroke-miterlimit: ",o,"; ",S,"fill-rule: ",h,"; ","opacity: ",d,";",_,p].join("")},getSvgSpanStyles:function(c,h){var a="; ",n=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+a:"",r=c.strokeWidth?"stroke-width: "+c.strokeWidth+a:"",n=n,s=c.fontSize?"font-size: "+c.fontSize+"px"+a:"",f=c.fontStyle?"font-style: "+c.fontStyle+a:"",o=c.fontWeight?"font-weight: "+c.fontWeight+a:"",d=c.fill?v("fill",c.fill):"",p=c.stroke?v("stroke",c.stroke):"",_=this.getSvgTextDecoration(c),S=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return _&&(_="text-decoration: "+_+a),[p,r,n,s,f,o,_,d,S,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(h){return c[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,h){var a=c?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+m.util.matrixToSVG(a);return r+(h||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var h=m.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',u(-this.width/2,h),'" y="',u(-this.height/2,h),'" width="',u(this.width,h),'" height="',u(this.height,h),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,h){h=h||{};var a=h.reviver,r=h.additionalTransform||"",n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=c.indexOf("COMMON_PARTS");return c[s]=n,a?a(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,h){h=h||{};var a=h.noStyle,r=h.reviver,n=a?"":'style="'+this.getSvgStyles()+'" ',s=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=f&&f.absolutePositioned,p=this.stroke,_=this.fill,S=this.shadow,C,O=[],k,P=c.indexOf("COMMON_PARTS"),H=h.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+m.Object.__uid++,k='<clipPath id="'+f.clipPathId+`" >
`+f.toClipPathSVG(r)+`</clipPath>
`),d&&O.push("<g ",s,this.getSvgCommons(),` >
`),O.push("<g ",this.getSvgTransform(!1),d?"":s+this.getSvgCommons(),` >
`),C=[n,o,a?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),c[P]=C,_&&_.toLive&&O.push(_.toSVG(this)),p&&p.toLive&&O.push(p.toSVG(this)),S&&O.push(S.toSVG(this)),f&&O.push(k),O.push(c.join("")),O.push(`</g>
`),d&&O.push(`</g>
`),r?r(O.join("")):O.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var v=m.util.object.extend,u="stateProperties";function c(a,r,n){var s={},f=!0;n.forEach(function(o){s[o]=a[o]}),v(a[r],s,f)}function h(a,r,n){if(a===r)return!0;if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(var s=0,f=a.length;s<f;s++)if(!h(a[s],r[s]))return!1;return!0}else if(a&&typeof a=="object"){var o=Object.keys(a),d;if(!r||typeof r!="object"||!n&&o.length!==Object.keys(r).length)return!1;for(var s=0,f=o.length;s<f;s++)if(d=o[s],!(d==="canvas"||d==="group")&&!h(a[d],r[d]))return!1;return!0}}m.util.object.extend(m.Object.prototype,{hasStateChanged:function(a){a=a||u;var r="_"+a;return Object.keys(this[r]).length<this[a].length?!0:!h(this[r],this,!0)},saveState:function(a){var r=a&&a.propertySet||u,n="_"+r;return this[n]?(c(this,n,this[r]),a&&a.stateProperties&&c(this,n,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var r=a.propertySet||u;return a.propertySet=r,this["_"+r]={},this.saveState(a),this}})}(),function(){var v=m.util.degreesToRadians;m.util.object.extend(m.Object.prototype,{_findTargetCorner:function(u,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=u.x,a=u.y,r,n,s=Object.keys(this.oCoords),f=s.length-1,o;for(this.__corner=0;f>=0;f--)if(o=s[f],!!this.isControlVisible(o)&&(n=this._getImageLines(c?this.oCoords[o].touchCorner:this.oCoords[o].corner),r=this._findCrossPoints({x:h,y:a},n),r!==0&&r%2===1))return this.__corner=o,o;return!1},forEachControl:function(u){for(var c in this.controls)u(this.controls[c],c,this)},_setCornerCoords:function(){var u=this.oCoords;for(var c in u){var h=this.controls[c];u[c].corner=h.calcCornerCoords(this.angle,this.cornerSize,u[c].x,u[c].y,!1),u[c].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,u[c].x,u[c].y,!0)}},drawSelectionBackground:function(u){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;u.save();var c=this.getCenterPoint(),h=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return u.translate(c.x,c.y),u.scale(1/a[0],1/a[3]),u.rotate(v(this.angle)),u.fillStyle=this.selectionBackgroundColor,u.fillRect(-h.x/2,-h.y/2,h.x,h.y),u.restore(),this},drawBorders:function(u,c){c=c||{};var h=this._calculateCurrentDimensions(),a=this.borderScaleFactor,r=h.x+a,n=h.y+a,s=typeof c.hasControls<"u"?c.hasControls:this.hasControls,f=!1;return u.save(),u.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(u,c.borderDashArray||this.borderDashArray),u.strokeRect(-r/2,-n/2,r,n),s&&(u.beginPath(),this.forEachControl(function(o,d,p){o.withConnection&&o.getVisibility(p,d)&&(f=!0,u.moveTo(o.x*r,o.y*n),u.lineTo(o.x*r+o.offsetX,o.y*n+o.offsetY))}),f&&u.stroke()),u.restore(),this},drawBordersInGroup:function(u,c,h){h=h||{};var a=m.util.sizeAfterTransform(this.width,this.height,c),r=this.strokeWidth,n=this.strokeUniform,s=this.borderScaleFactor,f=a.x+r*(n?this.canvas.getZoom():c.scaleX)+s,o=a.y+r*(n?this.canvas.getZoom():c.scaleY)+s;return u.save(),this._setLineDash(u,h.borderDashArray||this.borderDashArray),u.strokeStyle=h.borderColor||this.borderColor,u.strokeRect(-f/2,-o/2,f,o),u.restore(),this},drawControls:function(u,c){c=c||{},u.save();var h=1,a,r;return this.canvas&&(h=this.canvas.getRetinaScaling()),u.setTransform(h,0,0,h,0,0),u.strokeStyle=u.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(u.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(u,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(n,s,f){r=f.oCoords[s],n.getVisibility(f,s)&&(a&&(r=m.util.transformPoint(r,a)),n.render(u,r.x,r.y,c,f))}),u.restore(),this},isControlVisible:function(u){return this.controls[u]&&this.controls[u].getVisibility(this,u)},setControlVisible:function(u,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[u]=c,this},setControlsVisibility:function(u){u||(u={});for(var c in u)this.setControlVisible(c,u[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),m.util.object.extend(m.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(v,u){u=u||{};var c=function(){},h=u.onComplete||c,a=u.onChange||c,r=this;return m.util.animate({target:this,startValue:v.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){v.set("left",n),r.requestRenderAll(),a()},onComplete:function(){v.setCoords(),h()}})},fxCenterObjectV:function(v,u){u=u||{};var c=function(){},h=u.onComplete||c,a=u.onChange||c,r=this;return m.util.animate({target:this,startValue:v.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){v.set("top",n),r.requestRenderAll(),a()},onComplete:function(){v.setCoords(),h()}})},fxRemove:function(v,u){u=u||{};var c=function(){},h=u.onComplete||c,a=u.onChange||c,r=this;return m.util.animate({target:this,startValue:v.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){v.set("opacity",n),r.requestRenderAll(),a()},onComplete:function(){r.remove(v),h()}})}}),m.util.object.extend(m.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var v=[],u,c,h=[];for(u in arguments[0])v.push(u);for(var a=0,r=v.length;a<r;a++)u=v[a],c=a!==r-1,h.push(this._animate(u,arguments[0][u],arguments[1],c));return h}else return this._animate.apply(this,arguments)},_animate:function(v,u,c,h){var a=this,r;u=u.toString(),c?c=m.util.object.clone(c):c={},~v.indexOf(".")&&(r=v.split("."));var n=a.colorProperties.indexOf(v)>-1||r&&a.colorProperties.indexOf(r[1])>-1,s=r?this.get(r[0])[r[1]]:this.get(v);"from"in c||(c.from=s),n||(~u.indexOf("=")?u=s+parseFloat(u.replace("=","")):u=parseFloat(u));var f={target:this,startValue:c.from,endValue:u,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(o,d,p){return c.abort.call(a,o,d,p)},onChange:function(o,d,p){r?a[r[0]][r[1]]=o:a.set(v,o),!h&&c.onChange&&c.onChange(o,d,p)},onComplete:function(o,d,p){h||(a.setCoords(),c.onComplete&&c.onComplete(o,d,p))}};return n?m.util.animateColor(f.startValue,f.endValue,f.duration,f):m.util.animate(f)}}),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(u.Line){u.warn("fabric.Line is already defined");return}u.Line=u.util.createClass(u.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:u.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,s){n||(n=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(s)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,s){return this.callSuper("_set",n,s),typeof a[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var s=this.calcLinePoints();n.moveTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineWidth=this.strokeWidth;var f=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=f},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return c(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,f=n*this.width*.5,o=s*this.height*.5,d=n*this.width*-.5,p=s*this.height*-.5;return{x1:f,x2:d,y1:o,y2:p}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),u.Line.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),u.Line.fromElement=function(n,s,f){f=f||{};var o=u.parseAttributes(n,u.Line.ATTRIBUTE_NAMES),d=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];s(new u.Line(d,c(o,f)))},u.Line.fromObject=function(n,s){function f(d){delete d.points,s&&s(d)}var o=h(n,!0);o.points=[n.x1,n.y1,n.x2,n.y2],u.Object._fromObject("Line",o,f,"points")};function r(n,s){var f=n.origin,o=n.axis1,d=n.axis2,p=n.dimension,_=s.nearest,S=s.center,C=s.farthest;return function(){switch(this.get(f)){case _:return Math.min(this.get(o),this.get(d));case S:return Math.min(this.get(o),this.get(d))+.5*this.get(p);case C:return Math.max(this.get(o),this.get(d))}}}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.degreesToRadians;if(u.Circle){u.warn("fabric.Circle is already defined.");return}u.Circle=u.util.createClass(u.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:u.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,r){return this.callSuper("_set",a,r),a==="radius"&&this.setRadius(r),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,r=0,n=0,s=(this.endAngle-this.startAngle)%360;if(s===0)a=["<circle ","COMMON_PARTS",'cx="'+r+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var f=c(this.startAngle),o=c(this.endAngle),d=this.radius,p=u.util.cos(f)*d,_=u.util.sin(f)*d,S=u.util.cos(o)*d,C=u.util.sin(o)*d,O=s>180?"1":"0";a=['<path d="M '+p+" "+_," A "+d+" "+d," 0 ",+O+" 1"," "+S+" "+C,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),u.Circle.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),u.Circle.fromElement=function(a,r){var n=u.parseAttributes(a,u.Circle.ATTRIBUTE_NAMES);if(!h(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,r(new u.Circle(n))};function h(a){return"radius"in a&&a.radius>=0}u.Circle.fromObject=function(a,r){u.Object._fromObject("Circle",a,r)}}(M),function(v){var u=v.fabric||(v.fabric={});if(u.Triangle){u.warn("fabric.Triangle is already defined");return}u.Triangle=u.util.createClass(u.Object,{type:"triangle",width:100,height:100,_render:function(c){var h=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-h,a),c.lineTo(0,-a),c.lineTo(h,a),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,h=this.height/2,a=[-c+" "+h,"0 "+-h,c+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),u.Triangle.fromObject=function(c,h){return u.Object._fromObject("Triangle",c,h)}}(M),function(v){var u=v.fabric||(v.fabric={}),c=Math.PI*2;if(u.Ellipse){u.warn("fabric.Ellipse is already defined.");return}u.Ellipse=u.util.createClass(u.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:u.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,a){switch(this.callSuper("_set",h,a),h){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,c,!1),h.restore(),this._renderPaintInOrder(h)}}),u.Ellipse.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),u.Ellipse.fromElement=function(h,a){var r=u.parseAttributes(h,u.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,a(new u.Ellipse(r))},u.Ellipse.fromObject=function(h,a){u.Object._fromObject("Ellipse",h,a)}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend;if(u.Rect){u.warn("fabric.Rect is already defined");return}u.Rect=u.util.createClass(u.Object,{stateProperties:u.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:u.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var a=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,s=this.height,f=-this.width/2,o=-this.height/2,d=a!==0||r!==0,p=1-.5522847498;h.beginPath(),h.moveTo(f+a,o),h.lineTo(f+n-a,o),d&&h.bezierCurveTo(f+n-p*a,o,f+n,o+p*r,f+n,o+r),h.lineTo(f+n,o+s-r),d&&h.bezierCurveTo(f+n,o+s-p*r,f+n-p*a,o+s,f+n-a,o+s),h.lineTo(f+a,o+s),d&&h.bezierCurveTo(f+p*a,o+s,f,o+s-p*r,f,o+s-r),h.lineTo(f,o+r),d&&h.bezierCurveTo(f,o+p*r,f+p*a,o,f+a,o),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),u.Rect.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),u.Rect.fromElement=function(h,a,r){if(!h)return a(null);r=r||{};var n=u.parseAttributes(h,u.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var s=new u.Rect(c(r?u.util.object.clone(r):{},n));s.visible=s.visible&&s.width>0&&s.height>0,a(s)},u.Rect.fromObject=function(h,a){return u.Object._fromObject("Rect",h,a)}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.util.array.min,a=u.util.array.max,r=u.util.toFixed,n=u.util.projectStrokeOnPoints;if(u.Polyline){u.warn("fabric.Polyline is already defined");return}u.Polyline=u.util.createClass(u.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:u.Object.prototype.cacheProperties.concat("points"),initialize:function(s,f){f=f||{},this.points=s||[],this.callSuper("initialize",f),this._setPositionDimensions(f)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(s){var f=this._calcDimensions(s),o,d=this.exactBoundingBox?this.strokeWidth:0;this.width=f.width-d,this.height=f.height-d,s.fromSVG||(o=this.translateToGivenOrigin({x:f.left-this.strokeWidth/2+d/2,y:f.top-this.strokeWidth/2+d/2},"left","top",this.originX,this.originY)),typeof s.left>"u"&&(this.left=s.fromSVG?f.left:o.x),typeof s.top>"u"&&(this.top=s.fromSVG?f.top:o.y),this.pathOffset={x:f.left+this.width/2+d/2,y:f.top+this.height/2+d/2}},_calcDimensions:function(){var s=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,f=h(s,"x")||0,o=h(s,"y")||0,d=a(s,"x")||0,p=a(s,"y")||0,_=d-f,S=p-o;return{left:f,top:o,width:_,height:S}},toObject:function(s){return c(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],f=this.pathOffset.x,o=this.pathOffset.y,d=u.Object.NUM_FRACTION_DIGITS,p=0,_=this.points.length;p<_;p++)s.push(r(this.points[p].x-f,d),",",r(this.points[p].y-o,d)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),`" />
`]},commonRender:function(s){var f,o=this.points.length,d=this.pathOffset.x,p=this.pathOffset.y;if(!o||isNaN(this.points[o-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-d,this.points[0].y-p);for(var _=0;_<o;_++)f=this.points[_],s.lineTo(f.x-d,f.y-p);return!0},_render:function(s){this.commonRender(s)&&this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),u.Polyline.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(),u.Polyline.fromElementGenerator=function(s){return function(f,o,d){if(!f)return o(null);d||(d={});var p=u.parsePointsAttribute(f.getAttribute("points")),_=u.parseAttributes(f,u[s].ATTRIBUTE_NAMES);_.fromSVG=!0,o(new u[s](p,c(_,d)))}},u.Polyline.fromElement=u.Polyline.fromElementGenerator("Polyline"),u.Polyline.fromObject=function(s,f){return u.Object._fromObject("Polyline",s,f,"points")}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.projectStrokeOnPoints;if(u.Polygon){u.warn("fabric.Polygon is already defined");return}u.Polygon=u.util.createClass(u.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),u.Polygon.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(),u.Polygon.fromElement=u.Polyline.fromElementGenerator("Polygon"),u.Polygon.fromObject=function(h,a){u.Object._fromObject("Polygon",h,a,"points")}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.array.min,h=u.util.array.max,a=u.util.object.extend,r=u.util.object.clone,n=u.util.toFixed;if(u.Path){u.warn("fabric.Path is already defined");return}u.Path=u.util.createClass(u.Object,{type:"path",path:null,cacheProperties:u.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:u.Object.prototype.stateProperties.concat("path"),initialize:function(s,f){f=r(f||{}),delete f.path,this.callSuper("initialize",f),this._setPath(s||[],f)},_setPath:function(s,f){this.path=u.util.makePathSimpler(Array.isArray(s)?s:u.util.parsePath(s)),u.Polyline.prototype._setPositionDimensions.call(this,f||{})},_renderPathCommands:function(s){var f,o=0,d=0,p=0,_=0,S=0,C=0,O=-this.pathOffset.x,k=-this.pathOffset.y;s.beginPath();for(var P=0,H=this.path.length;P<H;++P)switch(f=this.path[P],f[0]){case"L":p=f[1],_=f[2],s.lineTo(p+O,_+k);break;case"M":p=f[1],_=f[2],o=p,d=_,s.moveTo(p+O,_+k);break;case"C":p=f[5],_=f[6],S=f[3],C=f[4],s.bezierCurveTo(f[1]+O,f[2]+k,S+O,C+k,p+O,_+k);break;case"Q":s.quadraticCurveTo(f[1]+O,f[2]+k,f[3]+O,f[4]+k),p=f[3],_=f[4],S=f[1],C=f[2];break;case"z":case"Z":p=o,_=d,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return a(this.callSuper("toObject",s),{path:this.path.map(function(f){return f.slice()})})},toDatalessObject:function(s){var f=this.toObject(["sourcePath"].concat(s));return f.sourcePath&&delete f.path,f},_toSVG:function(){var s=u.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=u.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,s)+", "+n(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var f=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:f})},toSVG:function(s){var f=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:f})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],f=[],o,d=0,p=0,_=0,S=0,C,O=0,k=this.path.length;O<k;++O){switch(o=this.path[O],o[0]){case"L":_=o[1],S=o[2],C=[];break;case"M":_=o[1],S=o[2],d=_,p=S,C=[];break;case"C":C=u.util.getBoundsOfCurve(_,S,o[1],o[2],o[3],o[4],o[5],o[6]),_=o[5],S=o[6];break;case"Q":C=u.util.getBoundsOfCurve(_,S,o[1],o[2],o[1],o[2],o[3],o[4]),_=o[3],S=o[4];break;case"z":case"Z":_=d,S=p;break}C.forEach(function(vt){s.push(vt.x),f.push(vt.y)}),s.push(_),f.push(S)}var P=c(s)||0,H=c(f)||0,K=h(s)||0,ct=h(f)||0,mt=K-P,pt=ct-H;return{left:P,top:H,width:mt,height:pt}}}),u.Path.fromObject=function(s,f){if(typeof s.sourcePath=="string"){var o=s.sourcePath;u.loadSVGFromURL(o,function(d){var p=d[0];p.setOptions(s),s.clipPath?u.util.enlivenObjects([s.clipPath],function(_){p.clipPath=_[0],f&&f(p)}):f&&f(p)})}else u.Object._fromObject("Path",s,f,"path")},u.Path.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(["d"]),u.Path.fromElement=function(s,f,o){var d=u.parseAttributes(s,u.Path.ATTRIBUTE_NAMES);d.fromSVG=!0,f(new u.Path(d.d,a(d,o)))}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.array.min,h=u.util.array.max;u.Group||(u.Group=u.util.createClass(u.Object,u.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,r,n){r=r||{},this._objects=[],n&&this.callSuper("initialize",r),this._objects=a||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(n)this._updateObjectsACoords();else{var f=r&&r.centerPoint;r.originX!==void 0&&(this.originX=r.originX),r.originY!==void 0&&(this.originY=r.originY),f||this._calcBounds(),this._updateObjectsCoords(f),delete r.centerPoint,this.callSuper("initialize",r)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,r=this._objects.length;r--;)this._objects[r].setCoords(a)},_updateObjectsCoords:function(r){for(var r=r||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],r)},_updateObjectCoords:function(a,r){var n=a.left,s=a.top,f=!0;a.set({left:n-r.x,top:s-r.y}),a.group=this,a.setCoords(f)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var r=!!this.group;return this._restoreObjectsState(),u.util.resetObjectTransform(this),a&&(r&&u.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,r?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),u.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,r){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(a,r);if(a==="canvas")for(;n--;)this._objects[n]._set(a,r);u.Object.prototype._set.call(this,a,r)},toObject:function(a){var r=this.includeDefaultValues,n=this._objects.filter(function(f){return!f.excludeFromExport}).map(function(f){var o=f.includeDefaultValues;f.includeDefaultValues=r;var d=f.toObject(a);return f.includeDefaultValues=o,d}),s=u.Object.prototype.toObject.call(this,a);return s.objects=n,s},toDatalessObject:function(a){var r,n=this.sourcePath;if(n)r=n;else{var s=this.includeDefaultValues;r=this._objects.map(function(o){var d=o.includeDefaultValues;o.includeDefaultValues=s;var p=o.toDatalessObject(a);return o.includeDefaultValues=d,p})}var f=u.Object.prototype.toDatalessObject.call(this,a);return f.objects=r,f},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=u.Object.prototype.shouldCache.call(this);if(a){for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(u.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,r=this._objects.length;a<r;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var r=0,n=this._objects.length;r<n;r++)this._objects[r].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-f/2,s,f)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(r){u.util.addTransformToObject(r,a),delete r.group,r.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,r=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var s=new u.ActiveSelection([]);return s.set(n),s.type="activeSelection",r.remove(this),a.forEach(function(f){f.group=s,f.dirty=!0,r.add(f)}),s.canvas=r,s._objects=a,r._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(r){r.setCoords(a)}),this},_calcBounds:function(a){for(var r=[],n=[],s,f,o,d=["tr","br","bl","tl"],p=0,_=this._objects.length,S,C=d.length;p<_;++p){for(s=this._objects[p],o=s.calcACoords(),S=0;S<C;S++)f=d[S],r.push(o[f].x),n.push(o[f].y);s.aCoords=o}this._getBounds(r,n,a)},_getBounds:function(a,r,n){var s=new u.Point(c(a),c(r)),f=new u.Point(h(a),h(r)),o=s.y||0,d=s.x||0,p=f.x-s.x||0,_=f.y-s.y||0;this.width=p,this.height=_,n||this.setPositionByOrigin({x:d,y:o},"left","top")},_toSVG:function(a){for(var r=["<g ","COMMON_PARTS",` >
`],n=0,s=this._objects.length;n<s;n++)r.push("		",this._objects[n].toSVG(a));return r.push(`</g>
`),r},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",r=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),r].join("")},toClipPathSVG:function(a){for(var r=[],n=0,s=this._objects.length;n<s;n++)r.push("	",this._objects[n].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(r,{reviver:a})}}),u.Group.fromObject=function(a,r){var n=a.objects,s=u.util.object.clone(a,!0);if(delete s.objects,typeof n=="string"){u.loadSVGFromURL(n,function(f){var o=u.util.groupSVGElements(f,a,n),d=s.clipPath;delete s.clipPath,o.set(s),d?u.util.enlivenObjects([d],function(p){o.clipPath=p[0],r&&r(o)}):r&&r(o)});return}u.util.enlivenObjects(n,function(f){u.util.enlivenObjectEnlivables(a,s,function(){r&&r(new u.Group(f,s,!0))})})})}(M),function(v){var u=v.fabric||(v.fabric={});u.ActiveSelection||(u.ActiveSelection=u.util.createClass(u.Group,{type:"activeSelection",initialize:function(c,h){h=h||{},this._objects=c||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),u.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var h=u.Object.prototype.toObject.call(this),a=new u.Group([]);if(delete h.type,a.set(h),c.forEach(function(n){n.canvas.remove(n),n.group=a}),a._objects=c,!this.canvas)return a;var r=this.canvas;return r.add(a),r._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,h,a){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(c,a);this.callSuper("_renderControls",c,h),c.restore()}}),u.ActiveSelection.fromObject=function(c,h){u.util.enlivenObjects(c.objects,function(a){delete c.objects,h&&h(new u.ActiveSelection(a,c,!0))})})}(M),function(v){var u=m.util.object.extend;if(v.fabric||(v.fabric={}),v.fabric.Image){m.warn("fabric.Image is already defined.");return}m.Image=m.util.createClass(m.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:m.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:m.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,h){h||(h={}),this.filters=[],this.cacheKey="texture"+m.Object.__uid++,this.callSuper("initialize",h),this._initElement(c,h)},getElement:function(){return this._element||{}},setElement:function(c,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var h=m.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){m.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-h,-a),c.lineTo(h,-a),c.lineTo(h,a),c.lineTo(-h,a),c.lineTo(-h,-a),c.closePath()}},toObject:function(c){var h=[];this.filters.forEach(function(r){r&&h.push(r.toObject())});var a=u(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],h=[],a,r=this._element,n=-this.width/2,s=-this.height/2,f="",o="";if(!r)return[];if(this.hasCrop()){var d=m.Object.__uid++;c.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),f=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',s-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,o,'"',f,`></image>
`),this.stroke||this.strokeDashArray){var p=this.fill;this.fill=null,a=["	<rect ",'x="',n,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=p}return this.paintFirst!=="fill"?c=c.concat(a,h):c=c.concat(h,a),c},getSrc:function(c){var h=c?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(c,h,a){return m.util.loadImage(c,function(r,n){this.setElement(r,a),this._setWidthHeight(),h&&h(this,n)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,h=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),r=a.scaleX,n=a.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||r>h&&n>h){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,this._lastScaleY=n;return}m.filterBackend||(m.filterBackend=m.initFilterBackend());var f=m.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,d=s.width,p=s.height;f.width=d,f.height=p,this._element=f,this._lastScaleX=c.scaleX=r,this._lastScaleY=c.scaleY=n,m.filterBackend.applyFilters([c],s,d,p,this._element,o),this._filterScalingX=f.width/this._originalElement.width,this._filterScalingY=f.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,a=h.naturalWidth||h.width,r=h.naturalHeight||h.height;if(this._element===this._originalElement){var n=m.util.createCanvasElement();n.width=a,n.height=r,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,r),this._lastScaleX=1,this._lastScaleY=1;return m.filterBackend||(m.filterBackend=m.initFilterBackend()),m.filterBackend.applyFilters(c,this._originalElement,a,r,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){m.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){m.util.setImageSmoothing(c,this.imageSmoothing),m.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var h=this._element;if(h){var a=this._filterScalingX,r=this._filterScalingY,n=this.width,s=this.height,f=Math.min,o=Math.max,d=o(this.cropX,0),p=o(this.cropY,0),_=h.naturalWidth||h.width,S=h.naturalHeight||h.height,C=d*a,O=p*r,k=f(n*a,_-C),P=f(s*r,S-O),H=-n/2,K=-s/2,ct=f(n,_/a-d),mt=f(s,S/r-p);h&&c.drawImage(h,C,O,k,P,H,K,ct,mt)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,h){this.setElement(m.util.getById(c),h),m.util.addClass(this.getElement(),m.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,h){c&&c.length?m.util.enlivenObjects(c,function(a){h&&h(a)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(c){c||(c={});var h=this.getElement();this.width=c.width||h.naturalWidth||h.width||0,this.height=c.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var c=m.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,a=this._element.height,r=1,n=1,s=0,f=0,o=0,d=0,p,_=this.width,S=this.height,C={width:_,height:S};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(r=n=m.util.findScaleToFit(this._element,C),p=(_-h*r)/2,c.alignX==="Min"&&(s=-p),c.alignX==="Max"&&(s=p),p=(S-a*n)/2,c.alignY==="Min"&&(f=-p),c.alignY==="Max"&&(f=p)),c.meetOrSlice==="slice"&&(r=n=m.util.findScaleToCover(this._element,C),p=h-_/r,c.alignX==="Mid"&&(o=p/2),c.alignX==="Max"&&(o=p),p=a-S/n,c.alignY==="Mid"&&(d=p/2),c.alignY==="Max"&&(d=p),h=_/r,a=S/n)):(r=_/h,n=S/a),{width:h,height:a,scaleX:r,scaleY:n,offsetLeft:s,offsetTop:f,cropX:o,cropY:d}}}),m.Image.CSS_CANVAS="canvas-img",m.Image.prototype.getSvgSrc=m.Image.prototype.getSrc,m.Image.fromObject=function(c,h){var a=m.util.object.clone(c);m.util.loadImage(a.src,function(r,n){if(n){h&&h(null,!0);return}m.Image.prototype._initFilters.call(a,a.filters,function(s){a.filters=s||[],m.Image.prototype._initFilters.call(a,[a.resizeFilter],function(f){a.resizeFilter=f[0],m.util.enlivenObjectEnlivables(a,a,function(){var o=new m.Image(r,a);h(o,!1)})})})},null,a.crossOrigin)},m.Image.fromURL=function(c,h,a){m.util.loadImage(c,function(r,n){h&&h(new m.Image(r,a),n)},null,a&&a.crossOrigin)},m.Image.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),m.Image.fromElement=function(c,h,a){var r=m.parseAttributes(c,m.Image.ATTRIBUTE_NAMES);m.Image.fromURL(r["xlink:href"],h,u(a?m.util.object.clone(a):{},r))}}(M),m.util.object.extend(m.Object.prototype,{_getAngleValueForStraighten:function(){var v=this.angle%360;return v>0?Math.round((v-1)/90)*90:Math.round(v/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(v){v=v||{};var u=function(){},c=v.onComplete||u,h=v.onChange||u,a=this;return m.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(r){a.rotate(r),h()},onComplete:function(){a.setCoords(),c()}})}}),m.util.object.extend(m.StaticCanvas.prototype,{straightenObject:function(v){return v.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(v){return v.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function v(c,h){var a="precision "+h+` float;
void main(){}`,r=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(r,a),c.compileShader(r),!!c.getShaderParameter(r,c.COMPILE_STATUS)}m.isWebglSupported=function(c){if(m.isLikelyNode)return!1;c=c||m.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),a=h.getContext("webgl")||h.getContext("experimental-webgl"),r=!1;if(a){m.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),r=m.maxTextureSize>=c;for(var n=["highp","mediump","lowp"],s=0;s<3;s++)if(v(a,n[s])){m.webGlPrecision=n[s];break}}return this.isSupported=r,r},m.WebglFilterBackend=u;function u(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}u.prototype={tileSize:2048,resources:{},setupGLContext:function(c,h){this.dispose(),this.createWebGLCanvas(c,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,h)},chooseFastestCopyGLTo2DMethod:function(c,h){var a=typeof window.performance<"u",r;try{new ImageData(1,1),r=!0}catch{r=!1}var n=typeof ArrayBuffer<"u",s=typeof Uint8ClampedArray<"u";if(a&&r&&n&&s){var f=m.util.createCanvasElement(),o=new ArrayBuffer(c*h*4);if(m.forceGLPutImageData){this.imageBuffer=o,this.copyGLTo2D=St;return}var d={imageBuffer:o,destinationWidth:c,destinationHeight:h,targetCanvas:f},p,_,S;f.width=c,f.height=h,p=window.performance.now(),ht.call(d,this.gl,d),_=window.performance.now()-p,p=window.performance.now(),St.call(d,this.gl,d),S=window.performance.now()-p,_>S?(this.imageBuffer=o,this.copyGLTo2D=St):this.copyGLTo2D=ht}},createWebGLCanvas:function(c,h){var a=m.util.createCanvasElement();a.width=c,a.height=h;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=a.getContext("webgl",r);n||(n=a.getContext("experimental-webgl",r)),n&&(n.clearColor(0,0,0,0),this.canvas=a,this.gl=n)},applyFilters:function(c,h,a,r,n,s){var f=this.gl,o;s&&(o=this.getCachedTexture(s,h));var d={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:a,sourceHeight:r,destinationWidth:a,destinationHeight:r,context:f,sourceTexture:this.createTexture(f,a,r,!o&&h),targetTexture:this.createTexture(f,a,r),originalTexture:o||this.createTexture(f,a,r,!o&&h),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},p=f.createFramebuffer();return f.bindFramebuffer(f.FRAMEBUFFER,p),c.forEach(function(_){_&&_.applyTo(d)}),nt(d),this.copyGLTo2D(f,d),f.bindTexture(f.TEXTURE_2D,null),f.deleteTexture(d.sourceTexture),f.deleteTexture(d.targetTexture),f.deleteFramebuffer(p),n.getContext("2d").setTransform(1,0,0,1,0,0),d},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,h,a,r,n){var s=c.createTexture();return c.bindTexture(c.TEXTURE_2D,s),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),r?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,r):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,a,0,c.RGBA,c.UNSIGNED_BYTE,null),s},getCachedTexture:function(c,h){if(this.textureCache[c])return this.textureCache[c];var a=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[c]=a,a},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:ht,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,h={renderer:"",vendor:""};if(!c)return h;var a=c.getExtension("WEBGL_debug_renderer_info");if(a){var r=c.getParameter(a.UNMASKED_RENDERER_WEBGL),n=c.getParameter(a.UNMASKED_VENDOR_WEBGL);r&&(h.renderer=r.toLowerCase()),n&&(h.vendor=n.toLowerCase())}return this.gpuInfo=h,h}}}();function nt(v){var u=v.targetCanvas,c=u.width,h=u.height,a=v.destinationWidth,r=v.destinationHeight;(c!==a||h!==r)&&(u.width=a,u.height=r)}function ht(v,u){var c=v.canvas,h=u.targetCanvas,a=h.getContext("2d");a.translate(0,h.height),a.scale(1,-1);var r=c.height-h.height;a.drawImage(c,0,r,h.width,h.height,0,0,h.width,h.height)}function St(v,u){var c=u.targetCanvas,h=c.getContext("2d"),a=u.destinationWidth,r=u.destinationHeight,n=a*r*4,s=new Uint8Array(this.imageBuffer,0,n),f=new Uint8ClampedArray(this.imageBuffer,0,n);v.readPixels(0,0,a,r,v.RGBA,v.UNSIGNED_BYTE,s);var o=new ImageData(f,a,r);h.putImageData(o,0,0)}(function(){var v=function(){};m.Canvas2dFilterBackend=u;function u(){}u.prototype={evictCachesForKey:v,dispose:v,clearWebGLCaches:v,resources:{},applyFilters:function(c,h,a,r,n){var s=n.getContext("2d");s.drawImage(h,0,0,a,r);var f=s.getImageData(0,0,a,r),o=s.getImageData(0,0,a,r),d={sourceWidth:a,sourceHeight:r,imageData:f,originalEl:h,originalImageData:o,canvasEl:n,ctx:s,filterBackend:this};return c.forEach(function(p){p.applyTo(d)}),(d.imageData.width!==a||d.imageData.height!==r)&&(n.width=d.imageData.width,n.height=d.imageData.height),s.putImageData(d.imageData,0,0),d}}})(),m.Image=m.Image||{},m.Image.filters=m.Image.filters||{},m.Image.filters.BaseFilter=m.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(v){v&&this.setOptions(v)},setOptions:function(v){for(var u in v)this[u]=v[u]},createProgram:function(v,u,c){u=u||this.fragmentSource,c=c||this.vertexSource,m.webGlPrecision!=="highp"&&(u=u.replace(/precision highp float/g,"precision "+m.webGlPrecision+" float"));var h=v.createShader(v.VERTEX_SHADER);if(v.shaderSource(h,c),v.compileShader(h),!v.getShaderParameter(h,v.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+v.getShaderInfoLog(h));var a=v.createShader(v.FRAGMENT_SHADER);if(v.shaderSource(a,u),v.compileShader(a),!v.getShaderParameter(a,v.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+v.getShaderInfoLog(a));var r=v.createProgram();if(v.attachShader(r,h),v.attachShader(r,a),v.linkProgram(r),!v.getProgramParameter(r,v.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+v.getProgramInfoLog(r));var n=this.getAttributeLocations(v,r),s=this.getUniformLocations(v,r)||{};return s.uStepW=v.getUniformLocation(r,"uStepW"),s.uStepH=v.getUniformLocation(r,"uStepH"),{program:r,attributeLocations:n,uniformLocations:s}},getAttributeLocations:function(v,u){return{aPosition:v.getAttribLocation(u,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(v,u,c){var h=u.aPosition,a=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,a),v.enableVertexAttribArray(h),v.vertexAttribPointer(h,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,c,v.STATIC_DRAW)},_setupFrameBuffer:function(v){var u=v.context,c,h;v.passes>1?(c=v.destinationWidth,h=v.destinationHeight,(v.sourceWidth!==c||v.sourceHeight!==h)&&(u.deleteTexture(v.targetTexture),v.targetTexture=v.filterBackend.createTexture(u,c,h)),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,v.targetTexture,0)):(u.bindFramebuffer(u.FRAMEBUFFER,null),u.finish())},_swapTextures:function(v){v.passes--,v.pass++;var u=v.targetTexture;v.targetTexture=v.sourceTexture,v.sourceTexture=u},isNeutralState:function(){var v=this.mainParameter,u=m.Image.filters[this.type].prototype;if(v)if(Array.isArray(u[v])){for(var c=u[v].length;c--;)if(this[v][c]!==u[v][c])return!1;return!0}else return u[v]===this[v];else return!1},applyTo:function(v){v.webgl?(this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v)):this.applyTo2d(v)},retrieveShader:function(v){return v.programCache.hasOwnProperty(this.type)||(v.programCache[this.type]=this.createProgram(v.context)),v.programCache[this.type]},applyToWebGL:function(v){var u=v.context,c=this.retrieveShader(v);v.pass===0&&v.originalTexture?u.bindTexture(u.TEXTURE_2D,v.originalTexture):u.bindTexture(u.TEXTURE_2D,v.sourceTexture),u.useProgram(c.program),this.sendAttributeData(u,c.attributeLocations,v.aPosition),u.uniform1f(c.uniformLocations.uStepW,1/v.sourceWidth),u.uniform1f(c.uniformLocations.uStepH,1/v.sourceHeight),this.sendUniformData(u,c.uniformLocations),u.viewport(0,0,v.destinationWidth,v.destinationHeight),u.drawArrays(u.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(v,u,c){v.activeTexture(c),v.bindTexture(v.TEXTURE_2D,u),v.activeTexture(v.TEXTURE0)},unbindAdditionalTexture:function(v,u){v.activeTexture(u),v.bindTexture(v.TEXTURE_2D,null),v.activeTexture(v.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(v){this[this.mainParameter]=v},sendUniformData:function(){},createHelpLayer:function(v){if(!v.helpLayer){var u=document.createElement("canvas");u.width=v.sourceWidth,u.height=v.sourceHeight,v.helpLayer=u}},toObject:function(){var v={type:this.type},u=this.mainParameter;return u&&(v[u]=this[u]),v},toJSON:function(){return this.toObject()}}),m.Image.filters.BaseFilter.fromObject=function(v,u){var c=new m.Image.filters[v.type](v);return u&&u(c),c},function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.ColorMatrix=h(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var r=a.imageData,n=r.data,s=n.length,f=this.matrix,o,d,p,_,S,C=this.colorsOnly;for(S=0;S<s;S+=4)o=n[S],d=n[S+1],p=n[S+2],C?(n[S]=o*f[0]+d*f[1]+p*f[2]+f[4]*255,n[S+1]=o*f[5]+d*f[6]+p*f[7]+f[9]*255,n[S+2]=o*f[10]+d*f[11]+p*f[12]+f[14]*255):(_=n[S+3],n[S]=o*f[0]+d*f[1]+p*f[2]+_*f[3]+f[4]*255,n[S+1]=o*f[5]+d*f[6]+p*f[7]+_*f[8]+f[9]*255,n[S+2]=o*f[10]+d*f[11]+p*f[12]+_*f[13]+f[14]*255,n[S+3]=o*f[15]+d*f[16]+p*f[17]+_*f[18]+f[19]*255)},getUniformLocations:function(a,r){return{uColorMatrix:a.getUniformLocation(r,"uColorMatrix"),uConstants:a.getUniformLocation(r,"uConstants")}},sendUniformData:function(a,r){var n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],f=[n[4],n[9],n[14],n[19]];a.uniformMatrix4fv(r.uColorMatrix,!1,s),a.uniform4fv(r.uConstants,f)}}),u.Image.filters.ColorMatrix.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Brightness=h(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var r=a.imageData,n=r.data,s,f=n.length,o=Math.round(this.brightness*255);for(s=0;s<f;s+=4)n[s]=n[s]+o,n[s+1]=n[s+1]+o,n[s+2]=n[s+2]+o}},getUniformLocations:function(a,r){return{uBrightness:a.getUniformLocation(r,"uBrightness")}},sendUniformData:function(a,r){a.uniform1f(r.uBrightness,this.brightness)}}),u.Image.filters.Brightness.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.Image.filters,a=u.util.createClass;h.Convolute=a(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(r){var n=Math.sqrt(this.matrix.length),s=this.type+"_"+n+"_"+(this.opaque?1:0),f=this.fragmentSource[s];return r.programCache.hasOwnProperty(s)||(r.programCache[s]=this.createProgram(r.context,f)),r.programCache[s]},applyTo2d:function(r){var n=r.imageData,s=n.data,f=this.matrix,o=Math.round(Math.sqrt(f.length)),d=Math.floor(o/2),p=n.width,_=n.height,S=r.ctx.createImageData(p,_),C=S.data,O=this.opaque?1:0,k,P,H,K,ct,mt,pt,vt,gt,z,X,G,x;for(X=0;X<_;X++)for(z=0;z<p;z++){for(ct=(X*p+z)*4,k=0,P=0,H=0,K=0,x=0;x<o;x++)for(G=0;G<o;G++)pt=X+x-d,mt=z+G-d,!(pt<0||pt>=_||mt<0||mt>=p)&&(vt=(pt*p+mt)*4,gt=f[x*o+G],k+=s[vt]*gt,P+=s[vt+1]*gt,H+=s[vt+2]*gt,O||(K+=s[vt+3]*gt));C[ct]=k,C[ct+1]=P,C[ct+2]=H,O?C[ct+3]=s[ct+3]:C[ct+3]=K}r.imageData=S},getUniformLocations:function(r,n){return{uMatrix:r.getUniformLocation(n,"uMatrix"),uOpaque:r.getUniformLocation(n,"uOpaque"),uHalfSize:r.getUniformLocation(n,"uHalfSize"),uSize:r.getUniformLocation(n,"uSize")}},sendUniformData:function(r,n){r.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),u.Image.filters.Convolute.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Grayscale=h(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var r=a.imageData,n=r.data,s,f=n.length,o,d=this.mode;for(s=0;s<f;s+=4)d==="average"?o=(n[s]+n[s+1]+n[s+2])/3:d==="lightness"?o=(Math.min(n[s],n[s+1],n[s+2])+Math.max(n[s],n[s+1],n[s+2]))/2:d==="luminosity"&&(o=.21*n[s]+.72*n[s+1]+.07*n[s+2]),n[s]=o,n[s+1]=o,n[s+2]=o},retrieveShader:function(a){var r=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(r)){var n=this.fragmentSource[this.mode];a.programCache[r]=this.createProgram(a.context,n)}return a.programCache[r]},getUniformLocations:function(a,r){return{uMode:a.getUniformLocation(r,"uMode")}},sendUniformData:function(a,r){var n=1;a.uniform1i(r.uMode,n)},isNeutralState:function(){return!1}}),u.Image.filters.Grayscale.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Invert=h(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var r=a.imageData,n=r.data,s,f=n.length;for(s=0;s<f;s+=4)n[s]=255-n[s],n[s+1]=255-n[s+1],n[s+2]=255-n[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,r){return{uInvert:a.getUniformLocation(r,"uInvert")}},sendUniformData:function(a,r){a.uniform1i(r.uInvert,this.invert)}}),u.Image.filters.Invert.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.Image.filters,a=u.util.createClass;h.Noise=a(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(r){if(this.noise!==0){var n=r.imageData,s=n.data,f,o=s.length,d=this.noise,p;for(f=0,o=s.length;f<o;f+=4)p=(.5-Math.random())*d,s[f]+=p,s[f+1]+=p,s[f+2]+=p}},getUniformLocations:function(r,n){return{uNoise:r.getUniformLocation(n,"uNoise"),uSeed:r.getUniformLocation(n,"uSeed")}},sendUniformData:function(r,n){r.uniform1f(n.uNoise,this.noise/255),r.uniform1f(n.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),u.Image.filters.Noise.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Pixelate=h(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var r=a.imageData,n=r.data,s=r.height,f=r.width,o,d,p,_,S,C,O,k,P,H,K;for(d=0;d<s;d+=this.blocksize)for(p=0;p<f;p+=this.blocksize)for(o=d*4*f+p*4,_=n[o],S=n[o+1],C=n[o+2],O=n[o+3],H=Math.min(d+this.blocksize,s),K=Math.min(p+this.blocksize,f),k=d;k<H;k++)for(P=p;P<K;P++)o=k*4*f+P*4,n[o]=_,n[o+1]=S,n[o+2]=C,n[o+3]=O},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,r){return{uBlocksize:a.getUniformLocation(r,"uBlocksize"),uStepW:a.getUniformLocation(r,"uStepW"),uStepH:a.getUniformLocation(r,"uStepH")}},sendUniformData:function(a,r){a.uniform1f(r.uBlocksize,this.blocksize)}}),u.Image.filters.Pixelate.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.extend,h=u.Image.filters,a=u.util.createClass;h.RemoveColor=a(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(r){var n=r.imageData,s=n.data,f,o=this.distance*255,d,p,_,S=new u.Color(this.color).getSource(),C=[S[0]-o,S[1]-o,S[2]-o],O=[S[0]+o,S[1]+o,S[2]+o];for(f=0;f<s.length;f+=4)d=s[f],p=s[f+1],_=s[f+2],d>C[0]&&p>C[1]&&_>C[2]&&d<O[0]&&p<O[1]&&_<O[2]&&(s[f+3]=0)},getUniformLocations:function(r,n){return{uLow:r.getUniformLocation(n,"uLow"),uHigh:r.getUniformLocation(n,"uHigh")}},sendUniformData:function(r,n){var s=new u.Color(this.color).getSource(),f=parseFloat(this.distance),o=[0+s[0]/255-f,0+s[1]/255-f,0+s[2]/255-f,1],d=[s[0]/255+f,s[1]/255+f,s[2]/255+f,1];r.uniform4fv(n.uLow,o),r.uniform4fv(n.uHigh,d)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),u.Image.filters.RemoveColor.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in a)c[r]=h(c.ColorMatrix,{type:r,matrix:a[r],mainParameter:!1,colorsOnly:!0}),u.Image.filters[r].fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric,c=u.Image.filters,h=u.util.createClass;c.BlendColor=h(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var r=this.type+"_"+this.mode,n;return a.programCache.hasOwnProperty(r)||(n=this.buildSource(this.mode),a.programCache[r]=this.createProgram(a.context,n)),a.programCache[r]},applyTo2d:function(a){var r=a.imageData,n=r.data,s=n.length,f,o,d,p,_,S,C,O=1-this.alpha;C=new u.Color(this.color).getSource(),f=C[0]*this.alpha,o=C[1]*this.alpha,d=C[2]*this.alpha;for(var k=0;k<s;k+=4)switch(p=n[k],_=n[k+1],S=n[k+2],this.mode){case"multiply":n[k]=p*f/255,n[k+1]=_*o/255,n[k+2]=S*d/255;break;case"screen":n[k]=255-(255-p)*(255-f)/255,n[k+1]=255-(255-_)*(255-o)/255,n[k+2]=255-(255-S)*(255-d)/255;break;case"add":n[k]=p+f,n[k+1]=_+o,n[k+2]=S+d;break;case"diff":case"difference":n[k]=Math.abs(p-f),n[k+1]=Math.abs(_-o),n[k+2]=Math.abs(S-d);break;case"subtract":n[k]=p-f,n[k+1]=_-o,n[k+2]=S-d;break;case"darken":n[k]=Math.min(p,f),n[k+1]=Math.min(_,o),n[k+2]=Math.min(S,d);break;case"lighten":n[k]=Math.max(p,f),n[k+1]=Math.max(_,o),n[k+2]=Math.max(S,d);break;case"overlay":n[k]=f<128?2*p*f/255:255-2*(255-p)*(255-f)/255,n[k+1]=o<128?2*_*o/255:255-2*(255-_)*(255-o)/255,n[k+2]=d<128?2*S*d/255:255-2*(255-S)*(255-d)/255;break;case"exclusion":n[k]=f+p-2*f*p/255,n[k+1]=o+_-2*o*_/255,n[k+2]=d+S-2*d*S/255;break;case"tint":n[k]=f+p*O,n[k+1]=o+_*O,n[k+2]=d+S*O}},getUniformLocations:function(a,r){return{uColor:a.getUniformLocation(r,"uColor")}},sendUniformData:function(a,r){var n=new u.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,a.uniform4fv(r.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendColor.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric,c=u.Image.filters,h=u.util.createClass;c.BlendImage=h(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var r=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(r)||(a.programCache[r]=this.createProgram(a.context,n)),a.programCache[r]},applyToWebGL:function(a){var r=a.context,n=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(r,n,r.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(r,r.TEXTURE1)},createTexture:function(a,r){return a.getCachedTexture(r.cacheKey,r._element)},calculateMatrix:function(){var a=this.image,r=a._element.width,n=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/r,-a.top/n,1]},applyTo2d:function(a){var r=a.imageData,n=a.filterBackend.resources,s=r.data,f=s.length,o=r.width,d=r.height,p,_,S,C,O,k,P,H,K,ct,mt=this.image,pt;n.blendImage||(n.blendImage=u.util.createCanvasElement()),K=n.blendImage,ct=K.getContext("2d"),K.width!==o||K.height!==d?(K.width=o,K.height=d):ct.clearRect(0,0,o,d),ct.setTransform(mt.scaleX,0,0,mt.scaleY,mt.left,mt.top),ct.drawImage(mt._element,0,0,o,d),pt=ct.getImageData(0,0,o,d).data;for(var vt=0;vt<f;vt+=4)switch(O=s[vt],k=s[vt+1],P=s[vt+2],H=s[vt+3],p=pt[vt],_=pt[vt+1],S=pt[vt+2],C=pt[vt+3],this.mode){case"multiply":s[vt]=O*p/255,s[vt+1]=k*_/255,s[vt+2]=P*S/255,s[vt+3]=H*C/255;break;case"mask":s[vt+3]=C;break}},getUniformLocations:function(a,r){return{uTransformMatrix:a.getUniformLocation(r,"uTransformMatrix"),uImage:a.getUniformLocation(r,"uImage")}},sendUniformData:function(a,r){var n=this.calculateMatrix();a.uniform1i(r.uImage,1),a.uniformMatrix3fv(r.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendImage.fromObject=function(a,r){u.Image.fromObject(a.image,function(n){var s=u.util.object.clone(a);s.image=n,r(new u.Image.filters.BlendImage(s))})}}(M),function(v){var u=v.fabric||(v.fabric={}),c=Math.pow,h=Math.floor,a=Math.sqrt,r=Math.abs,n=Math.round,s=Math.sin,f=Math.ceil,o=u.Image.filters,d=u.util.createClass;o.Resize=d(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(p,_){return{uDelta:p.getUniformLocation(_,"uDelta"),uTaps:p.getUniformLocation(_,"uTaps")}},sendUniformData:function(p,_){p.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),p.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(p){var _=this.getFilterWindow(),S=this.type+"_"+_;if(!p.programCache.hasOwnProperty(S)){var C=this.generateShader(_);p.programCache[S]=this.createProgram(p.context,C)}return p.programCache[S]},getFilterWindow:function(){var p=this.tempScale;return Math.ceil(this.lanczosLobes/p)},getTaps:function(){for(var p=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,S=this.getFilterWindow(),C=new Array(S),O=1;O<=S;O++)C[O-1]=p(O*_);return C},generateShader:function(C){for(var _=new Array(C),S=this.fragmentSourceTOP,C,O=1;O<=C;O++)_[O-1]=O+".0 * uDelta";return S+="uniform float uTaps["+C+`];
`,S+=`void main() {
`,S+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,S+=`  float sum = 1.0;
`,_.forEach(function(k,P){S+="  color += texture2D(uTexture, vTexCoord + "+k+") * uTaps["+P+`];
`,S+="  color += texture2D(uTexture, vTexCoord - "+k+") * uTaps["+P+`];
`,S+="  sum += 2.0 * uTaps["+P+`];
`}),S+=`  gl_FragColor = color / sum;
`,S+="}",S},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(p){p.webgl?(p.passes++,this.width=p.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=p.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),p.destinationWidth=this.dW,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceWidth=p.destinationWidth,this.height=p.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),p.destinationHeight=this.dH,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceHeight=p.destinationHeight):this.applyTo2d(p)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(p){return function(_){if(_>=p||_<=-p)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var S=_/p;return s(_)/_*s(S)/S}},applyTo2d:function(p){var _=p.imageData,S=this.scaleX,C=this.scaleY;this.rcpScaleX=1/S,this.rcpScaleY=1/C;var O=_.width,k=_.height,P=n(O*S),H=n(k*C),K;this.resizeType==="sliceHack"?K=this.sliceByTwo(p,O,k,P,H):this.resizeType==="hermite"?K=this.hermiteFastResize(p,O,k,P,H):this.resizeType==="bilinear"?K=this.bilinearFiltering(p,O,k,P,H):this.resizeType==="lanczos"&&(K=this.lanczosResize(p,O,k,P,H)),p.imageData=K},sliceByTwo:function(p,_,S,C,O){var k=p.imageData,P=.5,H=!1,K=!1,ct=_*P,mt=S*P,pt=u.filterBackend.resources,vt,gt,z=0,X=0,G=_,x=0;for(pt.sliceByTwo||(pt.sliceByTwo=document.createElement("canvas")),vt=pt.sliceByTwo,(vt.width<_*1.5||vt.height<S)&&(vt.width=_*1.5,vt.height=S),gt=vt.getContext("2d"),gt.clearRect(0,0,_*1.5,S),gt.putImageData(k,0,0),C=h(C),O=h(O);!H||!K;)_=ct,S=mt,C<h(ct*P)?ct=h(ct*P):(ct=C,H=!0),O<h(mt*P)?mt=h(mt*P):(mt=O,K=!0),gt.drawImage(vt,z,X,_,S,G,x,ct,mt),z=G,X=x,x+=mt;return gt.getImageData(z,X,C,O)},lanczosResize:function(p,_,S,C,O){function k(E){var R,U,D,w,B,F,Z,I,et,ft,yt;for(x.x=(E+.5)*mt,b.x=h(x.x),R=0;R<O;R++){for(x.y=(R+.5)*pt,b.y=h(x.y),B=0,F=0,Z=0,I=0,et=0,U=b.x-z;U<=b.x+z;U++)if(!(U<0||U>=_)){ft=h(1e3*r(U-x.x)),G[ft]||(G[ft]={});for(var $=b.y-X;$<=b.y+X;$++)$<0||$>=S||(yt=h(1e3*r($-x.y)),G[ft][yt]||(G[ft][yt]=ct(a(c(ft*vt,2)+c(yt*gt,2))/1e3)),D=G[ft][yt],D>0&&(w=($*_+U)*4,B+=D,F+=D*P[w],Z+=D*P[w+1],I+=D*P[w+2],et+=D*P[w+3]))}w=(R*C+E)*4,K[w]=F/B,K[w+1]=Z/B,K[w+2]=I/B,K[w+3]=et/B}return++E<C?k(E):H}var P=p.imageData.data,H=p.ctx.createImageData(C,O),K=H.data,ct=this.lanczosCreate(this.lanczosLobes),mt=this.rcpScaleX,pt=this.rcpScaleY,vt=2/this.rcpScaleX,gt=2/this.rcpScaleY,z=f(mt*this.lanczosLobes/2),X=f(pt*this.lanczosLobes/2),G={},x={},b={};return k(0)},bilinearFiltering:function(p,_,S,C,O){var k,P,H,K,ct,mt,pt,vt,gt,z,X,G,x=0,b,E=this.rcpScaleX,R=this.rcpScaleY,U=4*(_-1),D=p.imageData,w=D.data,B=p.ctx.createImageData(C,O),F=B.data;for(pt=0;pt<O;pt++)for(vt=0;vt<C;vt++)for(ct=h(E*vt),mt=h(R*pt),gt=E*vt-ct,z=R*pt-mt,b=4*(mt*_+ct),X=0;X<4;X++)k=w[b+X],P=w[b+4+X],H=w[b+U+X],K=w[b+U+4+X],G=k*(1-gt)*(1-z)+P*gt*(1-z)+H*z*(1-gt)+K*gt*z,F[x++]=G;return B},hermiteFastResize:function(p,_,S,C,O){for(var k=this.rcpScaleX,P=this.rcpScaleY,H=f(k/2),K=f(P/2),ct=p.imageData,mt=ct.data,pt=p.ctx.createImageData(C,O),vt=pt.data,gt=0;gt<O;gt++)for(var z=0;z<C;z++){for(var X=(z+gt*C)*4,G=0,x=0,b=0,E=0,R=0,U=0,D=0,w=(gt+.5)*P,B=h(gt*P);B<(gt+1)*P;B++)for(var F=r(w-(B+.5))/K,Z=(z+.5)*k,I=F*F,et=h(z*k);et<(z+1)*k;et++){var ft=r(Z-(et+.5))/H,yt=a(I+ft*ft);yt>1&&yt<-1||(G=2*yt*yt*yt-3*yt*yt+1,G>0&&(ft=4*(et+B*_),D+=G*mt[ft+3],b+=G,mt[ft+3]<255&&(G=G*mt[ft+3]/250),E+=G*mt[ft],R+=G*mt[ft+1],U+=G*mt[ft+2],x+=G))}vt[X]=E/x,vt[X+1]=R/x,vt[X+2]=U/x,vt[X+3]=D/b}return pt},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),u.Image.filters.Resize.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Contrast=h(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var r=a.imageData,n,f,s=r.data,f=s.length,o=Math.floor(this.contrast*255),d=259*(o+255)/(255*(259-o));for(n=0;n<f;n+=4)s[n]=d*(s[n]-128)+128,s[n+1]=d*(s[n+1]-128)+128,s[n+2]=d*(s[n+2]-128)+128}},getUniformLocations:function(a,r){return{uContrast:a.getUniformLocation(r,"uContrast")}},sendUniformData:function(a,r){a.uniform1f(r.uContrast,this.contrast)}}),u.Image.filters.Contrast.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Saturation=h(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var r=a.imageData,n=r.data,s=n.length,f=-this.saturation,o,d;for(o=0;o<s;o+=4)d=Math.max(n[o],n[o+1],n[o+2]),n[o]+=d!==n[o]?(d-n[o])*f:0,n[o+1]+=d!==n[o+1]?(d-n[o+1])*f:0,n[o+2]+=d!==n[o+2]?(d-n[o+2])*f:0}},getUniformLocations:function(a,r){return{uSaturation:a.getUniformLocation(r,"uSaturation")}},sendUniformData:function(a,r){a.uniform1f(r.uSaturation,-this.saturation)}}),u.Image.filters.Saturation.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Vibrance=h(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var r=a.imageData,n=r.data,s=n.length,f=-this.vibrance,o,d,p,_;for(o=0;o<s;o+=4)d=Math.max(n[o],n[o+1],n[o+2]),p=(n[o]+n[o+1]+n[o+2])/3,_=Math.abs(d-p)*2/255*f,n[o]+=d!==n[o]?(d-n[o])*_:0,n[o+1]+=d!==n[o+1]?(d-n[o+1])*_:0,n[o+2]+=d!==n[o+2]?(d-n[o+2])*_:0}},getUniformLocations:function(a,r){return{uVibrance:a.getUniformLocation(r,"uVibrance")}},sendUniformData:function(a,r){a.uniform1f(r.uVibrance,-this.vibrance)}}),u.Image.filters.Vibrance.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Blur=h(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var r=a.filterBackend.resources,n,s,f=a.imageData.width,o=a.imageData.height;r.blurLayer1||(r.blurLayer1=u.util.createCanvasElement(),r.blurLayer2=u.util.createCanvasElement()),n=r.blurLayer1,s=r.blurLayer2,(n.width!==f||n.height!==o)&&(s.width=n.width=f,s.height=n.height=o);var d=n.getContext("2d"),p=s.getContext("2d"),_=15,S,C,O,k,P=this.blur*.06*.5;for(d.putImageData(a.imageData,0,0),p.clearRect(0,0,f,o),k=-15;k<=_;k++)S=(Math.random()-.5)/4,C=k/_,O=P*C*f+S,p.globalAlpha=1-Math.abs(C),p.drawImage(n,O,S),d.drawImage(s,0,0),p.globalAlpha=1,p.clearRect(0,0,s.width,s.height);for(k=-15;k<=_;k++)S=(Math.random()-.5)/4,C=k/_,O=P*C*o+S,p.globalAlpha=1-Math.abs(C),p.drawImage(n,S,O),d.drawImage(s,0,0),p.globalAlpha=1,p.clearRect(0,0,s.width,s.height);a.ctx.drawImage(n,0,0);var H=a.ctx.getImageData(0,0,n.width,n.height);return d.globalAlpha=1,d.clearRect(0,0,n.width,n.height),H},getUniformLocations:function(a,r){return{delta:a.getUniformLocation(r,"uDelta")}},sendUniformData:function(a,r){var n=this.chooseRightDelta();a.uniform2fv(r.delta,n)},chooseRightDelta:function(){var a=1,r=[0,0],n;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),n=a*this.blur*.12,this.horizontal?r[0]=n:r[1]=n,r}}),c.Blur.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Gamma=h(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var r=a.imageData,n=r.data,s=this.gamma,f=n.length,o=1/s[0],d=1/s[1],p=1/s[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,f=256;_<f;_++)this.rVals[_]=Math.pow(_/255,o)*255,this.gVals[_]=Math.pow(_/255,d)*255,this.bVals[_]=Math.pow(_/255,p)*255;for(_=0,f=n.length;_<f;_+=4)n[_]=this.rVals[n[_]],n[_+1]=this.gVals[n[_+1]],n[_+2]=this.bVals[n[_+2]]},getUniformLocations:function(a,r){return{uGamma:a.getUniformLocation(r,"uGamma")}},sendUniformData:function(a,r){a.uniform3fv(r.uGamma,this.gamma)}}),u.Image.filters.Gamma.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.Composed=h(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(r){r.applyTo(a)})},toObject:function(){return u.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),u.Image.filters.Composed.fromObject=function(a,r){var n=a.subFilters||[],s=n.map(function(o){return new u.Image.filters[o.type](o)}),f=new u.Image.filters.Composed({subFilters:s});return r&&r(f),f}}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.Image.filters,h=u.util.createClass;c.HueRotation=h(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,r=u.util.cos(a),n=u.util.sin(a),s=1/3,f=Math.sqrt(s)*n,o=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+o/3,this.matrix[1]=s*o-f,this.matrix[2]=s*o+f,this.matrix[5]=s*o+f,this.matrix[6]=r+s*o,this.matrix[7]=s*o-f,this.matrix[10]=s*o-f,this.matrix[11]=s*o+f,this.matrix[12]=r+s*o},isNeutralState:function(a){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,a)}}),u.Image.filters.HueRotation.fromObject=u.Image.filters.BaseFilter.fromObject}(M),function(v){var u=v.fabric||(v.fabric={}),c=u.util.object.clone;if(u.Text){u.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");u.Text=u.util.createClass(u.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:u.Object.prototype.stateProperties.concat(h),cacheProperties:u.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,r){this.styles=r?r.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",r),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=u.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return u._measuringContext||(u._measuringContext=this.canvas&&this.canvas.contextCache||u.util.createCanvasElement().getContext("2d")),u._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var a=this.getHeightOfLine(0)*1.1;this.width=this.path.width+a,this.height=this.path.height+a}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var a,r,n,s,f,o,d,p=0,_=this._textLines.length;p<_;p++)if(!(this.textAlign!=="justify"&&(p===_-1||this.isEndOfWrapping(p)))&&(s=0,f=this._textLines[p],r=this.getLineWidth(p),r<this.width&&(d=this.textLines[p].match(this._reSpacesAndTabs)))){n=d.length,a=(this.width-r)/n;for(var S=0,C=f.length;S<=C;S++)o=this.__charBounds[p][S],this._reSpaceAndTab.test(f[S])?(o.width+=a,o.kernedWidth+=a,o.left+=s,s+=a):o.left+=s}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),r=this.fontSize;return a.width+=r*a.zoomX,a.height+=r*a.zoomY,a},_render:function(a){var r=this.path;r&&!r.isNotVisible()&&r._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,r,n){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(r,n)},calcTextWidth:function(){for(var a=this.getLineWidth(0),r=1,n=this._textLines.length;r<n;r++){var s=this.getLineWidth(r);s>a&&(a=s)}return a},_renderTextLine:function(a,r,n,s,f,o){this._renderChars(a,r,n,s,f,o)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var r,n,s=a.fillStyle,f,o,d=this._getLeftOffset(),p=this._getTopOffset(),_=0,S=0,C,O,k=this.path,P,H=0,K=this._textLines.length;H<K;H++){if(r=this.getHeightOfLine(H),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",H)){p+=r;continue}f=this._textLines[H],n=this._getLineLeftOffset(H),S=0,_=0,o=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var ct=0,mt=f.length;ct<mt;ct++)C=this.__charBounds[H][ct],O=this.getValueOfPropertyAt(H,ct,"textBackgroundColor"),k?(a.save(),a.translate(C.renderLeft,C.renderTop),a.rotate(C.angle),a.fillStyle=O,O&&a.fillRect(-C.width/2,-r/this.lineHeight*(1-this._fontSizeFraction),C.width,r/this.lineHeight),a.restore()):O!==o?(P=d+n+_,this.direction==="rtl"&&(P=this.width-P-S),a.fillStyle=o,o&&a.fillRect(P,p,S,r/this.lineHeight),_=C.left,S=C.width,o=O):S+=C.kernedWidth;O&&!k&&(P=d+n+_,this.direction==="rtl"&&(P=this.width-P-S),a.fillStyle=O,a.fillRect(P,p,S,r/this.lineHeight)),p+=r}a.fillStyle=s,this._removeShadow(a)}},getFontCache:function(a){var r=a.fontFamily.toLowerCase();u.charWidthsCache[r]||(u.charWidthsCache[r]={});var n=u.charWidthsCache[r],s=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return n[s]||(n[s]={}),n[s]},_measureChar:function(a,r,n,s){var f=this.getFontCache(r),o=this._getFontDeclaration(r),d=this._getFontDeclaration(s),p=n+a,_=o===d,S,C,O,k=r.fontSize/this.CACHE_FONT_SIZE,P;if(n&&f[n]!==void 0&&(O=f[n]),f[a]!==void 0&&(P=S=f[a]),_&&f[p]!==void 0&&(C=f[p],P=C-O),S===void 0||O===void 0||C===void 0){var H=this.getMeasuringContext();this._setTextStyles(H,r,!0)}return S===void 0&&(P=S=H.measureText(a).width,f[a]=S),O===void 0&&_&&n&&(O=H.measureText(n).width,f[n]=O),_&&C===void 0&&(C=H.measureText(p).width,f[p]=C,P=C-O),{width:S*k,kernedWidth:P*k}},getHeightOfChar:function(a,r){return this.getValueOfPropertyAt(a,r,"fontSize")},measureLine:function(a){var r=this._measureLine(a);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r},_measureLine:function(a){var r=0,n,s,f=this._textLines[a],o,d,p=0,_=new Array(f.length),S=0,C,O,k=this.path,P=this.pathSide==="right";for(this.__charBounds[a]=_,n=0;n<f.length;n++)s=f[n],d=this._getGraphemeBox(s,a,n,o),_[n]=d,r+=d.kernedWidth,o=s;if(_[n]={left:d?d.left+d.width:0,width:0,kernedWidth:0,height:this.fontSize},k){switch(O=k.segmentsInfo[k.segmentsInfo.length-1].length,C=u.util.getPointOnPath(k.path,0,k.segmentsInfo),C.x+=k.pathOffset.x,C.y+=k.pathOffset.y,this.textAlign){case"left":S=P?O-r:0;break;case"center":S=(O-r)/2;break;case"right":S=P?0:O-r;break}for(S+=this.pathStartOffset*(P?-1:1),n=P?f.length-1:0;P?n>=0:n<f.length;P?n--:n++)d=_[n],S>O?S%=O:S<0&&(S+=O),this._setGraphemeOnPath(S,d,C),S+=d.kernedWidth}return{width:r,numOfSpaces:p}},_setGraphemeOnPath:function(a,r,n){var s=a+r.kernedWidth/2,f=this.path,o=u.util.getPointOnPath(f.path,s,f.segmentsInfo);r.renderLeft=o.x-n.x,r.renderTop=o.y-n.y,r.angle=o.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,r,n,s,f){var o=this.getCompleteStyleDeclaration(r,n),d=s?this.getCompleteStyleDeclaration(r,n-1):{},p=this._measureChar(a,o,s,d),_=p.kernedWidth,S=p.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),S+=C,_+=C);var O={width:S,left:0,height:o.fontSize,kernedWidth:_,deltaY:o.deltaY};if(n>0&&!f){var k=this.__charBounds[r][n-1];O.left=k.left+k.width+p.kernedWidth-p.width}return O},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var r=this._textLines[a],n=this.getHeightOfChar(a,0),s=1,f=r.length;s<f;s++)n=Math.max(this.getHeightOfChar(a,s),n);return this.__lineHeights[a]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,r=0,n=0,s=this._textLines.length;n<s;n++)a=this.getHeightOfLine(n),r+=n===s-1?a/this.lineHeight:a;return r},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,r){a.save();for(var n=0,s=this._getLeftOffset(),f=this._getTopOffset(),o=0,d=this._textLines.length;o<d;o++){var p=this.getHeightOfLine(o),_=p/this.lineHeight,S=this._getLineLeftOffset(o);this._renderTextLine(r,a,this._textLines[o],s+S,f+n+_,o),n+=p}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,r,n,s,f,o){var d=this.getHeightOfLine(o),p=this.textAlign.indexOf("justify")!==-1,_,S,C="",O,k=0,P,H=this.path,K=!p&&this.charSpacing===0&&this.isEmptyStyles(o)&&!H,ct=this.direction==="ltr",mt=this.direction==="ltr"?1:-1,pt,vt=r.canvas.getAttribute("dir");if(r.save(),vt!==this.direction&&(r.canvas.setAttribute("dir",ct?"ltr":"rtl"),r.direction=ct?"ltr":"rtl",r.textAlign=ct?"left":"right"),f-=d*this._fontSizeFraction/this.lineHeight,K){this._renderChar(a,r,o,0,n.join(""),s,f,d),r.restore();return}for(var gt=0,z=n.length-1;gt<=z;gt++)P=gt===z||this.charSpacing||H,C+=n[gt],O=this.__charBounds[o][gt],k===0?(s+=mt*(O.kernedWidth-O.width),k+=O.width):k+=O.kernedWidth,p&&!P&&this._reSpaceAndTab.test(n[gt])&&(P=!0),P||(_=_||this.getCompleteStyleDeclaration(o,gt),S=this.getCompleteStyleDeclaration(o,gt+1),P=u.util.hasStyleChanged(_,S,!1)),P&&(H?(r.save(),r.translate(O.renderLeft,O.renderTop),r.rotate(O.angle),this._renderChar(a,r,o,gt,C,-k/2,0,d),r.restore()):(pt=s,this._renderChar(a,r,o,gt,C,pt,f,d)),C="",_=S,s+=mt*k,k=0);r.restore()},_applyPatternGradientTransformText:function(a){var r=u.util.createCanvasElement(),n,s=this.width+this.strokeWidth,f=this.height+this.strokeWidth;return r.width=s,r.height=f,n=r.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,f),n.lineTo(0,f),n.closePath(),n.translate(s/2,f/2),n.fillStyle=a.toLive(n),this._applyPatternGradientTransform(n,a),n.fill(),n.createPattern(r,"no-repeat")},handleFiller:function(a,r,n){var s,f;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,f=-this.height/2,a.translate(s,f),a[r]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:f}):(a[r]=n.toLive(a,this),this._applyPatternGradientTransform(a,n)):(a[r]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,r){return a.lineWidth=r.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",r.stroke)},_setFillStyles:function(a,r){return this.handleFiller(a,"fillStyle",r.fill)},_renderChar:function(a,r,n,s,f,o,d){var p=this._getStyleDeclaration(n,s),_=this.getCompleteStyleDeclaration(n,s),S=a==="fillText"&&_.fill,C=a==="strokeText"&&_.stroke&&_.strokeWidth,O,k;!C&&!S||(r.save(),S&&(O=this._setFillStyles(r,_)),C&&(k=this._setStrokeStyles(r,_)),r.font=this._getFontDeclaration(_),p&&p.textBackgroundColor&&this._removeShadow(r),p&&p.deltaY&&(d+=p.deltaY),S&&r.fillText(f,o-O.offsetX,d-O.offsetY),C&&r.strokeText(f,o-k.offsetX,d-k.offsetY),r.restore())},setSuperscript:function(a,r){return this._setScript(a,r,this.superscript)},setSubscript:function(a,r){return this._setScript(a,r,this.subscript)},_setScript:function(a,r,n){var s=this.get2DCursorLocation(a,!0),f=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),d={fontSize:f*n.size,deltaY:o+f*n.baseline};return this.setSelectionStyles(d,a,r),this},_getLineLeftOffset:function(a){var r=this.getLineWidth(a),n=this.width-r,s=this.textAlign,f=this.direction,d,o=0,d=this.isEndOfWrapping(a);return s==="justify"||s==="justify-center"&&!d||s==="justify-right"&&!d||s==="justify-left"&&!d?0:(s==="center"&&(o=n/2),s==="right"&&(o=n),s==="justify-center"&&(o=n/2),s==="justify-right"&&(o=n),f==="rtl"&&(o-=n),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var r=this.measureLine(a),n=r.width;return this.__lineWidths[a]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,r,n){var s=this._getStyleDeclaration(a,r);return s&&typeof s[n]<"u"?s[n]:this[n]},_renderTextDecoration:function(a,r){if(!(!this[r]&&!this.styleHas(r))){a.save(),(r==="overline"||r==="linethrough")&&this._removeShadow(a);for(var n,s,f,o,d,p,_,S,C=this._getLeftOffset(),O=this._getTopOffset(),k,P,H,K,ct,mt,pt,vt,gt=this.path,z=this._getWidthOfCharSpacing(),X=this.offsets[r],G=0,x=this._textLines.length;G<x;G++){if(n=this.getHeightOfLine(G),!this[r]&&!this.styleHas(r,G)){O+=n;continue}_=this._textLines[G],mt=n/this.lineHeight,o=this._getLineLeftOffset(G),P=0,H=0,S=this.getValueOfPropertyAt(G,0,r),vt=this.getValueOfPropertyAt(G,0,"fill"),k=O+mt*(1-this._fontSizeFraction),s=this.getHeightOfChar(G,0),d=this.getValueOfPropertyAt(G,0,"deltaY");for(var b=0,E=_.length;b<E;b++)if(K=this.__charBounds[G][b],ct=this.getValueOfPropertyAt(G,b,r),pt=this.getValueOfPropertyAt(G,b,"fill"),f=this.getHeightOfChar(G,b),p=this.getValueOfPropertyAt(G,b,"deltaY"),gt&&ct&&pt)a.save(),a.fillStyle=vt,a.translate(K.renderLeft,K.renderTop),a.rotate(K.angle),a.fillRect(-K.kernedWidth/2,X*f+p,K.kernedWidth,this.fontSize/15),a.restore();else if((ct!==S||pt!==vt||f!==s||p!==d)&&H>0){var R=C+o+P;this.direction==="rtl"&&(R=this.width-R-H),S&&vt&&(a.fillStyle=vt,a.fillRect(R,k+X*s+d,H,this.fontSize/15)),P=K.left,H=K.width,S=ct,vt=pt,s=f,d=p}else H+=K.kernedWidth;var R=C+o+P;this.direction==="rtl"&&(R=this.width-R-H),a.fillStyle=pt,ct&&pt&&a.fillRect(R,k+X*s+d,H-z,this.fontSize/15),O+=n}a.restore()}},_getFontDeclaration:function(a,r){var n=a||this,s=this.fontFamily,f=u.Text.genericFonts.indexOf(s.toLowerCase())>-1,o=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||f?n.fontFamily:'"'+n.fontFamily+'"';return[u.isLikelyNode?n.fontWeight:n.fontStyle,u.isLikelyNode?n.fontStyle:n.fontWeight,r?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",o].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var r=a.split(this._reNewline),n=new Array(r.length),s=[`
`],f=[],o=0;o<r.length;o++)n[o]=u.util.string.graphemeSplit(r[o]),f=f.concat(n[o],s);return f.pop(),{_unwrappedLines:n,lines:r,graphemeText:f,graphemeLines:n}},toObject:function(a){var r=h.concat(a),n=this.callSuper("toObject",r);return n.styles=u.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(a,r){this.callSuper("set",a,r);var n=!1,s=!1;if(typeof a=="object")for(var f in a)f==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(f)!==-1,s=s||f==="path";else n=this._dimensionAffectingProps.indexOf(a)!==-1,s=a==="path";return s&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),u.Text.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),u.Text.DEFAULT_SVG_FONT_SIZE=16,u.Text.fromElement=function(a,r,n){if(!a)return r(null);var s=u.parseAttributes(a,u.Text.ATTRIBUTE_NAMES),f=s.textAnchor||"left";if(n=u.util.object.extend(n?c(n):{},s),n.top=n.top||0,n.left=n.left||0,s.textDecoration){var o=s.textDecoration;o.indexOf("underline")!==-1&&(n.underline=!0),o.indexOf("overline")!==-1&&(n.overline=!0),o.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in s&&(n.left+=s.dx),"dy"in s&&(n.top+=s.dy),"fontSize"in n||(n.fontSize=u.Text.DEFAULT_SVG_FONT_SIZE);var d="";"textContent"in a?d=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(d=a.firstChild.data),d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var p=n.strokeWidth;n.strokeWidth=0;var _=new u.Text(d,n),S=_.getScaledHeight()/_.height,C=(_.height+_.strokeWidth)*_.lineHeight-_.height,O=C*S,k=_.getScaledHeight()+O,P=0;f==="center"&&(P=_.getScaledWidth()/2),f==="right"&&(P=_.getScaledWidth()),_.set({left:_.left-P,top:_.top-(k-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof p<"u"?p:1}),r(_)},u.Text.fromObject=function(a,r){var n=c(a),s=a.path;return delete n.path,u.Object._fromObject("Text",n,function(f){f.styles=u.util.stylesFromArray(a.styles,a.text),s?u.Object._fromObject("Path",s,function(o){f.set("path",o),r(f)},"path"):r(f)},"text")},u.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],u.util.createAccessors&&u.util.createAccessors(u.Text)}(M),function(){m.util.object.extend(m.Text.prototype,{isEmptyStyles:function(v){if(!this.styles||typeof v<"u"&&!this.styles[v])return!0;var u=typeof v>"u"?this.styles:{line:this.styles[v]};for(var c in u)for(var h in u[c])for(var a in u[c][h])return!1;return!0},styleHas:function(v,u){if(!this.styles||!v||v===""||typeof u<"u"&&!this.styles[u])return!1;var c=typeof u>"u"?this.styles:{0:this.styles[u]};for(var h in c)for(var a in c[h])if(typeof c[h][a][v]<"u")return!0;return!1},cleanStyle:function(v){if(!this.styles||!v||v==="")return!1;var u=this.styles,c=0,h,a,r=!0,n=0,s;for(var f in u){h=0;for(var o in u[f]){var s=u[f][o],d=s.hasOwnProperty(v);c++,d?(a?s[v]!==a&&(r=!1):a=s[v],s[v]===this[v]&&delete s[v]):r=!1,Object.keys(s).length!==0?h++:delete u[f][o]}h===0&&delete u[f]}for(var p=0;p<this._textLines.length;p++)n+=this._textLines[p].length;r&&c===n&&(this[v]=a,this.removeStyle(v))},removeStyle:function(v){if(!(!this.styles||!v||v==="")){var u=this.styles,c,h,a;for(h in u){c=u[h];for(a in c)delete c[a][v],Object.keys(c[a]).length===0&&delete c[a];Object.keys(c).length===0&&delete u[h]}}},_extendStyles:function(v,u){var c=this.get2DCursorLocation(v);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),m.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),u)},get2DCursorLocation:function(v,u){typeof v>"u"&&(v=this.selectionStart);for(var c=u?this._unwrappedTextLines:this._textLines,h=c.length,a=0;a<h;a++){if(v<=c[a].length)return{lineIndex:a,charIndex:v};v-=c[a].length+this.missingNewlineOffset(a,u)}return{lineIndex:a-1,charIndex:c[a-1].length<v?c[a-1].length:v}},getSelectionStyles:function(v,u,c){typeof v>"u"&&(v=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||v);for(var h=[],a=v;a<u;a++)h.push(this.getStyleAtPosition(a,c));return h},getStyleAtPosition:function(v,u){var c=this.get2DCursorLocation(v),h=u?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return h||{}},setSelectionStyles:function(v,u,c){typeof u>"u"&&(u=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||u);for(var h=u;h<c;h++)this._extendStyles(h,v);return this._forceClearCache=!0,this},_getStyleDeclaration:function(v,u){var c=this.styles&&this.styles[v];return c?c[u]:null},getCompleteStyleDeclaration:function(v,u){for(var c=this._getStyleDeclaration(v,u)||{},h={},a,r=0;r<this._styleProperties.length;r++)a=this._styleProperties[r],h[a]=typeof c[a]>"u"?this[a]:c[a];return h},_setStyleDeclaration:function(v,u,c){this.styles[v][u]=c},_deleteStyleDeclaration:function(v,u){delete this.styles[v][u]},_getLineStyle:function(v){return!!this.styles[v]},_setLineStyle:function(v){this.styles[v]={}},_deleteLineStyle:function(v){delete this.styles[v]}})}(),function(){function v(u){u.textDecoration&&(u.textDecoration.indexOf("underline")>-1&&(u.underline=!0),u.textDecoration.indexOf("line-through")>-1&&(u.linethrough=!0),u.textDecoration.indexOf("overline")>-1&&(u.overline=!0),delete u.textDecoration)}m.IText=m.util.createClass(m.Text,m.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(u,c){this.callSuper("initialize",u,c),this.initBehavior()},setSelectionStart:function(u){u=Math.max(u,0),this._updateAndFire("selectionStart",u)},setSelectionEnd:function(u){u=Math.min(u,this.text.length),this._updateAndFire("selectionEnd",u)},_updateAndFire:function(u,c){this[u]!==c&&(this._fireSelectionChanged(),this[u]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(u){this.clearContextTop(),this.callSuper("render",u),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(u){this.callSuper("_render",u)},clearContextTop:function(u){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,h=this.canvas.viewportTransform;c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(c),this._clearTextArea(c),u||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(u,c):this.renderSelection(u,c),c.restore()}},_clearTextArea:function(u){var c=this.width+4,h=this.height+4;u.clearRect(-c/2,-h/2,c,h)},_getCursorBoundaries:function(u){typeof u>"u"&&(u=this.selectionStart);var c=this._getLeftOffset(),h=this._getTopOffset(),a=this._getCursorBoundariesOffsets(u);return{left:c,top:h,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(u){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,h,a,r=0,n=0,s,f=this.get2DCursorLocation(u);a=f.charIndex,h=f.lineIndex;for(var o=0;o<h;o++)r+=this.getHeightOfLine(o);c=this._getLineLeftOffset(h);var d=this.__charBounds[h][a];return d&&(n=d.left),this.charSpacing!==0&&a===this._textLines[h].length&&(n-=this._getWidthOfCharSpacing()),s={top:r,left:c+(n>0?n:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(u,c){var h=this.get2DCursorLocation(),a=h.lineIndex,r=h.charIndex>0?h.charIndex-1:0,n=this.getValueOfPropertyAt(a,r,"fontSize"),s=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/s,o=u.topOffset,d=this.getValueOfPropertyAt(a,r,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(u,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,r,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(u.left+u.leftOffset-f/2,o+u.top+d,f,n)},renderSelection:function(u,c){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(h),s=this.get2DCursorLocation(a),f=n.lineIndex,o=s.lineIndex,d=n.charIndex<0?0:n.charIndex,p=s.charIndex<0?0:s.charIndex,_=f;_<=o;_++){var S=this._getLineLeftOffset(_)||0,C=this.getHeightOfLine(_),O=0,k=0,P=0;if(_===f&&(k=this.__charBounds[f][d].left),_>=f&&_<o)P=r&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===o)if(p===0)P=this.__charBounds[o][p].left;else{var H=this._getWidthOfCharSpacing();P=this.__charBounds[o][p-1].left+this.__charBounds[o][p-1].width-H}O=C,(this.lineHeight<1||_===o&&this.lineHeight>1)&&(C/=this.lineHeight);var K=u.left+S+k,ct=P-k,mt=C,pt=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",mt=1,pt=C):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(K=this.width-K-ct),c.fillRect(K,u.top+u.topOffset+pt,ct,mt),u.topOffset+=O}},getCurrentCharFontSize:function(){var u=this._getCurrentCharIndex();return this.getValueOfPropertyAt(u.l,u.c,"fontSize")},getCurrentCharColor:function(){var u=this._getCurrentCharIndex();return this.getValueOfPropertyAt(u.l,u.c,"fill")},_getCurrentCharIndex:function(){var u=this.get2DCursorLocation(this.selectionStart,!0),c=u.charIndex>0?u.charIndex-1:0;return{l:u.lineIndex,c}}}),m.IText.fromObject=function(u,c){var h=m.util.stylesFromArray(u.styles,u.text),a=Object.assign({},u,{styles:h});if(delete a.path,v(a),a.styles)for(var r in a.styles)for(var n in a.styles[r])v(a.styles[r][n]);m.Object._fromObject("IText",a,function(s){u.path?m.Object._fromObject("Path",u.path,function(f){s.set("path",f),c(s)},"path"):c(s)},"text")}}(),function(){var v=m.util.object.clone;m.util.object.extend(m.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var u=this;this.on("added",function(){var c=u.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,u._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(u))})},initRemovedHandler:function(){var u=this;this.on("removed",function(){var c=u.canvas;c&&(c._iTextInstances=c._iTextInstances||[],m.util.removeFromArray(c._iTextInstances,u),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,u._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(u){u._mouseUpITextHandler=function(){u._iTextInstances&&u._iTextInstances.forEach(function(c){c.__isMousedown=!1})},u.on("mouse:up",u._mouseUpITextHandler)},_removeCanvasHandlers:function(u){u.off("mouse:up",u._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(u,c,h,a){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},u.animate("_currentCursorOpacity",c,{duration:h,onComplete:function(){r.isAborted||u[a]()},onChange:function(){u.canvas&&u.selectionStart===u.selectionEnd&&u.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var u=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){u._currentTickCompleteState=u._animateCursor(u,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(u){var c=this,h=u?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},h)},abortCursorAnimation:function(){var u=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,u&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(u){var c=0,h=u-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h--;for(;/\S/.test(this._text[h])&&h>-1;)c++,h--;return u-c},findWordBoundaryRight:function(u){var c=0,h=u;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)c++,h++;return u+c},findLineBoundaryLeft:function(u){for(var c=0,h=u-1;!/\n/.test(this._text[h])&&h>-1;)c++,h--;return u-c},findLineBoundaryRight:function(u){for(var c=0,h=u;!/\n/.test(this._text[h])&&h<this._text.length;)c++,h++;return u+c},searchWordBoundary:function(u,c){for(var h=this._text,a=this._reSpace.test(h[u])?u-1:u,r=h[a],n=m.reNonWord;!n.test(r)&&a>0&&a<h.length;)a+=c,r=h[a];return n.test(r)&&(a+=c===1?0:1),a},selectWord:function(u){u=u||this.selectionStart;var c=this.searchWordBoundary(u,-1),h=this.searchWordBoundary(u,1);this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(u){u=u||this.selectionStart;var c=this.findLineBoundaryLeft(u),h=this.findLineBoundaryRight(u);return this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(u){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(u),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(u){u._iTextInstances&&u._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(u){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(u.e),h=this.selectionStart,a=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||h===a)&&(h===c||a===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(u,c,h){var a=h.slice(0,u),r=m.util.string.graphemeSplit(a).length;if(u===c)return{selectionStart:r,selectionEnd:r};var n=h.slice(u,c),s=m.util.string.graphemeSplit(n).length;return{selectionStart:r,selectionEnd:r+s}},fromGraphemeToStringSelection:function(u,c,h){var a=h.slice(0,u),r=a.join("").length;if(u===c)return{selectionStart:r,selectionEnd:r};var n=h.slice(u,c),s=n.join("").length;return{selectionStart:r,selectionEnd:r+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var u=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=u.selectionStart,this.hiddenTextarea.selectionEnd=u.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var u=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=u.selectionEnd,this.inCompositionMode||(this.selectionStart=u.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var u=this._calcTextareaPosition();this.hiddenTextarea.style.left=u.left,this.hiddenTextarea.style.top=u.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var u=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(u),h=this.get2DCursorLocation(u),a=h.lineIndex,r=h.charIndex,n=this.getValueOfPropertyAt(a,r,"fontSize")*this.lineHeight,s=c.leftOffset,f=this.calcTransformMatrix(),o={x:c.left+s,y:c.top+c.topOffset+n},d=this.canvas.getRetinaScaling(),p=this.canvas.upperCanvasEl,_=p.width/d,S=p.height/d,C=_-n,O=S-n,k=p.clientWidth/_,P=p.clientHeight/S;return o=m.util.transformPoint(o,f),o=m.util.transformPoint(o,this.canvas.viewportTransform),o.x*=k,o.y*=P,o.x<0&&(o.x=0),o.x>C&&(o.x=C),o.y<0&&(o.y=0),o.y>O&&(o.y=O),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var u=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),u&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),u&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var u in this.styles)this._textLines[u]||delete this.styles[u]},removeStyleFromTo:function(u,c){var h=this.get2DCursorLocation(u,!0),a=this.get2DCursorLocation(c,!0),r=h.lineIndex,n=h.charIndex,s=a.lineIndex,f=a.charIndex,o,d;if(r!==s){if(this.styles[r])for(o=n;o<this._unwrappedTextLines[r].length;o++)delete this.styles[r][o];if(this.styles[s])for(o=f;o<this._unwrappedTextLines[s].length;o++)d=this.styles[s][o],d&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+o-f]=d);for(o=r+1;o<=s;o++)delete this.styles[o];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){d=this.styles[r];var p=f-n,_,S;for(o=n;o<f;o++)delete d[o];for(S in this.styles[r])_=parseInt(S,10),_>=f&&(d[_-p]=d[S],delete d[S])}},shiftLineStyles:function(u,c){var h=v(this.styles);for(var a in this.styles){var r=parseInt(a,10);r>u&&(this.styles[r+c]=h[r],h[r-c]||delete this.styles[r])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(u,c,h,a){var r,n={},s=!1,f=this._unwrappedTextLines[u].length,o=f===c;h||(h=1),this.shiftLineStyles(u,h),this.styles[u]&&(r=this.styles[u][c===0?c:c-1]);for(var d in this.styles[u]){var p=parseInt(d,10);p>=c&&(s=!0,n[p-c]=this.styles[u][d],o&&c===0||delete this.styles[u][d])}var _=!1;for(s&&!o&&(this.styles[u+h]=n,_=!0),(_||f>c)&&h--;h>0;)a&&a[h-1]?this.styles[u+h]={0:v(a[h-1])}:r?this.styles[u+h]={0:v(r)}:delete this.styles[u+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(u,c,h,a){this.styles||(this.styles={});var r=this.styles[u],n=r?v(r):{};h||(h=1);for(var s in n){var f=parseInt(s,10);f>=c&&(r[f+h]=n[f],n[f-h]||delete r[f])}if(this._forceClearCache=!0,a){for(;h--;)Object.keys(a[h]).length&&(this.styles[u]||(this.styles[u]={}),this.styles[u][c+h]=v(a[h]));return}if(r)for(var o=r[c?c-1:1];o&&h--;)this.styles[u][c+h]=v(o)},insertNewStyleBlock:function(u,c,h){for(var a=this.get2DCursorLocation(c,!0),r=[0],n=0,s=0;s<u.length;s++)u[s]===`
`?(n++,r[n]=0):r[n]++;r[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,r[0],h),h=h&&h.slice(r[0]+1)),n&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+r[0],n);for(var s=1;s<n;s++)r[s]>0?this.insertCharStyleObject(a.lineIndex+s,0,r[s],h):h&&this.styles[a.lineIndex+s]&&h[0]&&(this.styles[a.lineIndex+s][0]=h[0]),h=h&&h.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(a.lineIndex+s,0,r[s],h)},setSelectionStartEndWithShift:function(u,c,h){h<=u?(c===u?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=u),this.selectionStart=h):h>u&&h<c?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(c===u?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=h)},setSelectionInBoundaries:function(){var u=this.text.length;this.selectionStart>u?this.selectionStart=u:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>u?this.selectionEnd=u:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),m.util.object.extend(m.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(v){if(this.canvas){this.__newClickTime=+new Date;var u=v.pointer;this.isTripleClick(u)&&(this.fire("tripleclick",v),this._stopEvent(v.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=u,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(v){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===v.x&&this.__lastPointer.y===v.y},_stopEvent:function(v){v.preventDefault&&v.preventDefault(),v.stopPropagation&&v.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(v){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(v.e))},tripleClickHandler:function(v){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(v.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(v){!this.canvas||!this.editable||v.e.button&&v.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(v.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(v){!this.canvas||!this.editable||v.e.button&&v.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(v){if(this.__isMousedown=!1,!(!this.editable||this.group||v.transform&&v.transform.actionPerformed||v.e.button&&v.e.button!==1)){if(this.canvas){var u=this.canvas._activeObject;if(u&&u!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(v.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(v){var u=this.getSelectionStartFromPointer(v),c=this.selectionStart,h=this.selectionEnd;v.shiftKey?this.setSelectionStartEndWithShift(c,h,u):(this.selectionStart=u,this.selectionEnd=u),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(v){for(var u=this.getLocalPointer(v),c=0,h=0,a=0,r=0,n=0,s,f,o=0,d=this._textLines.length;o<d&&a<=u.y;o++)a+=this.getHeightOfLine(o)*this.scaleY,n=o,o>0&&(r+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));s=this._getLineLeftOffset(n),h=s*this.scaleX,f=this._textLines[n],this.direction==="rtl"&&(u.x=this.width*this.scaleX-u.x+h);for(var p=0,_=f.length;p<_&&(c=h,h+=this.__charBounds[n][p].kernedWidth*this.scaleX,h<=u.x);p++)r++;return this._getNewSelectionStartFromOffset(u,c,h,r,_)},_getNewSelectionStartFromOffset:function(v,u,c,h,a){var r=v.x-u,n=c-v.x,s=n>r||n<0?0:1,f=h+s;return this.flipX&&(f=a-f),f>this._text.length&&(f=this._text.length),f}}),m.util.object.extend(m.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=m.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var v=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+v.top+"; left: "+v.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+v.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):m.document.body.appendChild(this.hiddenTextarea),m.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),m.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),m.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),m.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),m.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),m.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),m.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),m.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),m.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(m.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(v){if(this.isEditing){var u=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(v.keyCode in u)this[u[v.keyCode]](v);else if(v.keyCode in this.ctrlKeysMapDown&&(v.ctrlKey||v.metaKey))this[this.ctrlKeysMapDown[v.keyCode]](v);else return;v.stopImmediatePropagation(),v.preventDefault(),v.keyCode>=33&&v.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(v){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(v.keyCode in this.ctrlKeysMapUp&&(v.ctrlKey||v.metaKey))this[this.ctrlKeysMapUp[v.keyCode]](v);else return;v.stopImmediatePropagation(),v.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(v){var u=this.fromPaste;if(this.fromPaste=!1,v&&v.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,a=c.length,r,n,s=a-h,f=this.selectionStart,o=this.selectionEnd,d=f!==o,p,_,S;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),O=f>C.selectionStart;d?(r=this._text.slice(f,o),s+=o-f):a<h&&(O?r=this._text.slice(o+s,o):r=this._text.slice(f,f-s)),n=c.slice(C.selectionEnd-s,C.selectionEnd),r&&r.length&&(n.length&&(p=this.getSelectionStyles(f,f+1,!1),p=n.map(function(){return p[0]})),d?(_=f,S=o):O?(_=o-r.length,S=o):(_=o,S=o+r.length),this.removeStyleFromTo(_,S)),n.length&&(u&&n.join("")===m.copiedText&&!m.disableStyleCopyPaste&&(p=m.copiedTextStyle),this.insertNewStyleBlock(n,f,p)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(v){this.compositionStart=v.target.selectionStart,this.compositionEnd=v.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(m.copiedText=this.getSelectedText(),m.disableStyleCopyPaste?m.copiedTextStyle=null:m.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(v){return v&&v.clipboardData||m.window.clipboardData},_getWidthBeforeCursor:function(v,u){var c=this._getLineLeftOffset(v),h;return u>0&&(h=this.__charBounds[v][u-1],c+=h.left+h.width),c},getDownCursorOffset:function(v,u){var c=this._getSelectionForOffset(v,u),h=this.get2DCursorLocation(c),a=h.lineIndex;if(a===this._textLines.length-1||v.metaKey||v.keyCode===34)return this._text.length-c;var r=h.charIndex,n=this._getWidthBeforeCursor(a,r),s=this._getIndexOnLine(a+1,n),f=this._textLines[a].slice(r);return f.length+s+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(v,u){return v.shiftKey&&this.selectionStart!==this.selectionEnd&&u?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(v,u){var c=this._getSelectionForOffset(v,u),h=this.get2DCursorLocation(c),a=h.lineIndex;if(a===0||v.metaKey||v.keyCode===33)return-c;var r=h.charIndex,n=this._getWidthBeforeCursor(a,r),s=this._getIndexOnLine(a-1,n),f=this._textLines[a].slice(0,r),o=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+s-f.length+(1-o)},_getIndexOnLine:function(v,u){for(var c=this._textLines[v],h=this._getLineLeftOffset(v),a=h,r=0,n,s,f=0,o=c.length;f<o;f++)if(n=this.__charBounds[v][f].width,a+=n,a>u){s=!0;var d=a-n,p=a,_=Math.abs(d-u),S=Math.abs(p-u);r=S<_?f:f-1;break}return s||(r=c.length-1),r},moveCursorDown:function(v){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",v)},moveCursorUp:function(v){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",v)},_moveCursorUpOrDown:function(v,u){var c="get"+v+"CursorOffset",h=this[c](u,this._selectionDirection==="right");u.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(v){var u=this._selectionDirection==="left"?this.selectionStart+v:this.selectionEnd+v;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,u),v!==0},moveCursorWithoutShift:function(v){return v<0?(this.selectionStart+=v,this.selectionEnd=this.selectionStart):(this.selectionEnd+=v,this.selectionStart=this.selectionEnd),v!==0},moveCursorLeft:function(v){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",v)},_move:function(v,u,c){var h;if(v.altKey)h=this["findWordBoundary"+c](this[u]);else if(v.metaKey||v.keyCode===35||v.keyCode===36)h=this["findLineBoundary"+c](this[u]);else return this[u]+=c==="Left"?-1:1,!0;if(typeof h<"u"&&this[u]!==h)return this[u]=h,!0},_moveLeft:function(v,u){return this._move(v,u,"Left")},_moveRight:function(v,u){return this._move(v,u,"Right")},moveCursorLeftWithoutShift:function(v){var u=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(u=this._moveLeft(v,"selectionStart")),this.selectionEnd=this.selectionStart,u},moveCursorLeftWithShift:function(v){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(v,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(v,"selectionStart")},moveCursorRight:function(v){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",v)},_moveCursorLeftOrRight:function(v,u){var c="moveCursor"+v+"With";this._currentCursorOpacity=1,u.shiftKey?c+="Shift":c+="outShift",this[c](u)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(v){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(v,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(v,"selectionEnd")},moveCursorRightWithoutShift:function(v){var u=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(u=this._moveRight(v,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,u},removeChars:function(v,u){typeof u>"u"&&(u=v+1),this.removeStyleFromTo(v,u),this._text.splice(v,u-v),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(v,u,c,h){typeof h>"u"&&(h=c),h>c&&this.removeStyleFromTo(c,h);var a=m.util.string.graphemeSplit(v);this.insertNewStyleBlock(a,c,u),this._text=[].concat(this._text.slice(0,c),a,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var v=m.util.toFixed,u=m.util.radiansToDegrees,c=m.util.calcRotateMatrix,h=m.util.transformPoint,a=/  +/g;m.util.object.extend(m.Text.prototype,{_toSVG:function(){var r=this._getSVGLeftTopOffsets(),n=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(n)},toSVG:function(r){var n=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),s=this.path;return s?n+s._createBaseSVGMarkup(s._toSVG(),{reviver:r,withShadow:!0}):n},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(r){var n=!0,s=this.getSvgTextDecoration(this);return[r.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",s?'text-decoration="'+s+'" ':"",'style="',this.getSvgStyles(n),'"',this.addPaintOrder()," >",r.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(r,n){var s=[],f=[],o=r,d;this._setSVGBg(f);for(var p=0,_=this._textLines.length;p<_;p++)d=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(f,p,n+d,o),this._setSVGTextLineText(s,p,n+d,o),o+=this.getHeightOfLine(p);return{textSpans:s,textBgRects:f}},_createTextCharSpan:function(r,n,s,f,o){var d=r!==r.trim()||r.match(a),p=this.getSvgSpanStyles(n,d),_=p?'style="'+p+'"':"",S=n.deltaY,C="",O=m.Object.NUM_FRACTION_DIGITS,k="";if(S&&(C=' dy="'+v(S,O)+'" '),o.renderLeft!==void 0){var P=o.angle;k=' rotate="'+v(u(P),m.Object.NUM_FRACTION_DIGITS)+'" ';var H=o.width/2,K=c({angle:u(P)});K[4]=o.renderLeft,K[5]=o.renderTop;var ct=h({x:-H,y:0},K);s=ct.x,f=ct.y}return['<tspan x="',v(s,O),'" y="',v(f,O),'" ',C,_,k,">",m.util.string.escapeXml(r),"</tspan>"].join("")},_setSVGTextLineText:function(r,n,s,f){var o=this.getHeightOfLine(n),d=this.textAlign.indexOf("justify")!==-1,p,_,S="",C,O,k=0,P=this._textLines[n],H;f+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var K=0,ct=P.length-1;K<=ct;K++)H=K===ct||this.charSpacing||this.path,S+=P[K],C=this.__charBounds[n][K],k===0?(s+=C.kernedWidth-C.width,k+=C.width):k+=C.kernedWidth,d&&!H&&this._reSpaceAndTab.test(P[K])&&(H=!0),H||(p=p||this.getCompleteStyleDeclaration(n,K),_=this.getCompleteStyleDeclaration(n,K+1),H=m.util.hasStyleChanged(p,_,!0)),H&&(O=this._getStyleDeclaration(n,K)||{},r.push(this._createTextCharSpan(S,O,s,f,C)),S="",p=_,s+=k,k=0)},_pushTextBgRect:function(r,n,s,f,o,d){var p=m.Object.NUM_FRACTION_DIGITS;r.push("		<rect ",this._getFillAttributes(n),' x="',v(s,p),'" y="',v(f,p),'" width="',v(o,p),'" height="',v(d,p),`"></rect>
`)},_setSVGTextLineBg:function(r,n,s,f){for(var o=this._textLines[n],d=this.getHeightOfLine(n)/this.lineHeight,p=0,_=0,S,C,O=this.getValueOfPropertyAt(n,0,"textBackgroundColor"),k=0,P=o.length;k<P;k++)S=this.__charBounds[n][k],C=this.getValueOfPropertyAt(n,k,"textBackgroundColor"),C!==O?(O&&this._pushTextBgRect(r,O,s+_,f,p,d),_=S.left,p=S.width,O=C):p+=S.kernedWidth;C&&this._pushTextBgRect(r,C,s+_,f,p,d)},_getFillAttributes:function(r){var n=r&&typeof r=="string"?new m.Color(r):"";return!n||!n.getSource()||n.getAlpha()===1?'fill="'+r+'"':'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(r){for(var n=0,s=0,f=0;f<r;f++)n+=this.getHeightOfLine(f);return s=this.getHeightOfLine(f),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(r){var n=m.Object.prototype.getSvgStyles.call(this,r);return n+" white-space: pre;"}})}(),function(v){var u=v.fabric||(v.fabric={});u.Textbox=u.util.createClass(u.IText,u.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:u.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var h=0,a=0,r=0,n={},s=0;s<c.graphemeLines.length;s++)c.graphemeText[r]===`
`&&s>0?(a=0,r++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[r])&&s>0&&(a++,r++),n[s]={line:h,offset:a},r+=c.graphemeLines[s].length,a+=c.graphemeLines[s].length;return n},styleHas:function(c,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];a&&(h=a.line)}return u.Text.prototype.styleHas.call(this,c,h)},isEmptyStyles:function(c){if(!this.styles)return!0;var h=0,a=c+1,r,n,s=!1,f=this._styleMap[c],o=this._styleMap[c+1];f&&(c=f.line,h=f.offset),o&&(a=o.line,s=a===c,r=o.offset),n=typeof c>"u"?this.styles:{line:this.styles[c]};for(var d in n)for(var p in n[d])if(p>=h&&(!s||p<r))for(var _ in n[d][p])return!1;return!0},_getStyleDeclaration:function(c,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[c];if(!a)return null;c=a.line,h=a.offset+h}return this.callSuper("_getStyleDeclaration",c,h)},_setStyleDeclaration:function(c,h,a){var r=this._styleMap[c];c=r.line,h=r.offset+h,this.styles[c][h]=a},_deleteStyleDeclaration:function(c,h){var a=this._styleMap[c];c=a.line,h=a.offset+h,delete this.styles[c][h]},_getLineStyle:function(c){var h=this._styleMap[c];return!!this.styles[h.line]},_setLineStyle:function(c){var h=this._styleMap[c];this.styles[h.line]={}},_wrapText:function(c,h){var a=[],r;for(this.isWrapping=!0,r=0;r<c.length;r++)a=a.concat(this._wrapLine(c[r],r,h));return this.isWrapping=!1,a},_measureWord:function(c,h,a){var r=0,n,s=!0;a=a||0;for(var f=0,o=c.length;f<o;f++){var d=this._getGraphemeBox(c[f],h,f+a,n,s);r+=d.kernedWidth,n=c[f]}return r},_wrapLine:function(c,h,a,K){var n=0,s=this.splitByGrapheme,f=[],o=[],d=s?u.util.string.graphemeSplit(c):c.split(this._wordJoiners),p="",_=0,S=s?"":" ",C=0,O=0,k=0,P=!0,H=this._getWidthOfCharSpacing(),K=K||0;d.length===0&&d.push([]),a-=K;for(var ct=0;ct<d.length;ct++)p=s?d[ct]:u.util.string.graphemeSplit(d[ct]),C=this._measureWord(p,h,_),_+=p.length,n+=O+C-H,n>a&&!P?(f.push(o),o=[],n=C,P=!0):n+=H,!P&&!s&&o.push(S),o=o.concat(p),O=s?0:this._measureWord([S],h,_),_++,P=!1,C>k&&(k=C);return ct&&f.push(o),k+K>this.dynamicMinWidth&&(this.dynamicMinWidth=k-H+K),f},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c,h){return this.splitByGrapheme&&!h?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var h=u.Text.prototype._splitTextIntoLines.call(this,c),a=this._wrapText(h.lines,this.width),r=new Array(a.length),n=0;n<a.length;n++)r[n]=a[n].join("");return h.lines=r,h.graphemeLines=a,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var h in this._styleMap)this._textLines[h]&&(c[this._styleMap[h].line]=1);for(var h in this.styles)c[h]||delete this.styles[h]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),u.Textbox.fromObject=function(c,h){var a=u.util.stylesFromArray(c.styles,c.text),r=Object.assign({},c,{styles:a});return delete r.path,u.Object._fromObject("Textbox",r,function(n){c.path?u.Object._fromObject("Path",c.path,function(s){n.set("path",s),h(n)},"path"):h(n)},"text")}}(M),function(){var v=m.controlsUtils,u=v.scaleSkewCursorStyleHandler,c=v.scaleCursorStyleHandler,h=v.scalingEqually,a=v.scalingYOrSkewingX,r=v.scalingXOrSkewingY,n=v.scaleOrSkewActionName,s=m.Object.prototype.controls;if(s.ml=new m.Control({x:-.5,y:0,cursorStyleHandler:u,actionHandler:r,getActionName:n}),s.mr=new m.Control({x:.5,y:0,cursorStyleHandler:u,actionHandler:r,getActionName:n}),s.mb=new m.Control({x:0,y:.5,cursorStyleHandler:u,actionHandler:a,getActionName:n}),s.mt=new m.Control({x:0,y:-.5,cursorStyleHandler:u,actionHandler:a,getActionName:n}),s.tl=new m.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),s.tr=new m.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),s.bl=new m.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:h}),s.br=new m.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:h}),s.mtr=new m.Control({x:0,y:-.5,actionHandler:v.rotationWithSnapping,cursorStyleHandler:v.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),m.Textbox){var f=m.Textbox.prototype.controls={};f.mtr=s.mtr,f.tr=s.tr,f.br=s.br,f.tl=s.tl,f.bl=s.bl,f.mt=s.mt,f.mb=s.mb,f.mr=new m.Control({x:.5,y:0,actionHandler:v.changeWidth,cursorStyleHandler:u,actionName:"resizing"}),f.ml=new m.Control({x:-.5,y:0,actionHandler:v.changeWidth,cursorStyleHandler:u,actionName:"resizing"})}}()}(So)),So}var Wt=hv();function xh(M,m,V){return m=Fe(m),pv(M,Oh()?Reflect.construct(m,V||[],Fe(M).constructor):m.apply(M,V))}function Oh(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oh=function(){return!!M})()}function dv(M,m){var V=M==null?null:typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(V!=null){var j,nt,ht,St,v=[],u=!0,c=!1;try{if(ht=(V=V.call(M)).next,m===0){if(Object(V)!==V)return;u=!1}else for(;!(u=(j=ht.call(V)).done)&&(v.push(j.value),v.length!==m);u=!0);}catch(h){c=!0,nt=h}finally{try{if(!u&&V.return!=null&&(St=V.return(),Object(St)!==St))return}finally{if(c)throw nt}}return v}}function _h(M,m){var V=Object.keys(M);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(M);m&&(j=j.filter(function(nt){return Object.getOwnPropertyDescriptor(M,nt).enumerable})),V.push.apply(V,j)}return V}function gv(M){for(var m=1;m<arguments.length;m++){var V=arguments[m]!=null?arguments[m]:{};m%2?_h(Object(V),!0).forEach(function(j){qa(M,j,V[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(V)):_h(Object(V)).forEach(function(j){Object.defineProperty(M,j,Object.getOwnPropertyDescriptor(V,j))})}return M}function Ie(){Ie=function(){return m};var M,m={},V=Object.prototype,j=V.hasOwnProperty,nt=Object.defineProperty||function(z,X,G){z[X]=G.value},ht=typeof Symbol=="function"?Symbol:{},St=ht.iterator||"@@iterator",v=ht.asyncIterator||"@@asyncIterator",u=ht.toStringTag||"@@toStringTag";function c(z,X,G){return Object.defineProperty(z,X,{value:G,enumerable:!0,configurable:!0,writable:!0}),z[X]}try{c({},"")}catch{c=function(X,G,x){return X[G]=x}}function h(z,X,G,x){var b=X&&X.prototype instanceof d?X:d,E=Object.create(b.prototype),R=new vt(x||[]);return nt(E,"_invoke",{value:K(z,G,R)}),E}function a(z,X,G){try{return{type:"normal",arg:z.call(X,G)}}catch(x){return{type:"throw",arg:x}}}m.wrap=h;var r="suspendedStart",n="suspendedYield",s="executing",f="completed",o={};function d(){}function p(){}function _(){}var S={};c(S,St,function(){return this});var C=Object.getPrototypeOf,O=C&&C(C(gt([])));O&&O!==V&&j.call(O,St)&&(S=O);var k=_.prototype=d.prototype=Object.create(S);function P(z){["next","throw","return"].forEach(function(X){c(z,X,function(G){return this._invoke(X,G)})})}function H(z,X){function G(b,E,R,U){var D=a(z[b],z,E);if(D.type!=="throw"){var w=D.arg,B=w.value;return B&&typeof B=="object"&&j.call(B,"__await")?X.resolve(B.__await).then(function(F){G("next",F,R,U)},function(F){G("throw",F,R,U)}):X.resolve(B).then(function(F){w.value=F,R(w)},function(F){return G("throw",F,R,U)})}U(D.arg)}var x;nt(this,"_invoke",{value:function(b,E){function R(){return new X(function(U,D){G(b,E,U,D)})}return x=x?x.then(R,R):R()}})}function K(z,X,G){var x=r;return function(b,E){if(x===s)throw new Error("Generator is already running");if(x===f){if(b==="throw")throw E;return{value:M,done:!0}}for(G.method=b,G.arg=E;;){var R=G.delegate;if(R){var U=ct(R,G);if(U){if(U===o)continue;return U}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(x===r)throw x=f,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);x=s;var D=a(z,X,G);if(D.type==="normal"){if(x=G.done?f:n,D.arg===o)continue;return{value:D.arg,done:G.done}}D.type==="throw"&&(x=f,G.method="throw",G.arg=D.arg)}}}function ct(z,X){var G=X.method,x=z.iterator[G];if(x===M)return X.delegate=null,G==="throw"&&z.iterator.return&&(X.method="return",X.arg=M,ct(z,X),X.method==="throw")||G!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+G+"' method")),o;var b=a(x,z.iterator,X.arg);if(b.type==="throw")return X.method="throw",X.arg=b.arg,X.delegate=null,o;var E=b.arg;return E?E.done?(X[z.resultName]=E.value,X.next=z.nextLoc,X.method!=="return"&&(X.method="next",X.arg=M),X.delegate=null,o):E:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,o)}function mt(z){var X={tryLoc:z[0]};1 in z&&(X.catchLoc=z[1]),2 in z&&(X.finallyLoc=z[2],X.afterLoc=z[3]),this.tryEntries.push(X)}function pt(z){var X=z.completion||{};X.type="normal",delete X.arg,z.completion=X}function vt(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(mt,this),this.reset(!0)}function gt(z){if(z||z===""){var X=z[St];if(X)return X.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var G=-1,x=function b(){for(;++G<z.length;)if(j.call(z,G))return b.value=z[G],b.done=!1,b;return b.value=M,b.done=!0,b};return x.next=x}}throw new TypeError(typeof z+" is not iterable")}return p.prototype=_,nt(k,"constructor",{value:_,configurable:!0}),nt(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,u,"GeneratorFunction"),m.isGeneratorFunction=function(z){var X=typeof z=="function"&&z.constructor;return!!X&&(X===p||(X.displayName||X.name)==="GeneratorFunction")},m.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,_):(z.__proto__=_,c(z,u,"GeneratorFunction")),z.prototype=Object.create(k),z},m.awrap=function(z){return{__await:z}},P(H.prototype),c(H.prototype,v,function(){return this}),m.AsyncIterator=H,m.async=function(z,X,G,x,b){b===void 0&&(b=Promise);var E=new H(h(z,X,G,x),b);return m.isGeneratorFunction(X)?E:E.next().then(function(R){return R.done?R.value:E.next()})},P(k),c(k,u,"Generator"),c(k,St,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),m.keys=function(z){var X=Object(z),G=[];for(var x in X)G.push(x);return G.reverse(),function b(){for(;G.length;){var E=G.pop();if(E in X)return b.value=E,b.done=!1,b}return b.done=!0,b}},m.values=gt,vt.prototype={constructor:vt,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=M,this.done=!1,this.delegate=null,this.method="next",this.arg=M,this.tryEntries.forEach(pt),!z)for(var X in this)X.charAt(0)==="t"&&j.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=M)},stop:function(){this.done=!0;var z=this.tryEntries[0].completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var X=this;function G(D,w){return E.type="throw",E.arg=z,X.next=D,w&&(X.method="next",X.arg=M),!!w}for(var x=this.tryEntries.length-1;x>=0;--x){var b=this.tryEntries[x],E=b.completion;if(b.tryLoc==="root")return G("end");if(b.tryLoc<=this.prev){var R=j.call(b,"catchLoc"),U=j.call(b,"finallyLoc");if(R&&U){if(this.prev<b.catchLoc)return G(b.catchLoc,!0);if(this.prev<b.finallyLoc)return G(b.finallyLoc)}else if(R){if(this.prev<b.catchLoc)return G(b.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<b.finallyLoc)return G(b.finallyLoc)}}}},abrupt:function(z,X){for(var G=this.tryEntries.length-1;G>=0;--G){var x=this.tryEntries[G];if(x.tryLoc<=this.prev&&j.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var b=x;break}}b&&(z==="break"||z==="continue")&&b.tryLoc<=X&&X<=b.finallyLoc&&(b=null);var E=b?b.completion:{};return E.type=z,E.arg=X,b?(this.method="next",this.next=b.finallyLoc,o):this.complete(E)},complete:function(z,X){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&X&&(this.next=X),o},finish:function(z){for(var X=this.tryEntries.length-1;X>=0;--X){var G=this.tryEntries[X];if(G.finallyLoc===z)return this.complete(G.completion,G.afterLoc),pt(G),o}},catch:function(z){for(var X=this.tryEntries.length-1;X>=0;--X){var G=this.tryEntries[X];if(G.tryLoc===z){var x=G.completion;if(x.type==="throw"){var b=x.arg;pt(G)}return b}}throw new Error("illegal catch attempt")},delegateYield:function(z,X,G){return this.delegate={iterator:gt(z),resultName:X,nextLoc:G},this.method==="next"&&(this.arg=M),o}},m}function vv(M,m){if(typeof M!="object"||!M)return M;var V=M[Symbol.toPrimitive];if(V!==void 0){var j=V.call(M,m);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(M)}function wh(M){var m=vv(M,"string");return typeof m=="symbol"?m:String(m)}function Sh(M,m,V,j,nt,ht,St){try{var v=M[ht](St),u=v.value}catch(c){V(c);return}v.done?m(u):Promise.resolve(u).then(j,nt)}function Va(M){return function(){var m=this,V=arguments;return new Promise(function(j,nt){var ht=M.apply(m,V);function St(u){Sh(ht,j,nt,St,v,"next",u)}function v(u){Sh(ht,j,nt,St,v,"throw",u)}St(void 0)})}}function Eh(M,m){if(!(M instanceof m))throw new TypeError("Cannot call a class as a function")}function mv(M,m){for(var V=0;V<m.length;V++){var j=m[V];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(M,wh(j.key),j)}}function Ah(M,m,V){return m&&mv(M.prototype,m),Object.defineProperty(M,"prototype",{writable:!1}),M}function qa(M,m,V){return m=wh(m),m in M?Object.defineProperty(M,m,{value:V,enumerable:!0,configurable:!0,writable:!0}):M[m]=V,M}function Dh(M,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(m&&m.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),m&&Co(M,m)}function Fe(M){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},Fe(M)}function Co(M,m){return Co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,nt){return j.__proto__=nt,j},Co(M,m)}function ss(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function pv(M,m){if(m&&(typeof m=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ss(M)}function yv(M,m){for(;!Object.prototype.hasOwnProperty.call(M,m)&&(M=Fe(M),M!==null););return M}function ii(){return typeof Reflect<"u"&&Reflect.get?ii=Reflect.get.bind():ii=function(m,V,j){var nt=yv(m,V);if(nt){var ht=Object.getOwnPropertyDescriptor(nt,V);return ht.get?ht.get.call(arguments.length<3?m:j):ht.value}},ii.apply(this,arguments)}function bh(M,m){return Sv(M)||dv(M,m)||Mh(M,m)||Tv()}function Wa(M){return _v(M)||bv(M)||Mh(M)||Cv()}function _v(M){if(Array.isArray(M))return To(M)}function Sv(M){if(Array.isArray(M))return M}function bv(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}function Mh(M,m){if(M){if(typeof M=="string")return To(M,m);var V=Object.prototype.toString.call(M).slice(8,-1);if(V==="Object"&&M.constructor&&(V=M.constructor.name),V==="Map"||V==="Set")return Array.from(M);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return To(M,m)}}function To(M,m){(m==null||m>M.length)&&(m=M.length);for(var V=0,j=new Array(m);V<m;V++)j[V]=M[V];return j}function Cv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ia=function(M){Dh(m,M);function m(V,j){var nt;return Eh(this,m),nt=xh(this,m,[V,gv({originX:"center",originY:"center",left:0,top:0,layoutManager:new Wt.LayoutManager(new Wt.FixedLayout)},j)]),qa(ss(nt),"blockErasing",!1),nt}return Ah(m,[{key:"drawObject",value:function(j){var nt=[],ht=[];this._objects.forEach(function(St){return(St instanceof Wt.Path?nt:ht).push(St)}),j.save(),j.fillStyle="black",j.fillRect(-this.width/2,-this.height/2,this.width,this.height),j.restore(),!this.blockErasing&&nt.forEach(function(St){St.render(j)}),ht.forEach(function(St){St.globalCompositeOperation=St.inverted?"destination-out":"source-in",St.render(j)})}}]),m}(Wt.Group);qa(Ia,"type","clipping");Wt.classRegistry.setClass(Ia);var Ch=function(m,V){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"source-over";m.save(),m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",m.globalCompositeOperation=j,m.resetTransform(),m.drawImage(V.canvas,0,0),m.restore()},xv=function(m,V,j){Ch(m,V,"destination-out"),j?Ch(V,j,"source-in"):(V.save(),V.resetTransform(),V.clearRect(0,0,V.canvas.width,V.canvas.height),V.restore())};function Rh(M){return M.flatMap(function(m){return!m.erasable||m.isNotVisible()?[]:m instanceof Wt.Group&&m.erasable==="deep"?Rh(m.getObjects()):[m]})}function Ov(M,m,V){m.clearContext(M),M.imageSmoothingEnabled=m.imageSmoothingEnabled,M.imageSmoothingQuality="high",M.patternQuality="best",m._renderBackground(M),M.save(),M.transform.apply(M,Wa(m.viewportTransform)),V.forEach(function(nt){return nt.render(M)}),M.restore();var j=m.clipPath;j&&(j._set("canvas",m),j.shouldCache(),j._transformDone=!0,j.renderCache({forClipping:!0}),m.drawClipPathOnCanvas(M,j)),m._renderOverlay(M)}function wv(M,m,V){var j=m.inverted,nt=m.opacity,ht=V.canvas,St=V.objects,v=St===void 0?ht._objectsToRender||ht._objects:St,u=V.background,c=u===void 0?ht.backgroundImage:u,h=V.overlay,a=h===void 0?ht.overlayImage:h,r=1-nt,n=Rh([].concat(Wa(v),Wa([c,a].filter(function(s){return!!s})))).map(function(s){if(j){if(s.clipPath instanceof Ia)return s.clipPath.blockErasing=!0,s.clipPath.set("dirty",!0),s.set("dirty",!0),{object:s,clipPath:s.clipPath}}else{var f,o=s.opacity;return s.opacity*=r,(f=s.parent)===null||f===void 0||f.set("dirty",!0),{object:s,opacity:o}}});Ov(M,ht,v),n.forEach(function(s){if(s)if(s.opacity){var f;s.object.opacity=s.opacity,(f=s.object.parent)===null||f===void 0||f.set("dirty",!0)}else s.clipPath&&(s.clipPath.blockErasing=!1,s.clipPath.set("dirty",!0),s.object.set("dirty",!0))})}function jh(M,m){return M.flatMap(function(V){return!V.erasable||!V.intersectsWithObject(m)?[]:V instanceof Wt.Group&&V.erasable==="deep"?jh(V.getObjects(),m):[V]})}var Ev=function(m){var V=m.clipPath;if(V instanceof Ia)return V;var j=m.strokeWidth,nt=new Wt.Point(j,j),ht=m.strokeUniform?nt.divide(m.getObjectScaling()):nt,St=new Ia([],{width:m.width+ht.x,height:m.height+ht.y});if(V){var v=V.translateToOriginPoint(new Wt.Point,V.originX,V.originY),u=v.x,c=v.y;V.originX=V.originY="center",Wt.util.sendObjectToPlane(V,void 0,Wt.util.createTranslateMatrix(u,c)),St.add(V)}return m.clipPath=St};function kh(M,m){var V=Ev(M);V.add(m),V.set("dirty",!0),M.set("dirty",!0)}function Av(M,m){return xo.apply(this,arguments)}function xo(){return xo=Va(Ie().mark(function M(m,V){var j;return Ie().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,V.clone();case 2:return j=ht.sent,Wt.util.sendObjectToPlane(j,void 0,m.calcTransformMatrix()),kh(m,j),ht.abrupt("return",j);case 6:case"end":return ht.stop()}},M)})),xo.apply(this,arguments)}function Dv(M,m,V){return Oo.apply(this,arguments)}function Oo(){return Oo=Va(Ie().mark(function M(m,V,j){var nt,ht;return Ie().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,j.clone();case 2:return nt=v.sent,ht=V&&m.translateToOriginPoint(new Wt.Point,m.originX,m.originY),Wt.util.sendObjectToPlane(nt,void 0,ht?Wt.util.multiplyTransformMatrixArray([[1,0,0,1,ht.x,ht.y],V,[1,0,0,1,-ht.x,-ht.y],m.calcTransformMatrix()]):m.calcTransformMatrix()),kh(m,nt),v.abrupt("return",nt);case 7:case"end":return v.stop()}},M)})),Oo.apply(this,arguments)}var Mv=function(m,V,j){var nt=j.width,ht=j.height,St=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;m.width=nt,m.height=ht,St>1&&(m.setAttribute("width",(nt*St).toString()),m.setAttribute("height",(ht*St).toString()),V.scale(St,St))},Th=function(M){Dh(m,M);function m(V){var j;Eh(this,m),j=xh(this,m,[V]),qa(ss(j),"inverted",!1),qa(ss(j),"active",!1);var nt=document.createElement("canvas"),ht=nt.getContext("2d");if(!ht)throw new Error("Failed to get context");return Mv(nt,ht,V,j.canvas.getRetinaScaling()),j.effectContext=ht,j.eventEmitter=new EventTarget,j}return Ah(m,[{key:"on",value:function(j,nt,ht){var St=this;return this.eventEmitter.addEventListener(j,nt,ht),function(){return St.eventEmitter.removeEventListener(j,nt,ht)}}},{key:"drawEffect",value:function(){wv(this.effectContext,{opacity:new Wt.Color(this.color).getAlpha(),inverted:this.inverted},{canvas:this.canvas})}},{key:"_setBrushStyles",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop;ii(Fe(m.prototype),"_setBrushStyles",this).call(this,j),j.strokeStyle="black"}},{key:"needsFullRender",value:function(){return!0}},{key:"_render",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.getTopContext();ii(Fe(m.prototype),"_render",this).call(this,j),xv(this.canvas.getContext(),j,this.effectContext)}},{key:"onMouseDown",value:function(j,nt){var ht=this;this.eventEmitter.dispatchEvent(new CustomEvent("start",{detail:nt,cancelable:!0}))&&(this.active=!0,this.eventEmitter.dispatchEvent(new CustomEvent("redraw",{detail:{type:"start"},cancelable:!0}))&&this.drawEffect(),this._disposer=this.canvas.on("after:render",function(St){var v=St.ctx;v===ht.canvas.getContext()&&(ht.eventEmitter.dispatchEvent(new CustomEvent("redraw",{detail:{type:"render"},cancelable:!0}))&&ht.drawEffect(),ht._render())}),ii(Fe(m.prototype),"onMouseDown",this).call(this,j,nt))}},{key:"onMouseMove",value:function(j,nt){this.active&&this.eventEmitter.dispatchEvent(new CustomEvent("move",{detail:nt,cancelable:!0}))&&ii(Fe(m.prototype),"onMouseMove",this).call(this,j,nt)}},{key:"onMouseUp",value:function(j){var nt;return this.active&&ii(Fe(m.prototype),"onMouseUp",this).call(this,j),this.active=!1,(nt=this._disposer)===null||nt===void 0||nt.call(this),delete this._disposer,!1}},{key:"convertPointsToSVGPath",value:function(j){return ii(Fe(m.prototype),"convertPointsToSVGPath",this).call(this,this.decimate?this.decimatePoints(j,this.decimate):j)}},{key:"createPath",value:function(j){var nt=ii(Fe(m.prototype),"createPath",this).call(this,j);return nt.set(this.inverted?{globalCompositeOperation:"source-over",stroke:"white"}:{globalCompositeOperation:"destination-out",stroke:"black",opacity:new Wt.Color(this.color).getAlpha()}),nt}},{key:"commit",value:function(){var V=Va(Ie().mark(function nt(ht){var St,v;return Ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return St=ht.path,v=ht.targets,c.t0=Map,c.next=4,Promise.all([].concat(Wa(v.map(function(){var h=Va(Ie().mark(function a(r){return Ie().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=r,s.next=3,Av(r,St);case 3:return s.t1=s.sent,s.abrupt("return",[s.t0,s.t1]);case 5:case"end":return s.stop()}},a)}));return function(a){return h.apply(this,arguments)}}())),Wa([[this.canvas.backgroundImage,this.canvas.backgroundVpt?void 0:this.canvas.viewportTransform],[this.canvas.overlayImage,this.canvas.overlayVpt?void 0:this.canvas.viewportTransform]].filter(function(h){var a=bh(h,1),r=a[0];return r}).map(function(){var h=Va(Ie().mark(function a(r){var n,s,f;return Ie().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return n=bh(r,2),s=n[0],f=n[1],d.t0=s,d.next=4,Dv(s,f,St);case 4:return d.t1=d.sent,d.abrupt("return",[d.t0,d.t1]);case 6:case"end":return d.stop()}},a)}));return function(a){return h.apply(this,arguments)}}()))));case 4:return c.t1=c.sent,c.abrupt("return",new c.t0(c.t1));case 6:case"end":return c.stop()}},nt,this)}));function j(nt){return V.apply(this,arguments)}return j}()},{key:"_finalizeAndAddPath",value:function(){var j=this._points;if(j.length<2){this.eventEmitter.dispatchEvent(new CustomEvent("cancel",{cancelable:!1}));return}var nt=this.createPath(this.convertPointsToSVGPath(j)),ht=jh(this.canvas.getObjects(),nt);this.eventEmitter.dispatchEvent(new CustomEvent("end",{detail:{path:nt,targets:ht},cancelable:!0}))&&this.commit({path:nt,targets:ht}),this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this._resetShadow()}},{key:"dispose",value:function(){var j=this.effectContext.canvas;j.width=j.height=0}}]),m}(Wt.PencilBrush);const Rv=()=>{const M="https://raw.communitydragon.org/latest/game/assets/characters/CHAMP/hud/CHAMP_circle.png",m="https://raw.communitydragon.org/latest/game/assets/maps/info/map11/2dlevelminimap_base_baron1.png",V="https://raw.communitydragon.org/latest/game/assets/characters/ha_chaosminionmelee/hud/redmelee_circle.png",j=Te.useRef(null),nt=Te.useRef(null),{state:ht,_:St}=Te.useContext(Qa),[v,u]=Te.useState(null);Te.useEffect(()=>{console.log(nt.current);const r=Wt.fabric.Image.fromURL(m,f=>{f.scaleToWidth(n.width),f.scaleToHeight(n.height),n.add(f),f.selectable=!1}),n=new Wt.fabric.Canvas("canvas",{isDrawingMode:!1,height:360,width:360,backgroundImage:r}),s=new Wt.fabric.PencilBrush(n);return new Th(n),console.log(s.color),s.color="red",s.width=4,s.inverted=!0,s.shadow=new Wt.fabric.Shadow("rgb(255,255,255) 0px 0px 4px"),n.freeDrawingBrush=new Th(j.current),u(n),()=>{}},[]);const c=(r,n)=>{Wt.fabric.Image.fromURL(n,s=>{s.scaleToWidth(v.width/15),s.scaleToHeight(v.height/15),s.top=100,s.left=100,s.selectable=!0,s.lockRotation=!0,s.lockScalingX=!0,s.lockScalingY=!0,s.hasControls=!1,v.add(s);const f=new Wt.fabric.Circle({radius:40,borderColor:"#444",stroke:"rgba(255,255,255,1.0",strokeWidth:2,fill:"rgba(0,0,0,0)"});v.add(f),v.setActiveObject(s)})},h=()=>{const r=n=>{const s=uv[n];let f=M.replaceAll("CHAMP",n.toLowerCase().replaceAll(/[.'\s]/g,""));return s&&(f=M.replace("CHAMP/hud/CHAMP_circle.png",`${s.name.toLowerCase()}/hud/${s.path}`)),f};return Mt.jsxs("div",{className:"icon-container",children:[Mt.jsx("div",{className:"minimap-icons",children:ht.blueChamps.map(n=>{const s=r(n);return n&&Mt.jsx("img",{className:"minimap-champ-icon",src:s,onClick:f=>{console.log("eep"),c(f,s)},onError:f=>{f.target.src.includes("circle.png")?f.target.src=f.target.src.replace("circle","circle_0"):f.target.src.includes("circle_0.png")&&console.log(s),f.target.onclick=o=>c(o,f.target.src)}})})}),Mt.jsx("div",{className:"minimap-icons",children:ht.redChamps.map(n=>{const s=r(n);return n&&Mt.jsx("img",{className:"minimap-champ-icon",onClick:f=>{c(f,s)},src:s,onError:f=>{f.target.src.includes("circle.png")?f.target.src=f.target.src.replace("circle","circle_0"):f.target.src.includes("circle_0.png")&&console.log(s),f.target.onclick=o=>c(o,f.target.src)}})})})]})},a=()=>{const r="https://raw.communitydragon.org/latest/game/assets/characters/ha_orderminionmelee/hud/bluemelee_circle.png",n="https://raw.communitydragon.org/latest/game/assets/ux/minimap/icons/minimap_jammer_friendly.png",s="https://raw.communitydragon.org/latest/game/assets/ux/minimap/icons/minimap_ward_blue_full.png",f="https://raw.communitydragon.org/latest/game/assets/characters/bluetrinket/hud/bluetrinket_square.png";return Mt.jsx("div",{className:"minion-icon-container",children:Mt.jsxs("div",{className:"minion-icons",children:[Mt.jsx("img",{className:"minimap-trinket-icon",onClick:o=>{c(o,r)},src:r}),Mt.jsxs("div",{className:"ward-icons",children:[Mt.jsx("img",{className:"minimap-trinket-icon",onClick:o=>{c(o,s)},src:s}),Mt.jsx("img",{className:"minimap-trinket-icon",onClick:o=>{c(o,n)},src:n}),Mt.jsx("img",{className:"minimap-trinket-icon",onClick:o=>{c(o,f)},src:f})]}),Mt.jsx("img",{className:"minimap-trinket-icon",onClick:o=>{c(o,V)},src:V})]})})};return Mt.jsxs("div",{className:"canvas-wrapper",children:[Mt.jsx(a,{}),Mt.jsx(h,{}),Mt.jsxs("div",{className:"button-bar",children:[Mt.jsx("button",{className:"btn-draw",onClick:()=>{v.isDrawingMode=!v.isDrawingMode},children:"draw"}),Mt.jsx("button",{className:"btn-draw",onClick:()=>{v.isDrawingMode=!v.isDrawingMode},children:"erase"}),Mt.jsx("button",{className:"btn-draw",onClick:()=>{const r=v.getActiveObject();r&&(console.log(r.type),r.type==="activeSelection"&&r.getObjects().map(n=>{v.remove(n)}),console.log(r),v.remove(r))},children:"garbage"})]}),Mt.jsx("canvas",{id:"canvas",className:"paint-canvas",ref:j,children:Mt.jsx("img",{id:"imag",src:m,ref:nt})})]})},jv=()=>{const{state:M,_:m}=Te.useContext(Qa);return Mt.jsx("div",{className:"minimap",children:Mt.jsx(Rv,{})})},kv=({children:M})=>Mt.jsx("section",{className:"sidebar-container",children:Mt.jsx("div",{className:"sidebar-content",children:M})});function Lv(){const M="https://ddragon.leagueoflegends.com/cdn/15.5.1/data/en_US/champion.json",{state:m,dispatch:V}=Te.useContext(Qa),[j,nt]=Te.useState(null),[ht,St]=Te.useState(null),v=async()=>{const c=await fetch(M);try{if(!c.ok)throw new Error(`bruh it didnt work: ${c.status}`);const h=await c.json();nt(h.data)}catch(h){console.log(h)}};Te.useEffect(()=>{v()},[]),Te.useEffect(()=>{console.log(j);let c={};for(var h in j)c[j[h].name]=j[h].key;const a=Object.keys(c).sort().reduce((r,n)=>(r[n]=c[n],r),{});St(a)},[j]);const u=({team:c})=>{const h=c==="blue"?m.blueChamps:m.redChamps;return Mt.jsx("section",{className:`team ${c}-side`,children:h.map(a=>Mt.jsx(ph,{champ:a,id:a?ht[a]:""}))})};return Mt.jsxs("main",{className:"app",children:[Mt.jsx(u,{team:"blue"}),Mt.jsx("section",{className:"champ-select",children:ht?Object.keys(ht).map(c=>{const a=m.blueChamps.includes(c)||m.redChamps.includes(c)?{opacity:"0.2"}:{opacity:"1"};return Mt.jsx(Mt.Fragment,{children:Mt.jsx(ph,{champ:c,id:ht[c],dimStyle:a})})}):"loading..."}),Mt.jsx(u,{team:"red"}),Mt.jsx(kv,{children:Mt.jsx(jv,{})})]})}rv.createRoot(document.getElementById("root")).render(Mt.jsx(ov,{children:Mt.jsx(Lv,{})}));
